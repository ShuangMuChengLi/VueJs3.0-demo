{"version":3,"sources":["webpack:///./node_modules/ol/style/TextPlacement.js","webpack:///./node_modules/ol/layer/BaseVector.js","webpack:///./node_modules/ol/render/canvas/Instruction.js","webpack:///./node_modules/ol/render/canvas/Builder.js","webpack:///./node_modules/ol/render/canvas/ImageBuilder.js","webpack:///./node_modules/ol/render/canvas/LineStringBuilder.js","webpack:///./node_modules/ol/render/canvas/PolygonBuilder.js","webpack:///./node_modules/ol/geom/flat/straightchunk.js","webpack:///./node_modules/ol/render/canvas/TextBuilder.js","webpack:///./node_modules/ol/render/canvas/BuilderGroup.js","webpack:///./node_modules/ol/geom/flat/textpath.js","webpack:///./node_modules/ol/render/canvas/Executor.js","webpack:///./node_modules/ol/render/canvas/ExecutorGroup.js","webpack:///./node_modules/ol/render/canvas/hitdetect.js","webpack:///./node_modules/ol/renderer/canvas/VectorLayer.js","webpack:///./node_modules/ol/layer/Vector.js","webpack:///./node_modules/ol/Feature.js","webpack:///./demo/map-demo.vue?bed7","webpack:///./node_modules/ol/format/FormatType.js","webpack:///./node_modules/ol/featureloader.js","webpack:///./node_modules/ol/loadingstrategy.js","webpack:///./node_modules/ol/source/VectorEventType.js","webpack:///./node_modules/ol/structs/RBush.js","webpack:///./node_modules/ol/source/Vector.js","webpack:///./node_modules/ol/geom/flat/length.js","webpack:///./demo/map-demo.vue?46a6","webpack:///./node_modules/ol/source/Cluster.js","webpack:///./node_modules/ol/OverlayPositioning.js","webpack:///./node_modules/ol/Overlay.js","webpack:///./node_modules/ol/style/Text.js","webpack:///demo/map-demo.vue","webpack:///./demo/map-demo.vue?fbfc","webpack:///./demo/map-demo.vue","webpack:///./node_modules/ol/style/Style.js","webpack:///./node_modules/ol/style/IconImage.js","webpack:///./node_modules/ol/style/IconOrigin.js","webpack:///./node_modules/ol/style/Icon.js","webpack:///./node_modules/ol/geom/LineString.js","webpack:///./node_modules/ol/style/IconAnchorUnits.js","webpack:///./node_modules/ol/style/Fill.js","webpack:///./demo/img/ball-stop.png","webpack:///./node_modules/ol/style/Stroke.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/ol/style/Image.js","webpack:///./node_modules/ol/geom/Circle.js","webpack:///./node_modules/ol/geom/MultiLineString.js","webpack:///./node_modules/ol/geom/MultiPoint.js","webpack:///./node_modules/ol/geom/flat/center.js","webpack:///./node_modules/ol/geom/MultiPolygon.js","webpack:///./node_modules/ol/interaction/Draw.js","webpack:///./node_modules/ol/geom/flat/interpolate.js","webpack:///./node_modules/rbush/rbush.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/ol/style/RegularShape.js","webpack:///./node_modules/ol/style/Circle.js","webpack:///./demo/img/ball-running.png"],"names":["POINT","LINE","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","Property","RENDER_ORDER","_super","BaseVectorLayer","opt_options","_this","options","baseOptions","style","renderBuffer","updateWhileAnimating","updateWhileInteracting","call","declutter_","undefined","declutter","renderBuffer_","style_","styleFunction_","setStyle","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getFeatures","pixel","getRenderBuffer","getRenderOrder","get","getStyle","getStyleFunction","getUpdateWhileAnimating","getUpdateWhileInteracting","setRenderOrder","renderOrder","set","changed","Layer","BaseVector","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CIRCLE","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","beginPathInstruction","closePathInstruction","CanvasBuilder","tolerance","maxExtent","resolution","pixelRatio","maxLineWidth","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinates","tmpCoordinate_","hitDetectionInstructions","state","applyPixelRatio","dashArray","map","dash","appendFlatCoordinates","flatCoordinates","offset","end","stride","closed","skipFirst","myEnd","length","extent","getBufferedMaxExtent","i","lastRel","nextRel","lastXCoord","lastYCoord","nextCoord","skipped","Relationship","INTERSECTING","drawCustomCoordinates_","ends","builderEnds","ii","builderEnd","push","drawCustom","geometry","feature","renderer","beginGeometry","builderEndss","type","getType","getStride","builderBegin","GeometryType","MULTI_POLYGON","getOrientedFlatCoordinates","endss","getEndss","myEnds","inflate","POLYGON","MULTI_LINE_STRING","getFlatCoordinates","getEnds","LINE_STRING","MULTI_POINT","endGeometry","getExtent","finish","reverseHitDetectionInstructions","reverse","instruction","n","begin","setFillStrokeStyle","fillStyle","strokeStyle","fillStyleColor","getColor","strokeStyleColor","strokeStyleLineCap","getLineCap","lineCap","strokeStyleLineDash","getLineDash","lineDash","slice","strokeStyleLineDashOffset","getLineDashOffset","lineDashOffset","strokeStyleLineJoin","getLineJoin","lineJoin","strokeStyleWidth","getWidth","lineWidth","strokeStyleMiterLimit","getMiterLimit","miterLimit","createFill","fillInstruction","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","width","VectorContext","CanvasImageBuilder","declutterGroups_","hitDetectionImage_","image_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","rotation_","scale_","width_","drawCoordinates_","drawPoint","pointGeometry","myBegin","drawMultiPoint","multiPointGeometry","setImageStyle","imageStyle","declutterGroups","anchor","getAnchor","size","getSize","hitDetectionImage","getHitDetectionImage","image","getImage","origin","getOrigin","getOpacity","getRotateWithView","getRotation","getScale","CanvasLineStringBuilder","drawFlatCoordinates_","moveToLineToInstruction","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","lastStroke","CanvasPolygonBuilder","drawFlatCoordinatess_","fill","stroke","numEnds","drawCircle","circleGeometry","setFillStrokeStyles_","circleInstruction","drawPolygon","polygonGeometry","drawMultiPolygon","multiPolygonGeometry","matchingChunk","maxAngle","acos","m12","m23","x1","y1","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","m","start","x2","y2","Math","sqrt","TEXT_ALIGN","CanvasTextBuilder","labels_","text_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textFillState_","fillStates","textStrokeState_","strokeStates","textState_","textStates","textKey_","fillKey_","strokeKey_","drawText","fillState","strokeState","textState","geometryType","placement","TextPlacement","textAlign","flatOffset","flatEnd","o","oo","range","declutterGroup","concat","drawChars_","geometryWidths","overflow","getFlatMidpoint","getCenter","getFlatMidpoints","getFlatInteriorPoint","interiorPoints","getFlatInteriorPoints","saveTextStates_","backgroundFill","backgroundStroke","pixelRatio_1","NaN","padding","strokeKey","textKey","font","textBaseline","scale","fillKey","baseline","offsetY","text","textScale","strokeWidth","setTextStyle","textStyle","textFillStyle","getFill","textStrokeStyle","getStroke","getFont","getOverflow","getMaxAngle","getPlacement","getTextAlign","getTextBaseline","getBackgroundFill","getBackgroundStroke","getPadding","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","getText","join","BATCH_CONSTRUCTORS","PolygonBuilder","Builder","ImageBuilder","LineStringBuilder","TextBuilder","BuilderGroup","tolerance_","maxExtent_","pixelRatio_","resolution_","buildersByZIndex_","addDeclutter","group","builderInstructions","zKey","builders","builderKey","builderInstruction","getBuilder","zIndex","builderType","zIndexKey","toString","replays","replay","Constructor","drawTextOnPath","startM","measureAndCacheTextWidth","cache","result","numChars","index","previousAngle","segmentM","segmentLength","pow","angleChanged","char","charLength","charM","segmentPos","angle","atan2","PI","delta","abs","interpolate","x","y","tmpExtent","tmpTransform","p1","p2","p3","p4","Executor","overlaps","alignFill_","declutterItems","coordinateCache_","renderedTransform_","pixelCoordinates_","viewRotation_","widths_","createLabel","key","align","lines","split","numLines","widths","lineHeight","height","renderWidth","contextInstructions","label","ceil","Context","OffscreenCanvasRenderingContext2D","CanvasRenderingContext2D","setLineDash","leftRight","replayTextBackground_","context","strokeInstruction","beginPath","moveTo","apply","lineTo","fill_","setStrokeStyle_","replayImageOrLabel_","imageOrLabel","anchorX","anchorY","opacity","originX","originY","rotation","snapToPixel","fillStroke","w","h","boxW","boxH","boxX","boxY","transform","centerX","centerY","min","max","canvas","strokePadding","intersects","round","declutterArgs","origin_1","repeatSize","save","translate","rotate","restore","renderDeclutter","declutterTree","groupCount","box","minX","minY","maxX","maxY","value","collides","insert","j","jj","declutterData","currentAlpha","globalAlpha","drawLabelWithPointPlacement_","execute_","featureCallback","opt_hitExtent","pixelCoordinates","dd","prevX","prevY","roundX","roundY","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","viewRotation","viewRotationFromTransform","batchSize","getGeometry","dx","dy","r","arc","closePath","fn","coords","rotateWithView","labelWithAnchor","widthIndex","declutterGroupIndex","floor","measurePixelRatio","pixelRatioScale","cachedWidths","pathLength","textLength","parts","c","cc","chars","part","execute","executeHitDetection","opt_featureCallback","ORDER","BuilderType","IMAGE","TEXT","DEFAULT","ExecutorGroup","allInstructions","opt_renderBuffer","overlaps_","executorsByZIndex_","hitDetectionContext_","hitDetectionTransform_","createExecutors_","clip","flatClipCoords","getClipCoords","executors","instructionByZindex","hasExecutors","candidates","forEachFeatureAtCoordinate","coordinate","hitTolerance","callback","declutteredFeatures","contextSize","hitExtent","clearRect","mask","getCircleArray","imageData","getImageData","data","i_1","j_1","result_1","indexOf","executor","zs","keys","Number","sort","isEmpty","opt_builderTypes","opt_declutterReplays","builderTypes","circleArrayCache","0","fillCircleArrayRowToMiddle","array","radius","arraySize","arr","error","replayDeclutter","declutterReplays","z","zz","executorData","currentExecutor","items","createHitDetectionImageData","transforms","features","styleFunction","imageSmoothingEnabled","featureCount","indexFactor","featuresByZIndex","featureStyleFunction","styles","isArray","color","originalStyle","clone","setColor","setText","imgSize","getImageSize","canvas_1","document","createElement","imgContext","getContext","alpha","img","fillRect","width_1","height_1","iconContext","drawImage","setImage","Icon","anchorXUnits","IconAnchorUnits","PIXELS","anchorYUnits","getZIndex","byGeometryType","getGeometryFunction","replace","zIndexKeys","geomAndStyle","k","kk","setTransform","drawGeometry","body","appendChild","hitDetect","resultFeatures","g","CanvasVectorLayerRenderer","vectorLayer","boundHandleStyleImageChange_","handleStyleImageChange_","bind","animatingOrInteracting_","dirty_","hitDetectionImageData_","renderedFeatures_","renderedRevision_","renderedResolution_","renderedExtent_","renderedRotation_","renderedCenter_","renderedProjection_","renderedRenderOrder_","replayGroup_","replayGroupChanged","useContainer","target","renderFrame","frameState","layerState","layerStatesArray","layerIndex","pixelTransform","inversePixelTransform","canvasTransform","replayGroup","containerReused","container","preRender","viewState","center","projection","projectionExtent","vectorSource","getLayer","getSource","clipped","layerExtent","viewHints","ViewHint","ANIMATING","INTERACTING","getRenderTransform","getWrapX","canWrapX","startX","worldWidth","world","offsetX","transform_1","transform_2","viewHints_1","hifi","postRender","parseFloat","Promise","resolve","reject","layer","source","layer_1","features_1","handleFontsChanged","getVisible","event","renderIfReadyAndVisible","prepareFrame","animating","interacting","frameStateExtent","vectorLayerRevision","getRevision","vectorLayerRenderBuffer","vectorLayerRenderOrder","loadExtents","gutter","loadExtent","userTransform","userProjection","loadFeatures","squaredTolerance","render","dirty","renderFeature","userExtent","getFeaturesInExtent","replayGroupInstructions","executorGroup","getOverlaps","builderGroup","opt_transform","loading","VectorLayer","createRenderer","Feature","opt_geometryOrProperties","id_","geometryName_","geometryChangeKey_","addEventListener","handleGeometryChanged_","getSimplifiedGeometry","setGeometry","properties","setProperties","getProperties","setGeometryName","getGeometryName","getId","handleGeometryChange_","CHANGE","createStyleFunction","setId","id","name","removeEventListener","obj","styles_1","ARRAY_BUFFER","JSON","XML","withCredentials","loadFeaturesXhr","url","format","success","failure","xhr","XMLHttpRequest","open","FormatType","responseType","onload","status","responseText","responseXML","DOMParser","parseFromString","readFeatures","featureProjection","readProjection","onerror","send","dataProjection","sourceOrTile","addFeatures","Infinity","ADDFEATURE","CHANGEFEATURE","CLEAR","REMOVEFEATURE","RBush","opt_maxEntries","rbush_","items_","item","load","extents","values","l","remove","uid","update","bbox","getAll","all","getInExtent","search","forEach","forEach_","forEachInExtent","clear","opt_extent","toJSON","rbush","VectorSourceEvent","opt_feature","Event","VectorSource","attributions","READY","wrapX","loader_","format_","url_","loader","strategy_","strategy","collection","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","getArray","Collection","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","dispatchEvent","VectorEventType","EventType","handleFeatureChange_","ObjectEventType","PROPERTYCHANGE","valid","newFeatures","geometryFeatures","length_1","length_2","length_3","modifyingCollection","evt","CollectionEventType","ADD","REMOVE","removeFeature","opt_fast","featureId","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","intersectsCoordinate","forEachFeatureIntersectingExtent","intersectsExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","closestPoint","minSquaredDistance","filter","previousMinSquaredDistance","closestPointXY","minDistance","getFeatureById","getFeatureByUid","getFormat","getUrl","sid","removeFromIdIndex_","hasFeature","loadedExtentsRtree","extentsToLoad","_loop_1","extentToLoad","alreadyLoaded","object","this_1","refresh","removeLoadedExtent","removed","setLoader","setUrl","Source","lineStringLength","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","showCircle","_v","hideCircle","addInteraction","drawLineHand","cancelDrawLineHand","drawLine","startAnimation","cluster","staticStyle","_s","tip","staticRenderFns","Cluster","distance","geometryFunction","boundRefresh_","setSource","getDistance","setDistance","mapDistance","clustered","getCoordinates","neighbors","neighbor","createCluster","centroid","splice","Point","Vector","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_LEFT","TOP_CENTER","TOP_RIGHT","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","Overlay","insertFirst","stopEvent","element","className","position","autoPan","animation","autoPanAnimation","margin","autoPanMargin","rendered","transform_","visible","mapPostrenderListenerKey","handleElementChanged","handleMapChanged","handleOffsetChanged","handlePositionChanged","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","OverlayPositioning","setPosition","getElement","getMap","getOffset","getPosition","getPositioning","MapEventType","POSTRENDER","updatePixelPosition","getOverlayContainerStopEvent","getOverlayContainer","insertBefore","childNodes","performAutoPan","setMap","panIntoView","panIntoViewOptions","getTargetElement","mapRect","getRect","overlayRect","myMargin","offsetLeft","offsetRight","offsetTop","offsetBottom","getView","getCenterInternal","centerPx","getPixelFromCoordinateInternal","newCenterPx","panOptions","animateInternal","getCoordinateFromPixelInternal","duration","easing","getBoundingClientRect","left","window","pageXOffset","top","pageYOffset","setVisible","display","isRendered","getPixelFromCoordinate","mapSize","updateRenderedPosition","posX","posY","msTransform","getOptions","DEFAULT_FILL_COLOR","Text","font_","textAlign_","textBaseline_","Fill","maxAngle_","placement_","overflow_","stroke_","offsetX_","offsetY_","backgroundFill_","backgroundStroke_","padding_","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setRotateWithView","setFill","setRotation","setScale","setStroke","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","vectorLayerList","mapObject","pointsList","textPointsList","activePointsList","drawSource","draw","drawVector","overlaySet","handDraw","now","speed","geoMarker","wgs84Sphere","clickPointSet","computed","watch","created","$emit","mounted","init","methods","initMap","initMapEvent","showLocationPoint","markerSource","markerVector","Map","layers","view","View","zoom","formatLength","console","log","$message","parseInt","mapObjectClick","mapObjectPointerMove","hasFeatureAtPixel","cursor","property","showTipModel","coors","hideModel","removeOverlay","showModel","point","currentOverlay","getElementById","addOverlay","option","isSetCenter","centerOn","showVectorLayer","Style","src","showTextPoint","circleFeature","showHightPoint","hideVectorLayer","vectorId","preventDefault","stopPropagation","stringify","getPointFeature","pointGeo","pointFeature","getTextPointFeature","getCircleFeature","Stroke","oVectorLayer","createVectorLayer","addLayer","oVectorSource","finishDrawing","removeInteraction","fraction","newCoordinates","setCoordinates","Polygon","Draw","freehand","linePoints","drawCar","Circle","a","lineFeature","getCoordinateAt","stopAnimation","coord","un","moveFeature","vectorContext","drawFeature","Date","getTime","createLineFeature","LineString","clusterSource","styleCache","clusters","component","geometry_","geometryFunction_","defaultGeometryFunction","renderer_","zIndex_","getRenderer","setRenderer","setZIndex","toFunction","defaultStyles","createDefaultStyle","createEditingStyle","white","blue","GEOMETRY_COLLECTION","IconImage","crossOrigin","imageState","Image","canvas_","color_","unlisten_","imageState_","size_","src_","tainted_","isTainted_","ImageState","LOADED","e","dispatchChangeEvent_","handleImageError_","ERROR","unlistenImage_","handleImageLoad_","replaceColor_","getImageState","getSrc","IDLE","LOADING","ctx","globalCompositeOperation","imgData","putImageData","iconImage","displacement","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","FRACTION","anchorYUnits_","crossOrigin_","iconImage_","offset_","offsetOrigin_","offsetOrigin","origin_","setAnchor","getHitDetectionImageSize","getDisplacement","iconImageSize","listenImageChange","listener","unlistenImageChange","opt_layout","flatMidpoint_","flatMidpointRevision_","maxDelta_","maxDeltaRevision_","setFlatCoordinates","appendCoordinate","layout","forEachSegment","getCoordinateAtM","opt_extrapolate","XYM","XYZM","extrapolate","opt_dest","getLength","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","XY","setLayout","module","exports","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","fails","METHOD_NAME","argument","method","ImageStyle","displacement_","setOpacity","opt_radius","setCenterAndRadius","squaredDistance","getRadius","containsXY","getRadiusSquared_","computeExtent","circleExtent","setCenter","deflate","setRadius","deltaX","deltaY","SimpleGeometry","MultiLineString","opt_ends","ends_","getLayout","lineStrings","lineString","appendLineString","opt_interpolate","GeometryLayout","getLineString","getLineStrings","midpoints","midpoint","simplifiedEnds","MultiPoint","appendPoint","multiPoint","getPoint","getPoints","points","linearRingss","flatCenters","MultiPolygon","opt_endss","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","orientedRevision_","orientedFlatCoordinates_","polygons","polygon","appendPolygon","len","newEndss","getArea","opt_right","orient","getInteriorPoints","simplifiedEndss","getPolygon","prevEnds","getPolygons","lastEnds","Mode","DrawEventType","DRAWSTART","DRAWEND","DRAWABORT","DrawEvent","pointerOptions","stopDown","shouldHandle_","downPx_","downTimeout_","lastDragTime_","freehand_","source_","features_","snapTolerance_","snapTolerance","type_","mode_","getMode","stopClick_","stopClick","minPoints_","minPoints","maxPoints_","maxPoints","finishCondition_","finishCondition","opt_geometry","circle","squaredLength","Constructor_1","mode_1","dragVertexDelay_","dragVertexDelay","finishCoordinate_","sketchFeature_","sketchPoint_","sketchCoords_","sketchLine_","sketchLineCoords_","squaredClickTolerance_","clickTolerance","overlay_","getDefaultStyleFunction","geometryName","condition_","condition","freehandCondition_","freehandCondition","ACTIVE","updateState_","getOverlay","handleEvent","originalEvent","CONTEXTMENU","move","MapBrowserEventType","POINTERMOVE","pass","POINTERDRAG","clearTimeout","addToDrawing_","POINTERDOWN","handlePointerMove_","pointerEvent","pointerType","DBLCLICK","handleDownEvent","startDrawing_","setTimeout","MapBrowserPointerEvent","handleUpEvent","circleMode","atFinish_","abortDrawing","downPx","clickPx","modifyDrawing_","createOrUpdateSketchPoint_","at","potentiallyDone","potentiallyFinishCoordinates","sketchCoords","finishCoordinate","finishPixel","sketchPointGeom","updateSketchFeatures_","getProjection","last","sketchLineGeom","ring","getLinearRing","done","pop","removeLastPoint","sketchFeature","abortDrawing_","appendCoordinates","mode","ending","extend","sketchFeatures","overlaySource","active","getActive","Pointer","createRegularPolygon","opt_sides","opt_angle","atan","createBox","boxCoordinates","interpolatePoint","pointX","pointY","cumulativeLengths","t","lineStringCoordinateAtM","lo","hi","mid","m0","m1","lineStringsCoordinateAtM","global","factory","quickselect","right","compare","quickselectStep","defaultCompare","s","exp","sd","newLeft","newRight","swap","tmp","maxEntries","_maxEntries","_minEntries","findItem","equalsFn","calcBBox","node","toBBox","distBBox","children","destNode","createNode","child","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","enlargedArea","intersectionArea","contains","multiSelect","stack","_all","nodesToSearch","childBBox","_build","_splitRoot","tmpNode","_insert","parent","goingUp","path","indexes","_condense","compareMinX","compareMinY","fromJSON","N","M","N2","N1","right2","right3","_chooseSubtree","level","minArea","minEnlargement","targetNode","area","enlargement","isNode","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","newNode","minOverlap","bbox1","bbox2","overlap","xMargin","_allDistMargin","yMargin","leftBBox","rightBBox","i$1","child$1","siblings","$","$indexOf","arrayMethodIsStrict","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","proto","forced","searchElement","arguments","RegularShape","hitDetectionCanvas_","points_","radius_","radius1","radius2_","radius2","angle_","imageSize_","hitDetectionImageSize_","getRadius2","getAngle","renderOptions","imageSize","draw_","createHitDetectionCanvas_","angle0","radiusC","cos","sin","drawHitDetectionCanvas_","CircleStyle"],"mappings":"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","file":"js/chunk-e244edaa.03eaab80.js","sourcesContent":["/**\n * @module ol/style/TextPlacement\n */\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n    POINT: 'point',\n    LINE: 'line'\n};\n//# sourceMappingURL=TextPlacement.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction } from '../style/Style.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    RENDER_ORDER: 'renderOrder'\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @extends {Layer<VectorSourceType>}\n * @api\n */\nvar BaseVectorLayer = /** @class */ (function (_super) {\n    __extends(BaseVectorLayer, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function BaseVectorLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.style;\n        delete baseOptions.renderBuffer;\n        delete baseOptions.updateWhileAnimating;\n        delete baseOptions.updateWhileInteracting;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.renderBuffer_ = options.renderBuffer !== undefined ?\n            options.renderBuffer : 100;\n        /**\n         * User provided style.\n         * @type {import(\"../style/Style.js\").StyleLike}\n         * @private\n         */\n        _this.style_ = null;\n        /**\n         * Style function for use within the library.\n         * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n         * @private\n         */\n        _this.styleFunction_ = undefined;\n        _this.setStyle(options.style);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n            options.updateWhileAnimating : false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n            options.updateWhileInteracting : false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Declutter.\n     */\n    BaseVectorLayer.prototype.getDeclutter = function () {\n        return this.declutter_;\n    };\n    /**\n     * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n     * that resolves with an array of features. The array will either contain the topmost feature\n     * when a hit was detected, or it will be empty.\n     *\n     * The hit detection algorithm used for this method is optimized for performance, but is less\n     * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n     * is not considered, and icons are only represented by their bounding box instead of the exact\n     * image.\n     *\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n     * @api\n     */\n    BaseVectorLayer.prototype.getFeatures = function (pixel) {\n        return _super.prototype.getFeatures.call(this, pixel);\n    };\n    /**\n     * @return {number|undefined} Render buffer.\n     */\n    BaseVectorLayer.prototype.getRenderBuffer = function () {\n        return this.renderBuffer_;\n    };\n    /**\n     * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n     *     order.\n     */\n    BaseVectorLayer.prototype.getRenderOrder = function () {\n        return (\n        /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER)));\n    };\n    /**\n     * Get the style for features.  This returns whatever was passed to the `style`\n     * option at construction or to the `setStyle` method.\n     * @return {import(\"../style/Style.js\").StyleLike}\n     *     Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the style function.\n     * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     animating.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n        return this.updateWhileAnimating_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     interacting.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n        return this.updateWhileInteracting_;\n    };\n    /**\n     * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n     *     Render order.\n     */\n    BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n        this.set(Property.RENDER_ORDER, renderOrder);\n    };\n    /**\n     * Set the style for features.  This can be a single style object, an array\n     * of styles, or a function that takes a feature and resolution and returns\n     * an array of styles. If it is `undefined` the default style is used. If\n     * it is `null` the layer has no style (a `null` style), so only features\n     * that have their own styles will be rendered in the layer. See\n     * {@link module:ol/style} for information on the default style.\n     * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.setStyle = function (style) {\n        this.style_ = style !== undefined ? style : createDefaultStyle;\n        this.styleFunction_ = style === null ?\n            undefined : toStyleFunction(this.style_);\n        this.changed();\n    };\n    return BaseVectorLayer;\n}(Layer));\nexport default BaseVectorLayer;\n//# sourceMappingURL=BaseVector.js.map","/**\n * @module ol/render/canvas/Instruction\n */\n/**\n * @enum {number}\n */\nvar Instruction = {\n    BEGIN_GEOMETRY: 0,\n    BEGIN_PATH: 1,\n    CIRCLE: 2,\n    CLOSE_PATH: 3,\n    CUSTOM: 4,\n    DRAW_CHARS: 5,\n    DRAW_IMAGE: 6,\n    END_GEOMETRY: 7,\n    FILL: 8,\n    MOVE_TO_LINE_TO: 9,\n    SET_FILL_STYLE: 10,\n    SET_STROKE_STYLE: 11,\n    STROKE: 12\n};\n/**\n * @type {Array<Instruction>}\n */\nexport var fillInstruction = [Instruction.FILL];\n/**\n * @type {Array<Instruction>}\n */\nexport var strokeInstruction = [Instruction.STROKE];\n/**\n * @type {Array<Instruction>}\n */\nexport var beginPathInstruction = [Instruction.BEGIN_PATH];\n/**\n * @type {Array<Instruction>}\n */\nexport var closePathInstruction = [Instruction.CLOSE_PATH];\nexport default Instruction;\n//# sourceMappingURL=Instruction.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/Builder\n */\nimport { equals, reverseSubArray } from '../../array.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { buffer, clone, coordinateRelationship } from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport { inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray } from '../../geom/flat/inflate.js';\nimport VectorContext from '../VectorContext.js';\nimport { defaultFillStyle, defaultStrokeStyle, defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset, defaultLineDash, defaultLineCap } from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, import(\"../canvas.js\").TextState>} [textStates] The text states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").FillState>} [fillStates] The fill states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").StrokeState>} [strokeStates] The stroke states (decluttering).\n */\nvar CanvasBuilder = /** @class */ (function (_super) {\n    __extends(CanvasBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.tolerance = tolerance;\n        /**\n         * @protected\n         * @const\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.maxExtent = maxExtent;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.pixelRatio = pixelRatio;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.maxLineWidth = 0;\n        /**\n         * @protected\n         * @const\n         * @type {number}\n         */\n        _this.resolution = resolution;\n        /**\n         * @private\n         * @type {Array<*>}\n         */\n        _this.beginGeometryInstruction1_ = null;\n        /**\n         * @private\n         * @type {Array<*>}\n         */\n        _this.beginGeometryInstruction2_ = null;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.bufferedMaxExtent_ = null;\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.instructions = [];\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        _this.coordinates = [];\n        /**\n         * @private\n         * @type {import(\"../../coordinate.js\").Coordinate}\n         */\n        _this.tmpCoordinate_ = [];\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        _this.hitDetectionInstructions = [];\n        /**\n         * @protected\n         * @type {import(\"../canvas.js\").FillStrokeState}\n         */\n        _this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n        return _this;\n    }\n    /**\n     * @protected\n     * @param {Array<number>} dashArray Dash array.\n     * @return {Array<number>} Dash array with pixel ratio applied\n     */\n    CanvasBuilder.prototype.applyPixelRatio = function (dashArray) {\n        var pixelRatio = this.pixelRatio;\n        return pixelRatio == 1 ? dashArray : dashArray.map(function (dash) {\n            return dash * pixelRatio;\n        });\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @param {boolean} closed Last input coordinate equals first.\n     * @param {boolean} skipFirst Skip first coordinate.\n     * @protected\n     * @return {number} My end.\n     */\n    CanvasBuilder.prototype.appendFlatCoordinates = function (flatCoordinates, offset, end, stride, closed, skipFirst) {\n        var myEnd = this.coordinates.length;\n        var extent = this.getBufferedMaxExtent();\n        if (skipFirst) {\n            offset += stride;\n        }\n        var lastXCoord = flatCoordinates[offset];\n        var lastYCoord = flatCoordinates[offset + 1];\n        var nextCoord = this.tmpCoordinate_;\n        var skipped = true;\n        var i, lastRel, nextRel;\n        for (i = offset + stride; i < end; i += stride) {\n            nextCoord[0] = flatCoordinates[i];\n            nextCoord[1] = flatCoordinates[i + 1];\n            nextRel = coordinateRelationship(extent, nextCoord);\n            if (nextRel !== lastRel) {\n                if (skipped) {\n                    this.coordinates[myEnd++] = lastXCoord;\n                    this.coordinates[myEnd++] = lastYCoord;\n                }\n                this.coordinates[myEnd++] = nextCoord[0];\n                this.coordinates[myEnd++] = nextCoord[1];\n                skipped = false;\n            }\n            else if (nextRel === Relationship.INTERSECTING) {\n                this.coordinates[myEnd++] = nextCoord[0];\n                this.coordinates[myEnd++] = nextCoord[1];\n                skipped = false;\n            }\n            else {\n                skipped = true;\n            }\n            lastXCoord = nextCoord[0];\n            lastYCoord = nextCoord[1];\n            lastRel = nextRel;\n        }\n        // Last coordinate equals first or only one point to append:\n        if ((closed && skipped) || i === offset + stride) {\n            this.coordinates[myEnd++] = lastXCoord;\n            this.coordinates[myEnd++] = lastYCoord;\n        }\n        return myEnd;\n    };\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @param {Array<number>} builderEnds Builder ends.\n     * @return {number} Offset.\n     */\n    CanvasBuilder.prototype.drawCustomCoordinates_ = function (flatCoordinates, offset, ends, stride, builderEnds) {\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var builderEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n            builderEnds.push(builderEnd);\n            offset = end;\n        }\n        return offset;\n    };\n    /**\n     * @inheritDoc.\n     */\n    CanvasBuilder.prototype.drawCustom = function (geometry, feature, renderer) {\n        this.beginGeometry(geometry, feature);\n        var type = geometry.getType();\n        var stride = geometry.getStride();\n        var builderBegin = this.coordinates.length;\n        var flatCoordinates, builderEnd, builderEnds, builderEndss;\n        var offset;\n        if (type == GeometryType.MULTI_POLYGON) {\n            geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry);\n            flatCoordinates = geometry.getOrientedFlatCoordinates();\n            builderEndss = [];\n            var endss = geometry.getEndss();\n            offset = 0;\n            for (var i = 0, ii = endss.length; i < ii; ++i) {\n                var myEnds = [];\n                offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n                builderEndss.push(myEnds);\n            }\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n        }\n        else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n            builderEnds = [];\n            flatCoordinates = (type == GeometryType.POLYGON) ?\n                /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getOrientedFlatCoordinates() :\n                geometry.getFlatCoordinates();\n            offset = this.drawCustomCoordinates_(flatCoordinates, 0, \n            /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds(), stride, builderEnds);\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEnds, geometry, renderer, inflateCoordinatesArray]);\n        }\n        else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n            flatCoordinates = geometry.getFlatCoordinates();\n            builderEnd = this.appendFlatCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEnd, geometry, renderer, inflateCoordinates]);\n        }\n        else if (type == GeometryType.POINT) {\n            flatCoordinates = geometry.getFlatCoordinates();\n            this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n            builderEnd = this.coordinates.length;\n            this.instructions.push([CanvasInstruction.CUSTOM,\n                builderBegin, builderEnd, geometry, renderer]);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @protected\n     * @param {import(\"../../geom/Geometry\").default|import(\"../Feature.js\").default} geometry The geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasBuilder.prototype.beginGeometry = function (geometry, feature) {\n        var extent = geometry.getExtent();\n        this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, extent];\n        this.instructions.push(this.beginGeometryInstruction1_);\n        this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, extent];\n        this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n    };\n    /**\n     * @return {SerializableInstructions} the serializable instructions.\n     */\n    CanvasBuilder.prototype.finish = function () {\n        return {\n            instructions: this.instructions,\n            hitDetectionInstructions: this.hitDetectionInstructions,\n            coordinates: this.coordinates\n        };\n    };\n    /**\n     * Reverse the hit detection instructions.\n     */\n    CanvasBuilder.prototype.reverseHitDetectionInstructions = function () {\n        var hitDetectionInstructions = this.hitDetectionInstructions;\n        // step 1 - reverse array\n        hitDetectionInstructions.reverse();\n        // step 2 - reverse instructions within geometry blocks\n        var i;\n        var n = hitDetectionInstructions.length;\n        var instruction;\n        var type;\n        var begin = -1;\n        for (i = 0; i < n; ++i) {\n            instruction = hitDetectionInstructions[i];\n            type = /** @type {CanvasInstruction} */ (instruction[0]);\n            if (type == CanvasInstruction.END_GEOMETRY) {\n                begin = i;\n            }\n            else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n                instruction[2] = i;\n                reverseSubArray(this.hitDetectionInstructions, begin, i);\n                begin = -1;\n            }\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasBuilder.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n        var state = this.state;\n        if (fillStyle) {\n            var fillStyleColor = fillStyle.getColor();\n            state.fillStyle = asColorLike(fillStyleColor ?\n                fillStyleColor : defaultFillStyle);\n        }\n        else {\n            state.fillStyle = undefined;\n        }\n        if (strokeStyle) {\n            var strokeStyleColor = strokeStyle.getColor();\n            state.strokeStyle = asColorLike(strokeStyleColor ?\n                strokeStyleColor : defaultStrokeStyle);\n            var strokeStyleLineCap = strokeStyle.getLineCap();\n            state.lineCap = strokeStyleLineCap !== undefined ?\n                strokeStyleLineCap : defaultLineCap;\n            var strokeStyleLineDash = strokeStyle.getLineDash();\n            state.lineDash = strokeStyleLineDash ?\n                strokeStyleLineDash.slice() : defaultLineDash;\n            var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n            state.lineDashOffset = strokeStyleLineDashOffset ?\n                strokeStyleLineDashOffset : defaultLineDashOffset;\n            var strokeStyleLineJoin = strokeStyle.getLineJoin();\n            state.lineJoin = strokeStyleLineJoin !== undefined ?\n                strokeStyleLineJoin : defaultLineJoin;\n            var strokeStyleWidth = strokeStyle.getWidth();\n            state.lineWidth = strokeStyleWidth !== undefined ?\n                strokeStyleWidth : defaultLineWidth;\n            var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n            state.miterLimit = strokeStyleMiterLimit !== undefined ?\n                strokeStyleMiterLimit : defaultMiterLimit;\n            if (state.lineWidth > this.maxLineWidth) {\n                this.maxLineWidth = state.lineWidth;\n                // invalidate the buffered max extent cache\n                this.bufferedMaxExtent_ = null;\n            }\n        }\n        else {\n            state.strokeStyle = undefined;\n            state.lineCap = undefined;\n            state.lineDash = null;\n            state.lineDashOffset = undefined;\n            state.lineJoin = undefined;\n            state.lineWidth = undefined;\n            state.miterLimit = undefined;\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @return {Array<*>} Fill instruction.\n     */\n    CanvasBuilder.prototype.createFill = function (state) {\n        var fillStyle = state.fillStyle;\n        /** @type {Array<*>} */\n        var fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n        if (typeof fillStyle !== 'string') {\n            // Fill is a pattern or gradient - align it!\n            fillInstruction.push(true);\n        }\n        return fillInstruction;\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     */\n    CanvasBuilder.prototype.applyStroke = function (state) {\n        this.instructions.push(this.createStroke(state));\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @return {Array<*>} Stroke instruction.\n     */\n    CanvasBuilder.prototype.createStroke = function (state) {\n        return [\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n            state.lineJoin, state.miterLimit,\n            this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n        ];\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState):Array<*>} createFill Create fill.\n     */\n    CanvasBuilder.prototype.updateFillStyle = function (state, createFill) {\n        var fillStyle = state.fillStyle;\n        if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n            if (fillStyle !== undefined) {\n                this.instructions.push(createFill.call(this, state));\n            }\n            state.currentFillStyle = fillStyle;\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").FillStrokeState} state State.\n     * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState): void} applyStroke Apply stroke.\n     */\n    CanvasBuilder.prototype.updateStrokeStyle = function (state, applyStroke) {\n        var strokeStyle = state.strokeStyle;\n        var lineCap = state.lineCap;\n        var lineDash = state.lineDash;\n        var lineDashOffset = state.lineDashOffset;\n        var lineJoin = state.lineJoin;\n        var lineWidth = state.lineWidth;\n        var miterLimit = state.miterLimit;\n        if (state.currentStrokeStyle != strokeStyle ||\n            state.currentLineCap != lineCap ||\n            (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n            state.currentLineDashOffset != lineDashOffset ||\n            state.currentLineJoin != lineJoin ||\n            state.currentLineWidth != lineWidth ||\n            state.currentMiterLimit != miterLimit) {\n            if (strokeStyle !== undefined) {\n                applyStroke.call(this, state);\n            }\n            state.currentStrokeStyle = strokeStyle;\n            state.currentLineCap = lineCap;\n            state.currentLineDash = lineDash;\n            state.currentLineDashOffset = lineDashOffset;\n            state.currentLineJoin = lineJoin;\n            state.currentLineWidth = lineWidth;\n            state.currentMiterLimit = miterLimit;\n        }\n    };\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n    CanvasBuilder.prototype.endGeometry = function (feature) {\n        this.beginGeometryInstruction1_[2] = this.instructions.length;\n        this.beginGeometryInstruction1_ = null;\n        this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n        this.beginGeometryInstruction2_ = null;\n        var endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n        this.instructions.push(endGeometryInstruction);\n        this.hitDetectionInstructions.push(endGeometryInstruction);\n    };\n    /**\n     * Get the buffered rendering extent.  Rendering will be clipped to the extent\n     * provided to the constructor.  To account for symbolizers that may intersect\n     * this extent, we calculate a buffered extent (e.g. based on stroke width).\n     * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n     * @protected\n     */\n    CanvasBuilder.prototype.getBufferedMaxExtent = function () {\n        if (!this.bufferedMaxExtent_) {\n            this.bufferedMaxExtent_ = clone(this.maxExtent);\n            if (this.maxLineWidth > 0) {\n                var width = this.resolution * (this.maxLineWidth + 1) / 2;\n                buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n            }\n        }\n        return this.bufferedMaxExtent_;\n    };\n    return CanvasBuilder;\n}(VectorContext));\nexport default CanvasBuilder;\n//# sourceMappingURL=Builder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/ImageBuilder\n */\nimport CanvasInstruction from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nvar CanvasImageBuilder = /** @class */ (function (_super) {\n    __extends(CanvasImageBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasImageBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n        /**\n         * @private\n         * @type {import(\"../canvas.js\").DeclutterGroups}\n         */\n        _this.declutterGroups_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n         */\n        _this.image_ = null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.anchorX_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.anchorY_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.height_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.opacity_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.originX_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.originY_ = undefined;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.rotateWithView_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.rotation_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.scale_ = undefined;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.width_ = undefined;\n        return _this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} My end.\n     */\n    CanvasImageBuilder.prototype.drawCoordinates_ = function (flatCoordinates, offset, end, stride) {\n        return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.drawPoint = function (pointGeometry, feature) {\n        if (!this.image_) {\n            return;\n        }\n        this.beginGeometry(pointGeometry, feature);\n        var flatCoordinates = pointGeometry.getFlatCoordinates();\n        var stride = pointGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        var myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n        this.instructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_ * this.pixelRatio, this.width_\n        ]);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_, this.width_\n        ]);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.drawMultiPoint = function (multiPointGeometry, feature) {\n        if (!this.image_) {\n            return;\n        }\n        this.beginGeometry(multiPointGeometry, feature);\n        var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n        var stride = multiPointGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        var myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n        this.instructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_ * this.pixelRatio, this.width_\n        ]);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n            // Remaining arguments to DRAW_IMAGE are in alphabetical order\n            this.anchorX_, this.anchorY_, this.declutterGroups_, this.height_, this.opacity_,\n            this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n            this.scale_, this.width_\n        ]);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.finish = function () {\n        this.reverseHitDetectionInstructions();\n        // FIXME this doesn't really protect us against further calls to draw*Geometry\n        this.anchorX_ = undefined;\n        this.anchorY_ = undefined;\n        this.hitDetectionImage_ = null;\n        this.image_ = null;\n        this.height_ = undefined;\n        this.scale_ = undefined;\n        this.opacity_ = undefined;\n        this.originX_ = undefined;\n        this.originY_ = undefined;\n        this.rotateWithView_ = undefined;\n        this.rotation_ = undefined;\n        this.width_ = undefined;\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasImageBuilder.prototype.setImageStyle = function (imageStyle, declutterGroups) {\n        var anchor = imageStyle.getAnchor();\n        var size = imageStyle.getSize();\n        var hitDetectionImage = imageStyle.getHitDetectionImage(1);\n        var image = imageStyle.getImage(1);\n        var origin = imageStyle.getOrigin();\n        this.anchorX_ = anchor[0];\n        this.anchorY_ = anchor[1];\n        this.declutterGroups_ = /** @type {import(\"../canvas.js\").DeclutterGroups} */ (declutterGroups);\n        this.hitDetectionImage_ = hitDetectionImage;\n        this.image_ = image;\n        this.height_ = size[1];\n        this.opacity_ = imageStyle.getOpacity();\n        this.originX_ = origin[0];\n        this.originY_ = origin[1];\n        this.rotateWithView_ = imageStyle.getRotateWithView();\n        this.rotation_ = imageStyle.getRotation();\n        this.scale_ = imageStyle.getScale();\n        this.width_ = size[0];\n    };\n    return CanvasImageBuilder;\n}(CanvasBuilder));\nexport default CanvasImageBuilder;\n//# sourceMappingURL=ImageBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/LineStringBuilder\n */\nimport CanvasInstruction, { strokeInstruction, beginPathInstruction } from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nvar CanvasLineStringBuilder = /** @class */ (function (_super) {\n    __extends(CanvasLineStringBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasLineStringBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {number} end End.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} end.\n     */\n    CanvasLineStringBuilder.prototype.drawFlatCoordinates_ = function (flatCoordinates, offset, end, stride) {\n        var myBegin = this.coordinates.length;\n        var myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n        var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n        this.instructions.push(moveToLineToInstruction);\n        this.hitDetectionInstructions.push(moveToLineToInstruction);\n        return end;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasLineStringBuilder.prototype.drawLineString = function (lineStringGeometry, feature) {\n        var state = this.state;\n        var strokeStyle = state.strokeStyle;\n        var lineWidth = state.lineWidth;\n        if (strokeStyle === undefined || lineWidth === undefined) {\n            return;\n        }\n        this.updateStrokeStyle(state, this.applyStroke);\n        this.beginGeometry(lineStringGeometry, feature);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n            state.miterLimit, state.lineDash, state.lineDashOffset\n        ], beginPathInstruction);\n        var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n        var stride = lineStringGeometry.getStride();\n        this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n        this.hitDetectionInstructions.push(strokeInstruction);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasLineStringBuilder.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) {\n        var state = this.state;\n        var strokeStyle = state.strokeStyle;\n        var lineWidth = state.lineWidth;\n        if (strokeStyle === undefined || lineWidth === undefined) {\n            return;\n        }\n        this.updateStrokeStyle(state, this.applyStroke);\n        this.beginGeometry(multiLineStringGeometry, feature);\n        this.hitDetectionInstructions.push([\n            CanvasInstruction.SET_STROKE_STYLE,\n            state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n            state.miterLimit, state.lineDash, state.lineDashOffset\n        ], beginPathInstruction);\n        var ends = multiLineStringGeometry.getEnds();\n        var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n        var stride = multiLineStringGeometry.getStride();\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n        }\n        this.hitDetectionInstructions.push(strokeInstruction);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasLineStringBuilder.prototype.finish = function () {\n        var state = this.state;\n        if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n            this.instructions.push(strokeInstruction);\n        }\n        this.reverseHitDetectionInstructions();\n        this.state = null;\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @inheritDoc.\n     */\n    CanvasLineStringBuilder.prototype.applyStroke = function (state) {\n        if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n            this.instructions.push(strokeInstruction);\n            state.lastStroke = this.coordinates.length;\n        }\n        state.lastStroke = 0;\n        _super.prototype.applyStroke.call(this, state);\n        this.instructions.push(beginPathInstruction);\n    };\n    return CanvasLineStringBuilder;\n}(CanvasBuilder));\nexport default CanvasLineStringBuilder;\n//# sourceMappingURL=LineStringBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/PolygonBuilder\n */\nimport { snap } from '../../geom/flat/simplify.js';\nimport { defaultFillStyle } from '../canvas.js';\nimport CanvasInstruction, { fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction } from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nvar CanvasPolygonBuilder = /** @class */ (function (_super) {\n    __extends(CanvasPolygonBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasPolygonBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    }\n    /**\n     * @param {Array<number>} flatCoordinates Flat coordinates.\n     * @param {number} offset Offset.\n     * @param {Array<number>} ends Ends.\n     * @param {number} stride Stride.\n     * @private\n     * @return {number} End.\n     */\n    CanvasPolygonBuilder.prototype.drawFlatCoordinatess_ = function (flatCoordinates, offset, ends, stride) {\n        var state = this.state;\n        var fill = state.fillStyle !== undefined;\n        var stroke = state.strokeStyle !== undefined;\n        var numEnds = ends.length;\n        this.instructions.push(beginPathInstruction);\n        this.hitDetectionInstructions.push(beginPathInstruction);\n        for (var i = 0; i < numEnds; ++i) {\n            var end = ends[i];\n            var myBegin = this.coordinates.length;\n            var myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n            var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n            this.instructions.push(moveToLineToInstruction);\n            this.hitDetectionInstructions.push(moveToLineToInstruction);\n            if (stroke) {\n                // Performance optimization: only call closePath() when we have a stroke.\n                // Otherwise the ring is closed already (see appendFlatCoordinates above).\n                this.instructions.push(closePathInstruction);\n                this.hitDetectionInstructions.push(closePathInstruction);\n            }\n            offset = end;\n        }\n        if (fill) {\n            this.instructions.push(fillInstruction);\n            this.hitDetectionInstructions.push(fillInstruction);\n        }\n        if (stroke) {\n            this.instructions.push(strokeInstruction);\n            this.hitDetectionInstructions.push(strokeInstruction);\n        }\n        return offset;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.drawCircle = function (circleGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(circleGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n                state.miterLimit, state.lineDash, state.lineDashOffset\n            ]);\n        }\n        var flatCoordinates = circleGeometry.getFlatCoordinates();\n        var stride = circleGeometry.getStride();\n        var myBegin = this.coordinates.length;\n        this.appendFlatCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n        var circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n        this.instructions.push(beginPathInstruction, circleInstruction);\n        this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n        if (state.fillStyle !== undefined) {\n            this.instructions.push(fillInstruction);\n            this.hitDetectionInstructions.push(fillInstruction);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.instructions.push(strokeInstruction);\n            this.hitDetectionInstructions.push(strokeInstruction);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.drawPolygon = function (polygonGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(polygonGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n                state.miterLimit, state.lineDash, state.lineDashOffset\n            ]);\n        }\n        var ends = polygonGeometry.getEnds();\n        var flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n        var stride = polygonGeometry.getStride();\n        this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        var strokeStyle = state.strokeStyle;\n        if (fillStyle === undefined && strokeStyle === undefined) {\n            return;\n        }\n        this.setFillStrokeStyles_();\n        this.beginGeometry(multiPolygonGeometry, feature);\n        if (state.fillStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_FILL_STYLE,\n                defaultFillStyle\n            ]);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.hitDetectionInstructions.push([\n                CanvasInstruction.SET_STROKE_STYLE,\n                state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n                state.miterLimit, state.lineDash, state.lineDashOffset\n            ]);\n        }\n        var endss = multiPolygonGeometry.getEndss();\n        var flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n        var stride = multiPolygonGeometry.getStride();\n        var offset = 0;\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n            offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n        }\n        this.endGeometry(feature);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasPolygonBuilder.prototype.finish = function () {\n        this.reverseHitDetectionInstructions();\n        this.state = null;\n        // We want to preserve topology when drawing polygons.  Polygons are\n        // simplified using quantization and point elimination. However, we might\n        // have received a mix of quantized and non-quantized geometries, so ensure\n        // that all are quantized by quantizing all coordinates in the batch.\n        var tolerance = this.tolerance;\n        if (tolerance !== 0) {\n            var coordinates = this.coordinates;\n            for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n                coordinates[i] = snap(coordinates[i], tolerance);\n            }\n        }\n        return _super.prototype.finish.call(this);\n    };\n    /**\n     * @private\n     */\n    CanvasPolygonBuilder.prototype.setFillStrokeStyles_ = function () {\n        var state = this.state;\n        var fillStyle = state.fillStyle;\n        if (fillStyle !== undefined) {\n            this.updateFillStyle(state, this.createFill);\n        }\n        if (state.strokeStyle !== undefined) {\n            this.updateStrokeStyle(state, this.applyStroke);\n        }\n    };\n    return CanvasPolygonBuilder;\n}(CanvasBuilder));\nexport default CanvasPolygonBuilder;\n//# sourceMappingURL=PolygonBuilder.js.map","/**\n * @module ol/geom/flat/straightchunk\n */\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n    var chunkStart = offset;\n    var chunkEnd = offset;\n    var chunkM = 0;\n    var m = 0;\n    var start = offset;\n    var acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n    for (i = offset; i < end; i += stride) {\n        var x2 = flatCoordinates[i];\n        var y2 = flatCoordinates[i + 1];\n        if (x1 !== undefined) {\n            x23 = x2 - x1;\n            y23 = y2 - y1;\n            m23 = Math.sqrt(x23 * x23 + y23 * y23);\n            if (x12 !== undefined) {\n                m += m12;\n                acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n                if (acos > maxAngle) {\n                    if (m > chunkM) {\n                        chunkM = m;\n                        chunkStart = start;\n                        chunkEnd = i;\n                    }\n                    m = 0;\n                    start = i - stride;\n                }\n            }\n            m12 = m23;\n            x12 = x23;\n            y12 = y23;\n        }\n        x1 = x2;\n        y1 = y2;\n    }\n    m += m23;\n    return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n//# sourceMappingURL=straightchunk.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/render/canvas/TextBuilder\n */\nimport { getUid } from '../../util.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { intersects } from '../../extent.js';\nimport { matchingChunk } from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport { defaultTextAlign, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, registerFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline } from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport CanvasBuilder from './Builder.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n/**\n * @const\n * @enum {number}\n */\nexport var TEXT_ALIGN = {\n    'left': 0,\n    'end': 0,\n    'center': 0.5,\n    'right': 1,\n    'start': 1,\n    'top': 0,\n    'middle': 0.5,\n    'hanging': 0.2,\n    'alphabetic': 0.8,\n    'ideographic': 0.8,\n    'bottom': 1\n};\nvar CanvasTextBuilder = /** @class */ (function (_super) {\n    __extends(CanvasTextBuilder, _super);\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function CanvasTextBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n        var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n        /**\n         * @private\n         * @type {import(\"../canvas.js\").DeclutterGroups}\n         */\n        _this.declutterGroups_;\n        /**\n         * @private\n         * @type {Array<HTMLCanvasElement>}\n         */\n        _this.labels_ = null;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.text_ = '';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetX_ = 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textOffsetY_ = 0;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.textRotateWithView_ = undefined;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.textRotation_ = 0;\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").FillState}\n         */\n        _this.textFillState_ = null;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").FillState>}\n         */\n        _this.fillStates = {};\n        /**\n         * @private\n         * @type {?import(\"../canvas.js\").StrokeState}\n         */\n        _this.textStrokeState_ = null;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n         */\n        _this.strokeStates = {};\n        /**\n         * @private\n         * @type {import(\"../canvas.js\").TextState}\n         */\n        _this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").TextState>}\n         */\n        _this.textStates = {};\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.textKey_ = '';\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.fillKey_ = '';\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.strokeKey_ = '';\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    CanvasTextBuilder.prototype.finish = function () {\n        var instructions = _super.prototype.finish.call(this);\n        instructions.textStates = this.textStates;\n        instructions.fillStates = this.fillStates;\n        instructions.strokeStates = this.strokeStates;\n        return instructions;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasTextBuilder.prototype.drawText = function (geometry, feature) {\n        var fillState = this.textFillState_;\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n            return;\n        }\n        var begin = this.coordinates.length;\n        var geometryType = geometry.getType();\n        var flatCoordinates = null;\n        var end = 2;\n        var stride = 2;\n        var i, ii;\n        if (textState.placement === TextPlacement.LINE) {\n            if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n                return;\n            }\n            var ends = void 0;\n            flatCoordinates = geometry.getFlatCoordinates();\n            stride = geometry.getStride();\n            if (geometryType == GeometryType.LINE_STRING) {\n                ends = [flatCoordinates.length];\n            }\n            else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n                ends = geometry.getEnds();\n            }\n            else if (geometryType == GeometryType.POLYGON) {\n                ends = geometry.getEnds().slice(0, 1);\n            }\n            else if (geometryType == GeometryType.MULTI_POLYGON) {\n                var endss = geometry.getEndss();\n                ends = [];\n                for (i = 0, ii = endss.length; i < ii; ++i) {\n                    ends.push(endss[i][0]);\n                }\n            }\n            this.beginGeometry(geometry, feature);\n            var textAlign = textState.textAlign;\n            var flatOffset = 0;\n            var flatEnd = void 0;\n            for (var o = 0, oo = ends.length; o < oo; ++o) {\n                if (textAlign == undefined) {\n                    var range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n                    flatOffset = range[0];\n                    flatEnd = range[1];\n                }\n                else {\n                    flatEnd = ends[o];\n                }\n                for (i = flatOffset; i < flatEnd; i += stride) {\n                    this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n                }\n                end = this.coordinates.length;\n                flatOffset = ends[o];\n                var declutterGroup = this.declutterGroups_ ?\n                    (o === 0 ? this.declutterGroups_[0] : [].concat(this.declutterGroups_[0])) :\n                    null;\n                this.drawChars_(begin, end, declutterGroup);\n                begin = end;\n            }\n            this.endGeometry(feature);\n        }\n        else {\n            var geometryWidths = null;\n            if (!textState.overflow) {\n                geometryWidths = [];\n            }\n            switch (geometryType) {\n                case GeometryType.POINT:\n                case GeometryType.MULTI_POINT:\n                    flatCoordinates = geometry.getFlatCoordinates();\n                    end = flatCoordinates.length;\n                    break;\n                case GeometryType.LINE_STRING:\n                    flatCoordinates = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n                    break;\n                case GeometryType.CIRCLE:\n                    flatCoordinates = /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n                    break;\n                case GeometryType.MULTI_LINE_STRING:\n                    flatCoordinates = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n                    end = flatCoordinates.length;\n                    break;\n                case GeometryType.POLYGON:\n                    flatCoordinates = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n                    if (!textState.overflow) {\n                        geometryWidths.push(flatCoordinates[2] / this.resolution);\n                    }\n                    stride = 3;\n                    break;\n                case GeometryType.MULTI_POLYGON:\n                    var interiorPoints = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n                    flatCoordinates = [];\n                    for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n                        if (!textState.overflow) {\n                            geometryWidths.push(interiorPoints[i + 2] / this.resolution);\n                        }\n                        flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n                    }\n                    end = flatCoordinates.length;\n                    if (end == 0) {\n                        return;\n                    }\n                    break;\n                default:\n            }\n            end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n            this.saveTextStates_();\n            if (textState.backgroundFill || textState.backgroundStroke) {\n                this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n                if (textState.backgroundFill) {\n                    this.updateFillStyle(this.state, this.createFill);\n                    this.hitDetectionInstructions.push(this.createFill(this.state));\n                }\n                if (textState.backgroundStroke) {\n                    this.updateStrokeStyle(this.state, this.applyStroke);\n                    this.hitDetectionInstructions.push(this.createStroke(this.state));\n                }\n            }\n            this.beginGeometry(geometry, feature);\n            // The image is unknown at this stage so we pass null; it will be computed at render time.\n            // For clarity, we pass NaN for offsetX, offsetY, width and height, which will be computed at\n            // render time.\n            var pixelRatio_1 = this.pixelRatio;\n            this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n                null, NaN, NaN, this.declutterGroups_, NaN, 1, 0, 0,\n                this.textRotateWithView_, this.textRotation_, 1, NaN,\n                textState.padding == defaultPadding ?\n                    defaultPadding : textState.padding.map(function (p) {\n                    return p * pixelRatio_1;\n                }),\n                !!textState.backgroundFill, !!textState.backgroundStroke,\n                this.text_, this.textKey_, this.strokeKey_, this.fillKey_,\n                this.textOffsetX_, this.textOffsetY_, geometryWidths\n            ]);\n            this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n                null, NaN, NaN, this.declutterGroups_, NaN, 1, 0, 0,\n                this.textRotateWithView_, this.textRotation_, 1 / this.pixelRatio, NaN,\n                textState.padding,\n                !!textState.backgroundFill, !!textState.backgroundStroke,\n                this.text_, this.textKey_, this.strokeKey_, this.fillKey_,\n                this.textOffsetX_, this.textOffsetY_, geometryWidths\n            ]);\n            this.endGeometry(feature);\n        }\n    };\n    /**\n     * @private\n     */\n    CanvasTextBuilder.prototype.saveTextStates_ = function () {\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        var fillState = this.textFillState_;\n        var strokeKey = this.strokeKey_;\n        if (strokeState) {\n            if (!(strokeKey in this.strokeStates)) {\n                this.strokeStates[strokeKey] = {\n                    strokeStyle: strokeState.strokeStyle,\n                    lineCap: strokeState.lineCap,\n                    lineDashOffset: strokeState.lineDashOffset,\n                    lineWidth: strokeState.lineWidth,\n                    lineJoin: strokeState.lineJoin,\n                    miterLimit: strokeState.miterLimit,\n                    lineDash: strokeState.lineDash\n                };\n            }\n        }\n        var textKey = this.textKey_;\n        if (!(textKey in this.textStates)) {\n            this.textStates[textKey] = {\n                font: textState.font,\n                textAlign: textState.textAlign || defaultTextAlign,\n                textBaseline: textState.textBaseline || defaultTextBaseline,\n                scale: textState.scale\n            };\n        }\n        var fillKey = this.fillKey_;\n        if (fillState) {\n            if (!(fillKey in this.fillStates)) {\n                this.fillStates[fillKey] = {\n                    fillStyle: fillState.fillStyle\n                };\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {number} begin Begin.\n     * @param {number} end End.\n     * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n     */\n    CanvasTextBuilder.prototype.drawChars_ = function (begin, end, declutterGroup) {\n        var strokeState = this.textStrokeState_;\n        var textState = this.textState_;\n        var strokeKey = this.strokeKey_;\n        var textKey = this.textKey_;\n        var fillKey = this.fillKey_;\n        this.saveTextStates_();\n        var pixelRatio = this.pixelRatio;\n        var baseline = TEXT_ALIGN[textState.textBaseline];\n        var offsetY = this.textOffsetY_ * pixelRatio;\n        var text = this.text_;\n        var textScale = textState.scale;\n        var strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n        this.instructions.push([CanvasInstruction.DRAW_CHARS,\n            begin, end, baseline, declutterGroup,\n            textState.overflow, fillKey, textState.maxAngle,\n            pixelRatio,\n            offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n        ]);\n        this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n            begin, end, baseline, declutterGroup,\n            textState.overflow, fillKey, textState.maxAngle,\n            1,\n            offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n        ]);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasTextBuilder.prototype.setTextStyle = function (textStyle, declutterGroups) {\n        var textState, fillState, strokeState;\n        if (!textStyle) {\n            this.text_ = '';\n        }\n        else {\n            this.declutterGroups_ = /** @type {import(\"../canvas.js\").DeclutterGroups} */ (declutterGroups);\n            var textFillStyle = textStyle.getFill();\n            if (!textFillStyle) {\n                fillState = null;\n                this.textFillState_ = fillState;\n            }\n            else {\n                fillState = this.textFillState_;\n                if (!fillState) {\n                    fillState = /** @type {import(\"../canvas.js\").FillState} */ ({});\n                    this.textFillState_ = fillState;\n                }\n                fillState.fillStyle = asColorLike(textFillStyle.getColor() || defaultFillStyle);\n            }\n            var textStrokeStyle = textStyle.getStroke();\n            if (!textStrokeStyle) {\n                strokeState = null;\n                this.textStrokeState_ = strokeState;\n            }\n            else {\n                strokeState = this.textStrokeState_;\n                if (!strokeState) {\n                    strokeState = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n                    this.textStrokeState_ = strokeState;\n                }\n                var lineDash = textStrokeStyle.getLineDash();\n                var lineDashOffset = textStrokeStyle.getLineDashOffset();\n                var lineWidth = textStrokeStyle.getWidth();\n                var miterLimit = textStrokeStyle.getMiterLimit();\n                strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n                strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n                strokeState.lineDashOffset =\n                    lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n                strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n                strokeState.lineWidth =\n                    lineWidth === undefined ? defaultLineWidth : lineWidth;\n                strokeState.miterLimit =\n                    miterLimit === undefined ? defaultMiterLimit : miterLimit;\n                strokeState.strokeStyle = asColorLike(textStrokeStyle.getColor() || defaultStrokeStyle);\n            }\n            textState = this.textState_;\n            var font = textStyle.getFont() || defaultFont;\n            registerFont(font);\n            var textScale = textStyle.getScale();\n            textState.overflow = textStyle.getOverflow();\n            textState.font = font;\n            textState.maxAngle = textStyle.getMaxAngle();\n            textState.placement = textStyle.getPlacement();\n            textState.textAlign = textStyle.getTextAlign();\n            textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n            textState.backgroundFill = textStyle.getBackgroundFill();\n            textState.backgroundStroke = textStyle.getBackgroundStroke();\n            textState.padding = textStyle.getPadding() || defaultPadding;\n            textState.scale = textScale === undefined ? 1 : textScale;\n            var textOffsetX = textStyle.getOffsetX();\n            var textOffsetY = textStyle.getOffsetY();\n            var textRotateWithView = textStyle.getRotateWithView();\n            var textRotation = textStyle.getRotation();\n            this.text_ = textStyle.getText() || '';\n            this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n            this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n            this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n            this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n            this.strokeKey_ = strokeState ?\n                (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n                    strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n                    strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n                '';\n            this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?') + (textState.textBaseline || '?');\n            this.fillKey_ = fillState ?\n                (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n                '';\n        }\n    };\n    return CanvasTextBuilder;\n}(CanvasBuilder));\nexport default CanvasTextBuilder;\n//# sourceMappingURL=TextBuilder.js.map","/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport { createEmpty } from '../../extent.js';\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"./BuilderType\").default, typeof Builder>}\n */\nvar BATCH_CONSTRUCTORS = {\n    'Circle': PolygonBuilder,\n    'Default': Builder,\n    'Image': ImageBuilder,\n    'LineString': LineStringBuilder,\n    'Polygon': PolygonBuilder,\n    'Text': TextBuilder\n};\nvar BuilderGroup = /** @class */ (function () {\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} declutter Decluttering enabled.\n     */\n    function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio, declutter) {\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.declutter_ = declutter;\n        /**\n         * @type {import(\"../canvas.js\").DeclutterGroups}\n         * @private\n         */\n        this.declutterGroups_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.tolerance_ = tolerance;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {!Object<string, !Object<import(\"./BuilderType\").default, Builder>>}\n         */\n        this.buildersByZIndex_ = {};\n    }\n    /**\n     * @param {boolean} group Group with previous builder.\n     * @return {import(\"../canvas\").DeclutterGroups} The resulting instruction groups.\n     */\n    BuilderGroup.prototype.addDeclutter = function (group) {\n        var declutter = null;\n        if (this.declutter_) {\n            if (group) {\n                declutter = this.declutterGroups_;\n                /** @type {number} */ (declutter[0][4])++;\n            }\n            else {\n                declutter = [createEmpty()];\n                this.declutterGroups_ = declutter;\n                declutter[0].push(1);\n            }\n        }\n        return declutter;\n    };\n    /**\n     * @return {!Object<string, !Object<import(\"./BuilderType\").default, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n     */\n    BuilderGroup.prototype.finish = function () {\n        var builderInstructions = {};\n        for (var zKey in this.buildersByZIndex_) {\n            builderInstructions[zKey] = builderInstructions[zKey] || {};\n            var builders = this.buildersByZIndex_[zKey];\n            for (var builderKey in builders) {\n                var builderInstruction = builders[builderKey].finish();\n                builderInstructions[zKey][builderKey] = builderInstruction;\n            }\n        }\n        return builderInstructions;\n    };\n    /**\n     * @param {number|undefined} zIndex Z index.\n     * @param {import(\"./BuilderType.js\").default} builderType Replay type.\n     * @return {import(\"../VectorContext.js\").default} Replay.\n     */\n    BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n        var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n        var replays = this.buildersByZIndex_[zIndexKey];\n        if (replays === undefined) {\n            replays = {};\n            this.buildersByZIndex_[zIndexKey] = replays;\n        }\n        var replay = replays[builderType];\n        if (replay === undefined) {\n            var Constructor = BATCH_CONSTRUCTORS[builderType];\n            replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n            replays[builderType] = replay;\n        }\n        return replay;\n    };\n    return BuilderGroup;\n}());\nexport default BuilderGroup;\n//# sourceMappingURL=BuilderGroup.js.map","/**\n * @module ol/geom/flat/textpath\n */\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @param {number} scale The product of the text scale and the device pixel ratio.\n * @param {function(string, string, Object<string, number>):number} measureAndCacheTextWidth Measure and cache text width.\n * @param {string} font The font.\n * @param {Object<string, number>} cache A cache of measured widths.\n * @return {Array<Array<*>>} The result array (or null if `maxAngle` was\n * exceeded). Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(flatCoordinates, offset, end, stride, text, startM, maxAngle, scale, measureAndCacheTextWidth, font, cache) {\n    var result = [];\n    // Keep text upright\n    var reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n    var numChars = text.length;\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    offset += stride;\n    var x2 = flatCoordinates[offset];\n    var y2 = flatCoordinates[offset + 1];\n    var segmentM = 0;\n    var segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    var angleChanged = false;\n    var index, previousAngle;\n    for (var i = 0; i < numChars; ++i) {\n        index = reverse ? numChars - i - 1 : i;\n        var char = text[index];\n        var charLength = scale * measureAndCacheTextWidth(font, char, cache);\n        var charM = startM + charLength / 2;\n        while (offset < end - stride && segmentM + segmentLength < charM) {\n            x1 = x2;\n            y1 = y2;\n            offset += stride;\n            x2 = flatCoordinates[offset];\n            y2 = flatCoordinates[offset + 1];\n            segmentM += segmentLength;\n            segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n        }\n        var segmentPos = charM - segmentM;\n        var angle = Math.atan2(y2 - y1, x2 - x1);\n        if (reverse) {\n            angle += angle > 0 ? -Math.PI : Math.PI;\n        }\n        if (previousAngle !== undefined) {\n            var delta = angle - previousAngle;\n            angleChanged = angleChanged || delta !== 0;\n            delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n            if (Math.abs(delta) > maxAngle) {\n                return null;\n            }\n        }\n        previousAngle = angle;\n        var interpolate = segmentPos / segmentLength;\n        var x = lerp(x1, x2, interpolate);\n        var y = lerp(y1, y2, interpolate);\n        result[index] = [x, y, charLength / 2, angle, char];\n        startM += charLength;\n    }\n    return angleChanged ? result : [[result[0][0], result[0][1], result[0][2], result[0][3], text]];\n}\n//# sourceMappingURL=textpath.js.map","/**\n * @module ol/render/canvas/Executor\n */\nimport { equals } from '../../array.js';\nimport { createEmpty, createOrUpdate, createOrUpdateEmpty, extend, intersects } from '../../extent.js';\nimport { lineStringLength } from '../../geom/flat/length.js';\nimport { drawTextOnPath } from '../../geom/flat/textpath.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport { drawImageOrLabel, defaultPadding, defaultTextBaseline } from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport { TEXT_ALIGN } from './TextBuilder.js';\nimport { create as createTransform, compose as composeTransform, apply as applyTransform, setFromArray as transformSetFromArray } from '../../transform.js';\nimport { defaultTextAlign, measureTextHeight, measureAndCacheTextWidth, measureTextWidths } from '../canvas.js';\nimport RBush from 'rbush/rbush.js';\nimport { WORKER_OFFSCREEN_CANVAS } from '../../has.js';\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, import(\"../canvas.js\").TextState>} textStates The text states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").FillState>} fillStates The fill states (decluttering).\n * @property {!Object<string, import(\"../canvas.js\").StrokeState>} strokeStates The stroke states (decluttering).\n */\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nvar tmpExtent = createEmpty();\n/**\n * @type {!import(\"../../transform.js\").Transform}\n */\nvar tmpTransform = createTransform();\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p1 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p2 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p3 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\nvar p4 = [];\nvar Executor = /** @class */ (function () {\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} overlaps The replay can have overlapping geometries.\n     * @param {SerializableInstructions} instructions The serializable instructions\n     */\n    function Executor(resolution, pixelRatio, overlaps, instructions) {\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        this.overlaps = overlaps;\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.pixelRatio = pixelRatio;\n        /**\n         * @protected\n         * @const\n         * @type {number}\n         */\n        this.resolution = resolution;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.alignFill_;\n        /**\n         * @type {Array<*>}\n         */\n        this.declutterItems = [];\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        this.instructions = instructions.instructions;\n        /**\n         * @protected\n         * @type {Array<number>}\n         */\n        this.coordinates = instructions.coordinates;\n        /**\n         * @private\n         * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n         */\n        this.coordinateCache_ = {};\n        /**\n         * @private\n         * @type {!import(\"../../transform.js\").Transform}\n         */\n        this.renderedTransform_ = createTransform();\n        /**\n         * @protected\n         * @type {Array<*>}\n         */\n        this.hitDetectionInstructions = instructions.hitDetectionInstructions;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.pixelCoordinates_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.viewRotation_ = 0;\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").FillState>}\n         */\n        this.fillStates = instructions.fillStates || {};\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n         */\n        this.strokeStates = instructions.strokeStates || {};\n        /**\n         * @type {!Object<string, import(\"../canvas.js\").TextState>}\n         */\n        this.textStates = instructions.textStates || {};\n        /**\n         * @private\n         * @type {Object<string, Object<string, number>>}\n         */\n        this.widths_ = {};\n        /**\n         * @private\n         * @type {Object<string, import(\"../canvas.js\").Label>}\n         */\n        this.labels_ = {};\n    }\n    /**\n     * @param {string} text Text.\n     * @param {string} textKey Text style key.\n     * @param {string} fillKey Fill style key.\n     * @param {string} strokeKey Stroke style key.\n     * @return {import(\"../canvas.js\").Label} Label.\n     */\n    Executor.prototype.createLabel = function (text, textKey, fillKey, strokeKey) {\n        var key = text + textKey + fillKey + strokeKey;\n        if (this.labels_[key]) {\n            return this.labels_[key];\n        }\n        var strokeState = strokeKey ? this.strokeStates[strokeKey] : null;\n        var fillState = fillKey ? this.fillStates[fillKey] : null;\n        var textState = this.textStates[textKey];\n        var pixelRatio = this.pixelRatio;\n        var scale = textState.scale * pixelRatio;\n        var align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n        var strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n        var lines = text.split('\\n');\n        var numLines = lines.length;\n        var widths = [];\n        var width = measureTextWidths(textState.font, lines, widths);\n        var lineHeight = measureTextHeight(textState.font);\n        var height = lineHeight * numLines;\n        var renderWidth = width + strokeWidth;\n        var contextInstructions = [];\n        /** @type {import(\"../canvas.js\").Label} */\n        var label = {\n            // make canvas 2 pixels wider to account for italic text width measurement errors\n            width: Math.ceil((renderWidth + 2) * scale),\n            height: Math.ceil((height + strokeWidth) * scale),\n            contextInstructions: contextInstructions\n        };\n        if (scale != 1) {\n            contextInstructions.push('scale', [scale, scale]);\n        }\n        contextInstructions.push('font', textState.font);\n        if (strokeKey) {\n            contextInstructions.push('strokeStyle', strokeState.strokeStyle);\n            contextInstructions.push('lineWidth', strokeWidth);\n            contextInstructions.push('lineCap', strokeState.lineCap);\n            contextInstructions.push('lineJoin', strokeState.lineJoin);\n            contextInstructions.push('miterLimit', strokeState.miterLimit);\n            // eslint-disable-next-line\n            var Context = WORKER_OFFSCREEN_CANVAS ? OffscreenCanvasRenderingContext2D : CanvasRenderingContext2D;\n            if (Context.prototype.setLineDash) {\n                contextInstructions.push('setLineDash', [strokeState.lineDash]);\n                contextInstructions.push('lineDashOffset', strokeState.lineDashOffset);\n            }\n        }\n        if (fillKey) {\n            contextInstructions.push('fillStyle', fillState.fillStyle);\n        }\n        contextInstructions.push('textBaseline', 'middle');\n        contextInstructions.push('textAlign', 'center');\n        var leftRight = (0.5 - align);\n        var x = align * renderWidth + leftRight * strokeWidth;\n        var i;\n        if (strokeKey) {\n            for (i = 0; i < numLines; ++i) {\n                contextInstructions.push('strokeText', [lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight]);\n            }\n        }\n        if (fillKey) {\n            for (i = 0; i < numLines; ++i) {\n                contextInstructions.push('fillText', [lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight]);\n            }\n        }\n        this.labels_[key] = label;\n        return label;\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n     * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n     * @param {Array<*>} fillInstruction Fill instruction.\n     * @param {Array<*>} strokeInstruction Stroke instruction.\n     */\n    Executor.prototype.replayTextBackground_ = function (context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n        context.beginPath();\n        context.moveTo.apply(context, p1);\n        context.lineTo.apply(context, p2);\n        context.lineTo.apply(context, p3);\n        context.lineTo.apply(context, p4);\n        context.lineTo.apply(context, p1);\n        if (fillInstruction) {\n            this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n            this.fill_(context);\n        }\n        if (strokeInstruction) {\n            this.setStrokeStyle_(context, /** @type {Array<*>} */ (strokeInstruction));\n            context.stroke();\n        }\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} imageOrLabel Image.\n     * @param {number} anchorX Anchor X.\n     * @param {number} anchorY Anchor Y.\n     * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n     * @param {number} height Height.\n     * @param {number} opacity Opacity.\n     * @param {number} originX Origin X.\n     * @param {number} originY Origin Y.\n     * @param {number} rotation Rotation.\n     * @param {number} scale Scale.\n     * @param {boolean} snapToPixel Snap to pixel.\n     * @param {number} width Width.\n     * @param {Array<number>} padding Padding.\n     * @param {Array<*>} fillInstruction Fill instruction.\n     * @param {Array<*>} strokeInstruction Stroke instruction.\n     */\n    Executor.prototype.replayImageOrLabel_ = function (context, x, y, imageOrLabel, anchorX, anchorY, declutterGroup, height, opacity, originX, originY, rotation, scale, snapToPixel, width, padding, fillInstruction, strokeInstruction) {\n        var fillStroke = fillInstruction || strokeInstruction;\n        anchorX *= scale;\n        anchorY *= scale;\n        x -= anchorX;\n        y -= anchorY;\n        var w = (width + originX > imageOrLabel.width) ? imageOrLabel.width - originX : width;\n        var h = (height + originY > imageOrLabel.height) ? imageOrLabel.height - originY : height;\n        var boxW = padding[3] + w * scale + padding[1];\n        var boxH = padding[0] + h * scale + padding[2];\n        var boxX = x - padding[3];\n        var boxY = y - padding[0];\n        if (fillStroke || rotation !== 0) {\n            p1[0] = boxX;\n            p4[0] = boxX;\n            p1[1] = boxY;\n            p2[1] = boxY;\n            p2[0] = boxX + boxW;\n            p3[0] = p2[0];\n            p3[1] = boxY + boxH;\n            p4[1] = p3[1];\n        }\n        var transform = null;\n        if (rotation !== 0) {\n            var centerX = x + anchorX;\n            var centerY = y + anchorY;\n            transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n            applyTransform(tmpTransform, p1);\n            applyTransform(tmpTransform, p2);\n            applyTransform(tmpTransform, p3);\n            applyTransform(tmpTransform, p4);\n            createOrUpdate(Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1]), tmpExtent);\n        }\n        else {\n            createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n        }\n        var canvas = context.canvas;\n        var strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n        var intersects = tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n            tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n        if (snapToPixel) {\n            x = Math.round(x);\n            y = Math.round(y);\n        }\n        if (declutterGroup) {\n            if (!intersects && declutterGroup[4] == 1) {\n                return;\n            }\n            extend(declutterGroup, tmpExtent);\n            var declutterArgs = intersects ?\n                [context, transform ? transform.slice(0) : null, opacity, imageOrLabel, originX, originY, w, h, x, y, scale] :\n                null;\n            if (declutterArgs) {\n                if (fillStroke) {\n                    declutterArgs.push(fillInstruction, strokeInstruction, p1.slice(0), p2.slice(0), p3.slice(0), p4.slice(0));\n                }\n                declutterGroup.push(declutterArgs);\n            }\n        }\n        else if (intersects) {\n            if (fillStroke) {\n                this.replayTextBackground_(context, p1, p2, p3, p4, \n                /** @type {Array<*>} */ (fillInstruction), \n                /** @type {Array<*>} */ (strokeInstruction));\n            }\n            drawImageOrLabel(context, transform, opacity, imageOrLabel, originX, originY, w, h, x, y, scale);\n        }\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     */\n    Executor.prototype.fill_ = function (context) {\n        if (this.alignFill_) {\n            var origin_1 = applyTransform(this.renderedTransform_, [0, 0]);\n            var repeatSize = 512 * this.pixelRatio;\n            context.save();\n            context.translate(origin_1[0] % repeatSize, origin_1[1] % repeatSize);\n            context.rotate(this.viewRotation_);\n        }\n        context.fill();\n        if (this.alignFill_) {\n            context.restore();\n        }\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {Array<*>} instruction Instruction.\n     */\n    Executor.prototype.setStrokeStyle_ = function (context, instruction) {\n        context.strokeStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n        context.lineWidth = /** @type {number} */ (instruction[2]);\n        context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n        context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n        context.miterLimit = /** @type {number} */ (instruction[5]);\n        if (context.setLineDash) {\n            context.lineDashOffset = /** @type {number} */ (instruction[7]);\n            context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n        }\n    };\n    /**\n     * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {number} opacity Layer opacity.\n     * @param {?} declutterTree Declutter tree.\n     * @return {?} Declutter tree.\n     */\n    Executor.prototype.renderDeclutter = function (declutterGroup, feature, opacity, declutterTree) {\n        if (declutterGroup && declutterGroup.length > 5) {\n            var groupCount = declutterGroup[4];\n            if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n                /** @type {import(\"../../structs/RBush.js\").Entry} */\n                var box = {\n                    minX: /** @type {number} */ (declutterGroup[0]),\n                    minY: /** @type {number} */ (declutterGroup[1]),\n                    maxX: /** @type {number} */ (declutterGroup[2]),\n                    maxY: /** @type {number} */ (declutterGroup[3]),\n                    value: feature\n                };\n                if (!declutterTree) {\n                    declutterTree = new RBush(9);\n                }\n                if (!declutterTree.collides(box)) {\n                    declutterTree.insert(box);\n                    for (var j = 5, jj = declutterGroup.length; j < jj; ++j) {\n                        var declutterData = /** @type {Array} */ (declutterGroup[j]);\n                        var context = declutterData[0];\n                        var currentAlpha = context.globalAlpha;\n                        if (currentAlpha !== opacity) {\n                            context.globalAlpha = opacity;\n                        }\n                        if (declutterData.length > 11) {\n                            this.replayTextBackground_(declutterData[0], declutterData[13], declutterData[14], declutterData[15], declutterData[16], declutterData[11], declutterData[12]);\n                        }\n                        drawImageOrLabel.apply(undefined, declutterData);\n                        if (currentAlpha !== opacity) {\n                            context.globalAlpha = currentAlpha;\n                        }\n                    }\n                }\n                declutterGroup.length = 5;\n                createOrUpdateEmpty(declutterGroup);\n            }\n        }\n        return declutterTree;\n    };\n    /**\n     * @private\n     * @param {string} text The text to draw.\n     * @param {string} textKey The key of the text state.\n     * @param {string} strokeKey The key for the stroke state.\n     * @param {string} fillKey The key for the fill state.\n     * @return {{label: import(\"../canvas.js\").Label, anchorX: number, anchorY: number}} The text image and its anchor.\n     */\n    Executor.prototype.drawLabelWithPointPlacement_ = function (text, textKey, strokeKey, fillKey) {\n        var textState = this.textStates[textKey];\n        var label = this.createLabel(text, textKey, fillKey, strokeKey);\n        var strokeState = this.strokeStates[strokeKey];\n        var pixelRatio = this.pixelRatio;\n        var align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n        var baseline = TEXT_ALIGN[textState.textBaseline || defaultTextBaseline];\n        var strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n        // Remove the 2 pixels we added in createLabel() for the anchor\n        var width = label.width / pixelRatio - 2 * textState.scale;\n        var anchorX = align * width + 2 * (0.5 - align) * strokeWidth;\n        var anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n        return {\n            label: label,\n            anchorX: anchorX,\n            anchorY: anchorY\n        };\n    };\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {Array<*>} instructions Instructions array.\n     * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n     * @param {function(import(\"../../Feature.js\").FeatureLike): T|undefined} featureCallback Feature callback.\n     * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n     *     extent.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    Executor.prototype.execute_ = function (context, transform, instructions, snapToPixel, featureCallback, opt_hitExtent) {\n        this.declutterItems.length = 0;\n        /** @type {Array<number>} */\n        var pixelCoordinates;\n        if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n            pixelCoordinates = this.pixelCoordinates_;\n        }\n        else {\n            if (!this.pixelCoordinates_) {\n                this.pixelCoordinates_ = [];\n            }\n            pixelCoordinates = transform2D(this.coordinates, 0, this.coordinates.length, 2, transform, this.pixelCoordinates_);\n            transformSetFromArray(this.renderedTransform_, transform);\n        }\n        var i = 0; // instruction index\n        var ii = instructions.length; // end of instructions\n        var d = 0; // data index\n        var dd; // end of per-instruction data\n        var anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, declutterGroups, image, text, textKey;\n        var strokeKey, fillKey;\n        var pendingFill = 0;\n        var pendingStroke = 0;\n        var lastFillInstruction = null;\n        var lastStrokeInstruction = null;\n        var coordinateCache = this.coordinateCache_;\n        var viewRotation = this.viewRotation_;\n        var viewRotationFromTransform = Math.round(Math.atan2(-transform[1], transform[0]) * 1e12) / 1e12;\n        var state = /** @type {import(\"../../render.js\").State} */ ({\n            context: context,\n            pixelRatio: this.pixelRatio,\n            resolution: this.resolution,\n            rotation: viewRotation\n        });\n        // When the batch size gets too big, performance decreases. 200 is a good\n        // balance between batch size and number of fill/stroke instructions.\n        var batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n        var /** @type {import(\"../../Feature.js\").FeatureLike} */ feature;\n        var x, y;\n        while (i < ii) {\n            var instruction = instructions[i];\n            var type = /** @type {CanvasInstruction} */ (instruction[0]);\n            switch (type) {\n                case CanvasInstruction.BEGIN_GEOMETRY:\n                    feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n                    if (!feature.getGeometry()) {\n                        i = /** @type {number} */ (instruction[2]);\n                    }\n                    else if (opt_hitExtent !== undefined && !intersects(opt_hitExtent, instruction[3])) {\n                        i = /** @type {number} */ (instruction[2]) + 1;\n                    }\n                    else {\n                        ++i;\n                    }\n                    break;\n                case CanvasInstruction.BEGIN_PATH:\n                    if (pendingFill > batchSize) {\n                        this.fill_(context);\n                        pendingFill = 0;\n                    }\n                    if (pendingStroke > batchSize) {\n                        context.stroke();\n                        pendingStroke = 0;\n                    }\n                    if (!pendingFill && !pendingStroke) {\n                        context.beginPath();\n                        prevX = NaN;\n                        prevY = NaN;\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.CIRCLE:\n                    d = /** @type {number} */ (instruction[1]);\n                    var x1 = pixelCoordinates[d];\n                    var y1 = pixelCoordinates[d + 1];\n                    var x2 = pixelCoordinates[d + 2];\n                    var y2 = pixelCoordinates[d + 3];\n                    var dx = x2 - x1;\n                    var dy = y2 - y1;\n                    var r = Math.sqrt(dx * dx + dy * dy);\n                    context.moveTo(x1 + r, y1);\n                    context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n                    ++i;\n                    break;\n                case CanvasInstruction.CLOSE_PATH:\n                    context.closePath();\n                    ++i;\n                    break;\n                case CanvasInstruction.CUSTOM:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = instruction[2];\n                    var geometry = /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (instruction[3]);\n                    var renderer = instruction[4];\n                    var fn = instruction.length == 6 ? instruction[5] : undefined;\n                    state.geometry = geometry;\n                    state.feature = feature;\n                    if (!(i in coordinateCache)) {\n                        coordinateCache[i] = [];\n                    }\n                    var coords = coordinateCache[i];\n                    if (fn) {\n                        fn(pixelCoordinates, d, dd, 2, coords);\n                    }\n                    else {\n                        coords[0] = pixelCoordinates[d];\n                        coords[1] = pixelCoordinates[d + 1];\n                        coords.length = 2;\n                    }\n                    renderer(coords, state);\n                    ++i;\n                    break;\n                case CanvasInstruction.DRAW_IMAGE:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = /** @type {number} */ (instruction[2]);\n                    image = /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */ (instruction[3]);\n                    // Remaining arguments in DRAW_IMAGE are in alphabetical order\n                    anchorX = /** @type {number} */ (instruction[4]);\n                    anchorY = /** @type {number} */ (instruction[5]);\n                    declutterGroups = featureCallback ? null : instruction[6];\n                    var height = /** @type {number} */ (instruction[7]);\n                    var opacity = /** @type {number} */ (instruction[8]);\n                    var originX = /** @type {number} */ (instruction[9]);\n                    var originY = /** @type {number} */ (instruction[10]);\n                    var rotateWithView = /** @type {boolean} */ (instruction[11]);\n                    var rotation = /** @type {number} */ (instruction[12]);\n                    var scale = /** @type {number} */ (instruction[13]);\n                    var width = /** @type {number} */ (instruction[14]);\n                    if (!image && instruction.length >= 19) {\n                        // create label images\n                        text = /** @type {string} */ (instruction[18]);\n                        textKey = /** @type {string} */ (instruction[19]);\n                        strokeKey = /** @type {string} */ (instruction[20]);\n                        fillKey = /** @type {string} */ (instruction[21]);\n                        var labelWithAnchor = this.drawLabelWithPointPlacement_(text, textKey, strokeKey, fillKey);\n                        image = labelWithAnchor.label;\n                        instruction[3] = image;\n                        var textOffsetX = /** @type {number} */ (instruction[22]);\n                        anchorX = (labelWithAnchor.anchorX - textOffsetX) * this.pixelRatio;\n                        instruction[4] = anchorX;\n                        var textOffsetY = /** @type {number} */ (instruction[23]);\n                        anchorY = (labelWithAnchor.anchorY - textOffsetY) * this.pixelRatio;\n                        instruction[5] = anchorY;\n                        height = image.height;\n                        instruction[7] = height;\n                        width = image.width;\n                        instruction[14] = width;\n                    }\n                    var geometryWidths = void 0;\n                    if (instruction.length > 24) {\n                        geometryWidths = /** @type {number} */ (instruction[24]);\n                    }\n                    var padding = void 0, backgroundFill = void 0, backgroundStroke = void 0;\n                    if (instruction.length > 16) {\n                        padding = /** @type {Array<number>} */ (instruction[15]);\n                        backgroundFill = /** @type {boolean} */ (instruction[16]);\n                        backgroundStroke = /** @type {boolean} */ (instruction[17]);\n                    }\n                    else {\n                        padding = defaultPadding;\n                        backgroundFill = false;\n                        backgroundStroke = false;\n                    }\n                    if (rotateWithView && viewRotationFromTransform) {\n                        // Canvas is expected to be rotated to reverse view rotation.\n                        rotation += viewRotation;\n                    }\n                    else if (!rotateWithView && !viewRotationFromTransform) {\n                        // Canvas is not rotated, images need to be rotated back to be north-up.\n                        rotation -= viewRotation;\n                    }\n                    var widthIndex = 0;\n                    var declutterGroupIndex = 0;\n                    for (; d < dd; d += 2) {\n                        if (geometryWidths && geometryWidths[widthIndex++] < width / this.pixelRatio) {\n                            continue;\n                        }\n                        if (declutterGroups) {\n                            var index = Math.floor(declutterGroupIndex);\n                            if (declutterGroups.length < index + 1) {\n                                declutterGroup = createEmpty();\n                                declutterGroup.push(declutterGroups[0][4]);\n                                declutterGroups.push(declutterGroup);\n                            }\n                            declutterGroup = declutterGroups[index];\n                        }\n                        this.replayImageOrLabel_(context, pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY, declutterGroup, height, opacity, originX, originY, rotation, scale, snapToPixel, width, padding, backgroundFill ? /** @type {Array<*>} */ (lastFillInstruction) : null, backgroundStroke ? /** @type {Array<*>} */ (lastStrokeInstruction) : null);\n                        if (declutterGroup) {\n                            if (declutterGroupIndex === Math.floor(declutterGroupIndex)) {\n                                this.declutterItems.push(this, declutterGroup, feature);\n                            }\n                            declutterGroupIndex += 1 / declutterGroup[4];\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.DRAW_CHARS:\n                    var begin = /** @type {number} */ (instruction[1]);\n                    var end = /** @type {number} */ (instruction[2]);\n                    var baseline = /** @type {number} */ (instruction[3]);\n                    declutterGroup = featureCallback ? null : instruction[4];\n                    var overflow = /** @type {number} */ (instruction[5]);\n                    fillKey = /** @type {string} */ (instruction[6]);\n                    var maxAngle = /** @type {number} */ (instruction[7]);\n                    var measurePixelRatio = /** @type {number} */ (instruction[8]);\n                    var offsetY = /** @type {number} */ (instruction[9]);\n                    strokeKey = /** @type {string} */ (instruction[10]);\n                    var strokeWidth = /** @type {number} */ (instruction[11]);\n                    text = /** @type {string} */ (instruction[12]);\n                    textKey = /** @type {string} */ (instruction[13]);\n                    var pixelRatioScale = /** @type {number} */ (instruction[14]);\n                    var textState = this.textStates[textKey];\n                    var font = textState.font;\n                    var textScale = textState.scale * measurePixelRatio;\n                    var cachedWidths = void 0;\n                    if (font in this.widths_) {\n                        cachedWidths = this.widths_[font];\n                    }\n                    else {\n                        cachedWidths = {};\n                        this.widths_[font] = cachedWidths;\n                    }\n                    var pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n                    var textLength = textScale * measureAndCacheTextWidth(font, text, cachedWidths);\n                    if (overflow || textLength <= pathLength) {\n                        var textAlign = this.textStates[textKey].textAlign;\n                        var startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n                        var parts = drawTextOnPath(pixelCoordinates, begin, end, 2, text, startM, maxAngle, textScale, measureAndCacheTextWidth, font, cachedWidths);\n                        if (parts) {\n                            var c = void 0, cc = void 0, chars = void 0, label = void 0, part = void 0;\n                            if (strokeKey) {\n                                for (c = 0, cc = parts.length; c < cc; ++c) {\n                                    part = parts[c]; // x, y, anchorX, rotation, chunk\n                                    chars = /** @type {string} */ (part[4]);\n                                    label = this.createLabel(chars, textKey, '', strokeKey);\n                                    anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                                    anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                                    this.replayImageOrLabel_(context, \n                                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label, anchorX, anchorY, declutterGroup, label.height, 1, 0, 0, \n                                    /** @type {number} */ (part[3]), pixelRatioScale, false, label.width, defaultPadding, null, null);\n                                }\n                            }\n                            if (fillKey) {\n                                for (c = 0, cc = parts.length; c < cc; ++c) {\n                                    part = parts[c]; // x, y, anchorX, rotation, chunk\n                                    chars = /** @type {string} */ (part[4]);\n                                    label = this.createLabel(chars, textKey, fillKey, '');\n                                    anchorX = /** @type {number} */ (part[2]);\n                                    anchorY = baseline * label.height - offsetY;\n                                    this.replayImageOrLabel_(context, \n                                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label, anchorX, anchorY, declutterGroup, label.height, 1, 0, 0, \n                                    /** @type {number} */ (part[3]), pixelRatioScale, false, label.width, defaultPadding, null, null);\n                                }\n                            }\n                        }\n                    }\n                    this.declutterItems.push(this, declutterGroup, feature);\n                    ++i;\n                    break;\n                case CanvasInstruction.END_GEOMETRY:\n                    if (featureCallback !== undefined) {\n                        feature = /** @type {import(\"../../Feature.js\").FeatureLike} */ (instruction[1]);\n                        var result = featureCallback(feature);\n                        if (result) {\n                            return result;\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.FILL:\n                    if (batchSize) {\n                        pendingFill++;\n                    }\n                    else {\n                        this.fill_(context);\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.MOVE_TO_LINE_TO:\n                    d = /** @type {number} */ (instruction[1]);\n                    dd = /** @type {number} */ (instruction[2]);\n                    x = pixelCoordinates[d];\n                    y = pixelCoordinates[d + 1];\n                    roundX = (x + 0.5) | 0;\n                    roundY = (y + 0.5) | 0;\n                    if (roundX !== prevX || roundY !== prevY) {\n                        context.moveTo(x, y);\n                        prevX = roundX;\n                        prevY = roundY;\n                    }\n                    for (d += 2; d < dd; d += 2) {\n                        x = pixelCoordinates[d];\n                        y = pixelCoordinates[d + 1];\n                        roundX = (x + 0.5) | 0;\n                        roundY = (y + 0.5) | 0;\n                        if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n                            context.lineTo(x, y);\n                            prevX = roundX;\n                            prevY = roundY;\n                        }\n                    }\n                    ++i;\n                    break;\n                case CanvasInstruction.SET_FILL_STYLE:\n                    lastFillInstruction = instruction;\n                    this.alignFill_ = instruction[2];\n                    if (pendingFill) {\n                        this.fill_(context);\n                        pendingFill = 0;\n                        if (pendingStroke) {\n                            context.stroke();\n                            pendingStroke = 0;\n                        }\n                    }\n                    context.fillStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n                    ++i;\n                    break;\n                case CanvasInstruction.SET_STROKE_STYLE:\n                    lastStrokeInstruction = instruction;\n                    if (pendingStroke) {\n                        context.stroke();\n                        pendingStroke = 0;\n                    }\n                    this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n                    ++i;\n                    break;\n                case CanvasInstruction.STROKE:\n                    if (batchSize) {\n                        pendingStroke++;\n                    }\n                    else {\n                        context.stroke();\n                    }\n                    ++i;\n                    break;\n                default:\n                    ++i; // consume the instruction anyway, to avoid an infinite loop\n                    break;\n            }\n        }\n        if (pendingFill) {\n            this.fill_(context);\n        }\n        if (pendingStroke) {\n            context.stroke();\n        }\n        return undefined;\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n     */\n    Executor.prototype.execute = function (context, transform, viewRotation, snapToPixel) {\n        this.viewRotation_ = viewRotation;\n        this.execute_(context, transform, this.instructions, snapToPixel, undefined, undefined);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {function(import(\"../../Feature.js\").FeatureLike): T=} opt_featureCallback\n     *     Feature callback.\n     * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n     *     extent.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    Executor.prototype.executeHitDetection = function (context, transform, viewRotation, opt_featureCallback, opt_hitExtent) {\n        this.viewRotation_ = viewRotation;\n        return this.execute_(context, transform, this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n    };\n    return Executor;\n}());\nexport default Executor;\n//# sourceMappingURL=Executor.js.map","/**\n * @module ol/render/canvas/ExecutorGroup\n */\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { buffer, createEmpty, extendCoordinate } from '../../extent.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport { isEmpty } from '../../obj.js';\nimport BuilderType from './BuilderType.js';\nimport { create as createTransform, compose as composeTransform } from '../../transform.js';\nimport Executor from './Executor.js';\n/**\n * @const\n * @type {Array<BuilderType>}\n */\nvar ORDER = [\n    BuilderType.POLYGON,\n    BuilderType.CIRCLE,\n    BuilderType.LINE_STRING,\n    BuilderType.IMAGE,\n    BuilderType.TEXT,\n    BuilderType.DEFAULT\n];\nvar ExecutorGroup = /** @class */ (function () {\n    /**\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent for clipping. When a\n     * `maxExtent` was set on the Buillder for this executor group, the same `maxExtent`\n     * should be set here, unless the target context does not exceet that extent (which\n     * can be the case when rendering to tiles).\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {boolean} overlaps The executor group can have overlapping geometries.\n     * @param {!Object<string, !Object<BuilderType, import(\"./Builder.js\").SerializableInstructions>>} allInstructions\n     * The serializable instructions.\n     * @param {number=} opt_renderBuffer Optional rendering buffer.\n     */\n    function ExecutorGroup(maxExtent, resolution, pixelRatio, overlaps, allInstructions, opt_renderBuffer) {\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.overlaps_ = overlaps;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.renderBuffer_ = opt_renderBuffer;\n        /**\n         * @private\n         * @type {!Object<string, !Object<BuilderType, import(\"./Executor\").default>>}\n         */\n        this.executorsByZIndex_ = {};\n        /**\n         * @private\n         * @type {CanvasRenderingContext2D}\n         */\n        this.hitDetectionContext_ = null;\n        /**\n         * @private\n         * @type {import(\"../../transform.js\").Transform}\n         */\n        this.hitDetectionTransform_ = createTransform();\n        this.createExecutors_(allInstructions);\n    }\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     */\n    ExecutorGroup.prototype.clip = function (context, transform) {\n        var flatClipCoords = this.getClipCoords(transform);\n        context.beginPath();\n        context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n        context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n        context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n        context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n        context.clip();\n    };\n    /**\n     * Create executors and populate them using the provided instructions.\n     * @private\n     * @param {!Object<string, !Object<BuilderType, import(\"./Builder.js\").SerializableInstructions>>} allInstructions The serializable instructions\n     */\n    ExecutorGroup.prototype.createExecutors_ = function (allInstructions) {\n        for (var zIndex in allInstructions) {\n            var executors = this.executorsByZIndex_[zIndex];\n            if (executors === undefined) {\n                executors = {};\n                this.executorsByZIndex_[zIndex] = executors;\n            }\n            var instructionByZindex = allInstructions[zIndex];\n            for (var builderType in instructionByZindex) {\n                var instructions = instructionByZindex[builderType];\n                executors[builderType] = new Executor(this.resolution_, this.pixelRatio_, this.overlaps_, instructions);\n            }\n        }\n    };\n    /**\n     * @param {Array<BuilderType>} executors Executors.\n     * @return {boolean} Has executors of the provided types.\n     */\n    ExecutorGroup.prototype.hasExecutors = function (executors) {\n        for (var zIndex in this.executorsByZIndex_) {\n            var candidates = this.executorsByZIndex_[zIndex];\n            for (var i = 0, ii = executors.length; i < ii; ++i) {\n                if (executors[i] in candidates) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {number} rotation Rotation.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../../Feature.js\").FeatureLike): T} callback Feature callback.\n     * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n     * @return {T|undefined} Callback result.\n     * @template T\n     */\n    ExecutorGroup.prototype.forEachFeatureAtCoordinate = function (coordinate, resolution, rotation, hitTolerance, callback, declutteredFeatures) {\n        hitTolerance = Math.round(hitTolerance);\n        var contextSize = hitTolerance * 2 + 1;\n        var transform = composeTransform(this.hitDetectionTransform_, hitTolerance + 0.5, hitTolerance + 0.5, 1 / resolution, -1 / resolution, -rotation, -coordinate[0], -coordinate[1]);\n        if (!this.hitDetectionContext_) {\n            this.hitDetectionContext_ = createCanvasContext2D(contextSize, contextSize);\n        }\n        var context = this.hitDetectionContext_;\n        if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n            context.canvas.width = contextSize;\n            context.canvas.height = contextSize;\n        }\n        else {\n            context.clearRect(0, 0, contextSize, contextSize);\n        }\n        /**\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        var hitExtent;\n        if (this.renderBuffer_ !== undefined) {\n            hitExtent = createEmpty();\n            extendCoordinate(hitExtent, coordinate);\n            buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n        }\n        var mask = getCircleArray(hitTolerance);\n        var builderType;\n        /**\n         * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n         * @return {?} Callback result.\n         */\n        function featureCallback(feature) {\n            var imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n            for (var i_1 = 0; i_1 < contextSize; i_1++) {\n                for (var j_1 = 0; j_1 < contextSize; j_1++) {\n                    if (mask[i_1][j_1]) {\n                        if (imageData[(j_1 * contextSize + i_1) * 4 + 3] > 0) {\n                            var result_1 = void 0;\n                            if (!(declutteredFeatures && (builderType == BuilderType.IMAGE || builderType == BuilderType.TEXT)) ||\n                                declutteredFeatures.indexOf(feature) !== -1) {\n                                result_1 = callback(feature);\n                            }\n                            if (result_1) {\n                                return result_1;\n                            }\n                            else {\n                                context.clearRect(0, 0, contextSize, contextSize);\n                                return undefined;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        /** @type {Array<number>} */\n        var zs = Object.keys(this.executorsByZIndex_).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        var i, j, executors, executor, result;\n        for (i = zs.length - 1; i >= 0; --i) {\n            var zIndexKey = zs[i].toString();\n            executors = this.executorsByZIndex_[zIndexKey];\n            for (j = ORDER.length - 1; j >= 0; --j) {\n                builderType = ORDER[j];\n                executor = executors[builderType];\n                if (executor !== undefined) {\n                    result = executor.executeHitDetection(context, transform, rotation, featureCallback, hitExtent);\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return undefined;\n    };\n    /**\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @return {Array<number>} Clip coordinates.\n     */\n    ExecutorGroup.prototype.getClipCoords = function (transform) {\n        var maxExtent = this.maxExtent_;\n        if (!maxExtent) {\n            return null;\n        }\n        var minX = maxExtent[0];\n        var minY = maxExtent[1];\n        var maxX = maxExtent[2];\n        var maxY = maxExtent[3];\n        var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n        transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n        return flatClipCoords;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    ExecutorGroup.prototype.isEmpty = function () {\n        return isEmpty(this.executorsByZIndex_);\n    };\n    /**\n     * @param {CanvasRenderingContext2D} context Context.\n     * @param {import(\"../../transform.js\").Transform} transform Transform.\n     * @param {number} viewRotation View rotation.\n     * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n     * @param {Array<BuilderType>=} opt_builderTypes Ordered replay types to replay.\n     *     Default is {@link module:ol/render/replay~ORDER}\n     * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>=} opt_declutterReplays Declutter replays.\n     */\n    ExecutorGroup.prototype.execute = function (context, transform, viewRotation, snapToPixel, opt_builderTypes, opt_declutterReplays) {\n        /** @type {Array<number>} */\n        var zs = Object.keys(this.executorsByZIndex_).map(Number);\n        zs.sort(numberSafeCompareFunction);\n        // setup clipping so that the parts of over-simplified geometries are not\n        // visible outside the current extent when panning\n        if (this.maxExtent_) {\n            context.save();\n            this.clip(context, transform);\n        }\n        var builderTypes = opt_builderTypes ? opt_builderTypes : ORDER;\n        var i, ii, j, jj, replays, replay;\n        for (i = 0, ii = zs.length; i < ii; ++i) {\n            var zIndexKey = zs[i].toString();\n            replays = this.executorsByZIndex_[zIndexKey];\n            for (j = 0, jj = builderTypes.length; j < jj; ++j) {\n                var builderType = builderTypes[j];\n                replay = replays[builderType];\n                if (replay !== undefined) {\n                    if (opt_declutterReplays &&\n                        (builderType == BuilderType.IMAGE || builderType == BuilderType.TEXT)) {\n                        var declutter = opt_declutterReplays[zIndexKey];\n                        if (!declutter) {\n                            opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n                        }\n                        else {\n                            declutter.push(replay, transform.slice(0));\n                        }\n                    }\n                    else {\n                        replay.execute(context, transform, viewRotation, snapToPixel);\n                    }\n                }\n            }\n        }\n        if (this.maxExtent_) {\n            context.restore();\n        }\n    };\n    return ExecutorGroup;\n}());\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<Array<(boolean|undefined)>>>}\n */\nvar circleArrayCache = {\n    0: [[true]]\n};\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array<Array<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n    var i;\n    var radius = Math.floor(array.length / 2);\n    if (x >= radius) {\n        for (i = radius; i < x; i++) {\n            array[i][y] = true;\n        }\n    }\n    else if (x < radius) {\n        for (i = x + 1; i < radius; i++) {\n            array[i][y] = true;\n        }\n    }\n}\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array<Array<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n    if (circleArrayCache[radius] !== undefined) {\n        return circleArrayCache[radius];\n    }\n    var arraySize = radius * 2 + 1;\n    var arr = new Array(arraySize);\n    for (var i = 0; i < arraySize; i++) {\n        arr[i] = new Array(arraySize);\n    }\n    var x = radius;\n    var y = 0;\n    var error = 0;\n    while (x >= y) {\n        fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n        fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n        fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n        fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n        fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n        fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n        fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n        fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n        y++;\n        error += 1 + 2 * y;\n        if (2 * (error - x) + 1 > 0) {\n            x -= 1;\n            error += 1 - 2 * x;\n        }\n    }\n    circleArrayCache[radius] = arr;\n    return arr;\n}\n/**\n * @param {!Object<string, Array<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} opacity Opacity.\n * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n * @param {Array<import(\"../../PluggableMap.js\").DeclutterItems>} declutterItems Declutter items.\n */\nexport function replayDeclutter(declutterReplays, context, rotation, opacity, snapToPixel, declutterItems) {\n    var zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n    for (var z = 0, zz = zs.length; z < zz; ++z) {\n        var executorData = declutterReplays[zs[z].toString()];\n        var currentExecutor = void 0;\n        for (var i = 0, ii = executorData.length; i < ii;) {\n            var executor = executorData[i++];\n            if (executor !== currentExecutor) {\n                currentExecutor = executor;\n                declutterItems.push({\n                    items: executor.declutterItems,\n                    opacity: opacity\n                });\n            }\n            var transform = executorData[i++];\n            executor.execute(context, transform, rotation, snapToPixel);\n        }\n    }\n}\nexport default ExecutorGroup;\n//# sourceMappingURL=ExecutorGroup.js.map","/**\n * @module ol/render/canvas/hitdetet\n */\nimport CanvasImmediateRenderer from './Immediate.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { Icon } from '../../style.js';\nimport IconAnchorUnits from '../../style/IconAnchorUnits.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport { intersects } from '../../extent.js';\nimport { numberSafeCompareFunction } from '../../array.js';\n/**\n * @param {import(\"../../size.js\").Size} size Canvas size in css pixels.\n * @param {Array<import(\"../../transform.js\").Transform>} transforms Transforms\n * for rendering features to all worlds of the viewport, from coordinates to css\n * pixels.\n * @param {Array<import(\"../../Feature.js\").FeatureLike>} features\n * Features to consider for hit detection.\n * @param {import(\"../../style/Style.js\").StyleFunction|undefined} styleFunction\n * Layer style function.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {ImageData} Hit detection image data.\n */\nexport function createHitDetectionImageData(size, transforms, features, styleFunction, extent, resolution, rotation) {\n    var width = size[0] / 2;\n    var height = size[1] / 2;\n    var context = createCanvasContext2D(width, height);\n    context.imageSmoothingEnabled = false;\n    var canvas = context.canvas;\n    var renderer = new CanvasImmediateRenderer(context, 0.5, extent, null, rotation);\n    var featureCount = features.length;\n    // Stretch hit detection index to use the whole available color range\n    var indexFactor = Math.floor((256 * 256 * 256 - 1) / featureCount);\n    var featuresByZIndex = {};\n    for (var i = 1; i <= featureCount; ++i) {\n        var feature = features[i - 1];\n        var featureStyleFunction = feature.getStyleFunction() || styleFunction;\n        if (!styleFunction) {\n            continue;\n        }\n        var styles = featureStyleFunction(feature, resolution);\n        if (!styles) {\n            continue;\n        }\n        if (!Array.isArray(styles)) {\n            styles = [styles];\n        }\n        var index = i * indexFactor;\n        var color = '#' + ('000000' + index.toString(16)).slice(-6);\n        for (var j = 0, jj = styles.length; j < jj; ++j) {\n            var originalStyle = styles[j];\n            var style = originalStyle.clone();\n            var fill = style.getFill();\n            if (fill) {\n                fill.setColor(color);\n            }\n            var stroke = style.getStroke();\n            if (stroke) {\n                stroke.setColor(color);\n            }\n            style.setText(undefined);\n            var image = originalStyle.getImage();\n            if (image) {\n                var imgSize = image.getImageSize();\n                if (!imgSize) {\n                    continue;\n                }\n                var canvas_1 = document.createElement('canvas');\n                canvas_1.width = imgSize[0];\n                canvas_1.height = imgSize[1];\n                var imgContext = canvas_1.getContext('2d', { alpha: false });\n                imgContext.fillStyle = color;\n                var img = imgContext.canvas;\n                imgContext.fillRect(0, 0, img.width, img.height);\n                var width_1 = imgSize ? imgSize[0] : img.width;\n                var height_1 = imgSize ? imgSize[1] : img.height;\n                var iconContext = createCanvasContext2D(width_1, height_1);\n                iconContext.drawImage(img, 0, 0);\n                style.setImage(new Icon({\n                    img: img,\n                    imgSize: imgSize,\n                    anchor: image.getAnchor(),\n                    anchorXUnits: IconAnchorUnits.PIXELS,\n                    anchorYUnits: IconAnchorUnits.PIXELS,\n                    offset: image.getOrigin(),\n                    size: image.getSize(),\n                    opacity: image.getOpacity(),\n                    scale: image.getScale(),\n                    rotation: image.getRotation(),\n                    rotateWithView: image.getRotateWithView()\n                }));\n            }\n            var zIndex = Number(style.getZIndex());\n            var byGeometryType = featuresByZIndex[zIndex];\n            if (!byGeometryType) {\n                byGeometryType = {};\n                featuresByZIndex[zIndex] = byGeometryType;\n                byGeometryType[GeometryType.POLYGON] = [];\n                byGeometryType[GeometryType.CIRCLE] = [];\n                byGeometryType[GeometryType.LINE_STRING] = [];\n                byGeometryType[GeometryType.POINT] = [];\n            }\n            var geometry = style.getGeometryFunction()(feature);\n            if (geometry && intersects(extent, geometry.getExtent())) {\n                byGeometryType[geometry.getType().replace('Multi', '')].push(geometry, style);\n            }\n        }\n    }\n    var zIndexKeys = Object.keys(featuresByZIndex).map(Number).sort(numberSafeCompareFunction);\n    for (var i = 0, ii = zIndexKeys.length; i < ii; ++i) {\n        var byGeometryType = featuresByZIndex[zIndexKeys[i]];\n        for (var type in byGeometryType) {\n            var geomAndStyle = byGeometryType[type];\n            for (var j = 0, jj = geomAndStyle.length; j < jj; j += 2) {\n                renderer.setStyle(geomAndStyle[j + 1]);\n                for (var k = 0, kk = transforms.length; k < kk; ++k) {\n                    renderer.setTransform(transforms[k]);\n                    renderer.drawGeometry(geomAndStyle[j]);\n                }\n            }\n        }\n    }\n    document.body.appendChild(context.canvas);\n    return context.getImageData(0, 0, canvas.width, canvas.height);\n}\n/**\n * @param {import(\"../../pixel\").Pixel} pixel Pixel coordinate on the hit\n * detection canvas in css pixels.\n * @param {Array<import(\"../../Feature\").FeatureLike>} features Features. Has to\n * match the `features` array that was passed to `createHitDetectionImageData()`.\n * @param {ImageData} imageData Hit detection image data generated by\n * `createHitDetectionImageData()`.\n * @return {Array<import(\"../../Feature\").FeatureLike>} features Features.\n */\nexport function hitDetect(pixel, features, imageData) {\n    var resultFeatures = [];\n    if (imageData) {\n        var index = (Math.round(pixel[0] / 2) + Math.round(pixel[1] / 2) * imageData.width) * 4;\n        var r = imageData.data[index];\n        var g = imageData.data[index + 1];\n        var b = imageData.data[index + 2];\n        var i = b + (256 * (g + (256 * r)));\n        var indexFactor = Math.floor((256 * 256 * 256 - 1) / features.length);\n        if (i && i % indexFactor === 0) {\n            resultFeatures.push(features[i / indexFactor - 1]);\n        }\n    }\n    return resultFeatures;\n}\n//# sourceMappingURL=hitdetect.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport { getUid } from '../../util.js';\nimport ViewHint from '../../ViewHint.js';\nimport { buffer, createEmpty, containsExtent, getWidth, intersects as intersectsExtent, wrapX as wrapExtentX } from '../../extent.js';\nimport { wrapX as wrapCoordinateX } from '../../coordinate.js';\nimport { fromUserExtent, toUserExtent, getUserProjection, getTransformFromProjections } from '../../proj.js';\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport ExecutorGroup, { replayDeclutter } from '../../render/canvas/ExecutorGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport { defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature } from '../vector.js';\nimport { toString as transformToString, makeScale, makeInverse, apply } from '../../transform.js';\nimport { createHitDetectionImageData, hitDetect } from '../../render/canvas/hitdetect.js';\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nvar CanvasVectorLayerRenderer = /** @class */ (function (_super) {\n    __extends(CanvasVectorLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Vector.js\").default} vectorLayer Vector layer.\n     */\n    function CanvasVectorLayerRenderer(vectorLayer) {\n        var _this = _super.call(this, vectorLayer) || this;\n        /** @private */\n        _this.boundHandleStyleImageChange_ = _this.handleStyleImageChange_.bind(_this);\n        /**\n         * @type {boolean}\n         */\n        _this.animatingOrInteracting_;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.dirty_ = false;\n        /**\n         * @type {ImageData}\n         */\n        _this.hitDetectionImageData_ = null;\n        /**\n         * @type {Array<import(\"../../Feature.js\").default>}\n         */\n        _this.renderedFeatures_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedResolution_ = NaN;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        _this.renderedExtent_ = createEmpty();\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.renderedRotation_;\n        /**\n         * @private\n         * @type {import(\"../../coordinate\").Coordinate}\n         */\n        _this.renderedCenter_ = null;\n        /**\n         * @private\n         * @type {import(\"../../proj/Projection\").default}\n         */\n        _this.renderedProjection_ = null;\n        /**\n         * @private\n         * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n         */\n        _this.renderedRenderOrder_ = null;\n        /**\n         * @private\n         * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n         */\n        _this.replayGroup_ = null;\n        /**\n         * A new replay group had to be created by `prepareFrame()`\n         * @type {boolean}\n         */\n        _this.replayGroupChanged = true;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.useContainer = function (target, transform, opacity) {\n        if (opacity < 1) {\n            target = null;\n        }\n        _super.prototype.useContainer.call(this, target, transform, opacity);\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.renderFrame = function (frameState, target) {\n        var pixelRatio = frameState.pixelRatio;\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        // set forward and inverse pixel transforms\n        makeScale(this.pixelTransform, 1 / pixelRatio, 1 / pixelRatio);\n        makeInverse(this.inversePixelTransform, this.pixelTransform);\n        var canvasTransform = transformToString(this.pixelTransform);\n        this.useContainer(target, canvasTransform, layerState.opacity);\n        var context = this.context;\n        var canvas = context.canvas;\n        var replayGroup = this.replayGroup_;\n        if (!replayGroup || replayGroup.isEmpty()) {\n            if (!this.containerReused && canvas.width > 0) {\n                canvas.width = 0;\n            }\n            return this.container;\n        }\n        // resize and clear\n        var width = Math.round(frameState.size[0] * pixelRatio);\n        var height = Math.round(frameState.size[1] * pixelRatio);\n        if (canvas.width != width || canvas.height != height) {\n            canvas.width = width;\n            canvas.height = height;\n            if (canvas.style.transform !== canvasTransform) {\n                canvas.style.transform = canvasTransform;\n            }\n        }\n        else if (!this.containerReused) {\n            context.clearRect(0, 0, width, height);\n        }\n        this.preRender(context, frameState);\n        var extent = frameState.extent;\n        var viewState = frameState.viewState;\n        var center = viewState.center;\n        var resolution = viewState.resolution;\n        var projection = viewState.projection;\n        var rotation = viewState.rotation;\n        var projectionExtent = projection.getExtent();\n        var vectorSource = this.getLayer().getSource();\n        // clipped rendering if layer extent is set\n        var clipped = false;\n        if (layerState.extent) {\n            var layerExtent = fromUserExtent(layerState.extent, projection);\n            clipped = !containsExtent(layerExtent, frameState.extent) && intersectsExtent(layerExtent, frameState.extent);\n            if (clipped) {\n                this.clip(context, frameState, layerExtent);\n            }\n        }\n        var viewHints = frameState.viewHints;\n        var snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n        var transform = this.getRenderTransform(center, resolution, rotation, pixelRatio, width, height, 0);\n        var declutterReplays = this.getLayer().getDeclutter() ? {} : null;\n        replayGroup.execute(context, transform, rotation, snapToPixel, undefined, declutterReplays);\n        if (vectorSource.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, extent)) {\n            var startX = extent[0];\n            var worldWidth = getWidth(projectionExtent);\n            var world = 0;\n            var offsetX = void 0;\n            while (startX < projectionExtent[0]) {\n                --world;\n                offsetX = worldWidth * world;\n                var transform_1 = this.getRenderTransform(center, resolution, rotation, pixelRatio, width, height, offsetX);\n                replayGroup.execute(context, transform_1, rotation, snapToPixel, undefined, declutterReplays);\n                startX += worldWidth;\n            }\n            world = 0;\n            startX = extent[2];\n            while (startX > projectionExtent[2]) {\n                ++world;\n                offsetX = worldWidth * world;\n                var transform_2 = this.getRenderTransform(center, resolution, rotation, pixelRatio, width, height, offsetX);\n                replayGroup.execute(context, transform_2, rotation, snapToPixel, undefined, declutterReplays);\n                startX -= worldWidth;\n            }\n        }\n        if (declutterReplays) {\n            var viewHints_1 = frameState.viewHints;\n            var hifi = !(viewHints_1[ViewHint.ANIMATING] || viewHints_1[ViewHint.INTERACTING]);\n            replayDeclutter(declutterReplays, context, rotation, 1, hifi, frameState.declutterItems);\n        }\n        if (clipped) {\n            context.restore();\n        }\n        this.postRender(context, frameState);\n        var opacity = layerState.opacity;\n        var container = this.container;\n        if (opacity !== parseFloat(container.style.opacity)) {\n            container.style.opacity = opacity === 1 ? '' : opacity;\n        }\n        return this.container;\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.getFeatures = function (pixel) {\n        return new Promise(function (resolve, reject) {\n            if (!this.hitDetectionImageData_ && !this.animatingOrInteracting_) {\n                var size = [this.context.canvas.width, this.context.canvas.height];\n                apply(this.pixelTransform, size);\n                var center = this.renderedCenter_;\n                var resolution = this.renderedResolution_;\n                var rotation = this.renderedRotation_;\n                var projection = this.renderedProjection_;\n                var extent = this.renderedExtent_;\n                var layer = this.getLayer();\n                var transforms = [];\n                var width = size[0] / 2;\n                var height = size[1] / 2;\n                transforms.push(this.getRenderTransform(center, resolution, rotation, 0.5, width, height, 0).slice());\n                var source = layer.getSource();\n                var projectionExtent = projection.getExtent();\n                if (source.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, extent)) {\n                    var startX = extent[0];\n                    var worldWidth = getWidth(projectionExtent);\n                    var world = 0;\n                    var offsetX = void 0;\n                    while (startX < projectionExtent[0]) {\n                        --world;\n                        offsetX = worldWidth * world;\n                        transforms.push(this.getRenderTransform(center, resolution, rotation, 0.5, width, height, offsetX).slice());\n                        startX += worldWidth;\n                    }\n                    world = 0;\n                    startX = extent[2];\n                    while (startX > projectionExtent[2]) {\n                        ++world;\n                        offsetX = worldWidth * world;\n                        transforms.push(this.getRenderTransform(center, resolution, rotation, 0.5, width, height, offsetX).slice());\n                        startX -= worldWidth;\n                    }\n                }\n                this.hitDetectionImageData_ = createHitDetectionImageData(size, transforms, this.renderedFeatures_, layer.getStyleFunction(), extent, resolution, rotation);\n            }\n            resolve(hitDetect(pixel, this.renderedFeatures_, this.hitDetectionImageData_));\n        }.bind(this));\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n        if (!this.replayGroup_) {\n            return undefined;\n        }\n        else {\n            var resolution = frameState.viewState.resolution;\n            var rotation = frameState.viewState.rotation;\n            var layer_1 = this.getLayer();\n            /** @type {!Object<string, boolean>} */\n            var features_1 = {};\n            var result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, \n            /**\n             * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n             * @return {?} Callback result.\n             */\n            function (feature) {\n                var key = getUid(feature);\n                if (!(key in features_1)) {\n                    features_1[key] = true;\n                    return callback(feature, layer_1);\n                }\n            }, layer_1.getDeclutter() ? declutteredFeatures : null);\n            return result;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.handleFontsChanged = function () {\n        var layer = this.getLayer();\n        if (layer.getVisible() && this.replayGroup_) {\n            layer.changed();\n        }\n    };\n    /**\n     * Handle changes in image style state.\n     * @param {import(\"../../events/Event.js\").default} event Image style change event.\n     * @private\n     */\n    CanvasVectorLayerRenderer.prototype.handleStyleImageChange_ = function (event) {\n        this.renderIfReadyAndVisible();\n    };\n    /**\n     * @inheritDoc\n     */\n    CanvasVectorLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var vectorLayer = this.getLayer();\n        var vectorSource = vectorLayer.getSource();\n        if (!vectorSource) {\n            return false;\n        }\n        var animating = frameState.viewHints[ViewHint.ANIMATING];\n        var interacting = frameState.viewHints[ViewHint.INTERACTING];\n        var updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n        var updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n        if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n            (!updateWhileInteracting && interacting)) {\n            this.animatingOrInteracting_ = true;\n            return true;\n        }\n        this.animatingOrInteracting_ = false;\n        var frameStateExtent = frameState.extent;\n        var viewState = frameState.viewState;\n        var projection = viewState.projection;\n        var resolution = viewState.resolution;\n        var pixelRatio = frameState.pixelRatio;\n        var vectorLayerRevision = vectorLayer.getRevision();\n        var vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n        var vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n        if (vectorLayerRenderOrder === undefined) {\n            vectorLayerRenderOrder = defaultRenderOrder;\n        }\n        var center = viewState.center.slice();\n        var extent = buffer(frameStateExtent, vectorLayerRenderBuffer * resolution);\n        var loadExtents = [extent.slice()];\n        var projectionExtent = projection.getExtent();\n        if (vectorSource.getWrapX() && projection.canWrapX() &&\n            !containsExtent(projectionExtent, frameState.extent)) {\n            // For the replay group, we need an extent that intersects the real world\n            // (-180° to +180°). To support geometries in a coordinate range from -540°\n            // to +540°, we add at least 1 world width on each side of the projection\n            // extent. If the viewport is wider than the world, we need to add half of\n            // the viewport width to make sure we cover the whole viewport.\n            var worldWidth = getWidth(projectionExtent);\n            var gutter = Math.max(getWidth(extent) / 2, worldWidth);\n            extent[0] = projectionExtent[0] - gutter;\n            extent[2] = projectionExtent[2] + gutter;\n            wrapCoordinateX(center, projection);\n            var loadExtent = wrapExtentX(loadExtents[0], projection);\n            // If the extent crosses the date line, we load data for both edges of the worlds\n            if (loadExtent[0] < projectionExtent[0] && loadExtent[2] < projectionExtent[2]) {\n                loadExtents.push([loadExtent[0] + worldWidth, loadExtent[1], loadExtent[2] + worldWidth, loadExtent[3]]);\n            }\n            else if (loadExtent[0] > projectionExtent[0] && loadExtent[2] > projectionExtent[2]) {\n                loadExtents.push([loadExtent[0] - worldWidth, loadExtent[1], loadExtent[2] - worldWidth, loadExtent[3]]);\n            }\n        }\n        if (!this.dirty_ &&\n            this.renderedResolution_ == resolution &&\n            this.renderedRevision_ == vectorLayerRevision &&\n            this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n            containsExtent(this.renderedExtent_, extent)) {\n            this.replayGroupChanged = false;\n            return true;\n        }\n        this.replayGroup_ = null;\n        this.dirty_ = false;\n        var replayGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio, vectorLayer.getDeclutter());\n        var userProjection = getUserProjection();\n        var userTransform;\n        if (userProjection) {\n            for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n                vectorSource.loadFeatures(toUserExtent(loadExtents[i], projection), resolution, userProjection);\n            }\n            userTransform = getTransformFromProjections(userProjection, projection);\n        }\n        else {\n            for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n                vectorSource.loadFeatures(loadExtents[i], resolution, projection);\n            }\n        }\n        var squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n        /**\n         * @param {import(\"../../Feature.js\").default} feature Feature.\n         * @this {CanvasVectorLayerRenderer}\n         */\n        var render = function (feature) {\n            var styles;\n            var styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n            if (styleFunction) {\n                styles = styleFunction(feature, resolution);\n            }\n            if (styles) {\n                var dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup, userTransform);\n                this.dirty_ = this.dirty_ || dirty;\n            }\n        }.bind(this);\n        var userExtent = toUserExtent(extent, projection);\n        /** @type {Array<import(\"../../Feature.js\").default>} */\n        var features = vectorSource.getFeaturesInExtent(userExtent);\n        if (vectorLayerRenderOrder) {\n            features.sort(vectorLayerRenderOrder);\n        }\n        for (var i = 0, ii = features.length; i < ii; ++i) {\n            render(features[i]);\n        }\n        this.renderedFeatures_ = features;\n        var replayGroupInstructions = replayGroup.finish();\n        var executorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), replayGroupInstructions, vectorLayer.getRenderBuffer());\n        this.renderedResolution_ = resolution;\n        this.renderedRevision_ = vectorLayerRevision;\n        this.renderedRenderOrder_ = vectorLayerRenderOrder;\n        this.renderedExtent_ = extent;\n        this.renderedRotation_ = viewState.rotation;\n        this.renderedCenter_ = center;\n        this.renderedProjection_ = projection;\n        this.replayGroup_ = executorGroup;\n        this.hitDetectionImageData_ = null;\n        this.replayGroupChanged = true;\n        return true;\n    };\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @param {number} squaredTolerance Squared render tolerance.\n     * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n     * @param {import(\"../../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n     * @param {import(\"../../proj.js\").TransformFunction=} opt_transform Transform from user to view projection.\n     * @return {boolean} `true` if an image is loading.\n     */\n    CanvasVectorLayerRenderer.prototype.renderFeature = function (feature, squaredTolerance, styles, builderGroup, opt_transform) {\n        if (!styles) {\n            return false;\n        }\n        var loading = false;\n        if (Array.isArray(styles)) {\n            for (var i = 0, ii = styles.length; i < ii; ++i) {\n                loading = renderFeature(builderGroup, feature, styles[i], squaredTolerance, this.boundHandleStyleImageChange_, opt_transform) || loading;\n            }\n        }\n        else {\n            loading = renderFeature(builderGroup, feature, styles, squaredTolerance, this.boundHandleStyleImageChange_, opt_transform);\n        }\n        return loading;\n    };\n    return CanvasVectorLayerRenderer;\n}(CanvasLayerRenderer));\nexport default CanvasVectorLayerRenderer;\n//# sourceMappingURL=VectorLayer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Vector\n */\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends {BaseVectorLayer<import(\"../source/Vector.js\").default>}\n * @api\n */\nvar VectorLayer = /** @class */ (function (_super) {\n    __extends(VectorLayer, _super);\n    /**\n     * @param {import(\"./BaseVector.js\").Options=} opt_options Options.\n     */\n    function VectorLayer(opt_options) {\n        return _super.call(this, opt_options) || this;\n    }\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    VectorLayer.prototype.createRenderer = function () {\n        return new CanvasVectorLayerRenderer(this);\n    };\n    return VectorLayer;\n}(BaseVectorLayer));\nexport default VectorLayer;\n//# sourceMappingURL=Vector.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Feature\n */\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\nimport EventType from './events/EventType.js';\nimport BaseObject, { getChangeEventType } from './Object.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} Geometry\n */\nvar Feature = /** @class */ (function (_super) {\n    __extends(Feature, _super);\n    /**\n     * @param {Geometry|Object<string, *>=} opt_geometryOrProperties\n     *     You may pass a Geometry object directly, or an object literal containing\n     *     properties. If you pass an object literal, you may include a Geometry\n     *     associated with a `geometry` key.\n     */\n    function Feature(opt_geometryOrProperties) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number|string|undefined}\n         */\n        _this.id_ = undefined;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.geometryName_ = 'geometry';\n        /**\n         * User provided style.\n         * @private\n         * @type {import(\"./style/Style.js\").StyleLike}\n         */\n        _this.style_ = null;\n        /**\n         * @private\n         * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n         */\n        _this.styleFunction_ = undefined;\n        /**\n         * @private\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.geometryChangeKey_ = null;\n        _this.addEventListener(getChangeEventType(_this.geometryName_), _this.handleGeometryChanged_);\n        if (opt_geometryOrProperties) {\n            if (typeof /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry === 'function') {\n                var geometry = /** @type {Geometry} */ (opt_geometryOrProperties);\n                _this.setGeometry(geometry);\n            }\n            else {\n                /** @type {Object<string, *>} */\n                var properties = opt_geometryOrProperties;\n                _this.setProperties(properties);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Clone this feature. If the original feature has a geometry it\n     * is also cloned. The feature id is not set in the clone.\n     * @return {Feature} The clone.\n     * @api\n     */\n    Feature.prototype.clone = function () {\n        var clone = new Feature(this.getProperties());\n        clone.setGeometryName(this.getGeometryName());\n        var geometry = this.getGeometry();\n        if (geometry) {\n            clone.setGeometry(geometry.clone());\n        }\n        var style = this.getStyle();\n        if (style) {\n            clone.setStyle(style);\n        }\n        return clone;\n    };\n    /**\n     * Get the feature's default geometry.  A feature may have any number of named\n     * geometries.  The \"default\" geometry (the one that is rendered by default) is\n     * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n     * @return {Geometry|undefined} The default geometry for the feature.\n     * @api\n     * @observable\n     */\n    Feature.prototype.getGeometry = function () {\n        return (\n        /** @type {Geometry|undefined} */ (this.get(this.geometryName_)));\n    };\n    /**\n     * Get the feature identifier.  This is a stable identifier for the feature and\n     * is either set when reading data from a remote source or set explicitly by\n     * calling {@link module:ol/Feature~Feature#setId}.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Feature.prototype.getId = function () {\n        return this.id_;\n    };\n    /**\n     * Get the name of the feature's default geometry.  By default, the default\n     * geometry is named `geometry`.\n     * @return {string} Get the property name associated with the default geometry\n     *     for this feature.\n     * @api\n     */\n    Feature.prototype.getGeometryName = function () {\n        return this.geometryName_;\n    };\n    /**\n     * Get the feature's style. Will return what was provided to the\n     * {@link module:ol/Feature~Feature#setStyle} method.\n     * @return {import(\"./style/Style.js\").StyleLike} The feature style.\n     * @api\n     */\n    Feature.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the feature's style function.\n     * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n     * representing the current style of this feature.\n     * @api\n     */\n    Feature.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Feature.prototype.handleGeometryChanged_ = function () {\n        if (this.geometryChangeKey_) {\n            unlistenByKey(this.geometryChangeKey_);\n            this.geometryChangeKey_ = null;\n        }\n        var geometry = this.getGeometry();\n        if (geometry) {\n            this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * Set the default geometry for the feature.  This will update the property\n     * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n     * @param {Geometry|undefined} geometry The new geometry.\n     * @api\n     * @observable\n     */\n    Feature.prototype.setGeometry = function (geometry) {\n        this.set(this.geometryName_, geometry);\n    };\n    /**\n     * Set the style for the feature.  This can be a single style object, an array\n     * of styles, or a function that takes a resolution and returns an array of\n     * styles. If it is `null` the feature has no style (a `null` style).\n     * @param {import(\"./style/Style.js\").StyleLike} style Style for this feature.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setStyle = function (style) {\n        this.style_ = style;\n        this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n        this.changed();\n    };\n    /**\n     * Set the feature id.  The feature id is considered stable and may be used when\n     * requesting features or comparing identifiers returned from a remote source.\n     * The feature id can be used with the\n     * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n     * @param {number|string|undefined} id The feature id.\n     * @api\n     * @fires module:ol/events/Event~BaseEvent#event:change\n     */\n    Feature.prototype.setId = function (id) {\n        this.id_ = id;\n        this.changed();\n    };\n    /**\n     * Set the property name to be used when getting the feature's default geometry.\n     * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n     * this name will be returned.\n     * @param {string} name The property name of the default geometry.\n     * @api\n     */\n    Feature.prototype.setGeometryName = function (name) {\n        this.removeEventListener(getChangeEventType(this.geometryName_), this.handleGeometryChanged_);\n        this.geometryName_ = name;\n        this.addEventListener(getChangeEventType(this.geometryName_), this.handleGeometryChanged_);\n        this.handleGeometryChanged_();\n    };\n    return Feature;\n}(BaseObject));\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n    if (typeof obj === 'function') {\n        return obj;\n    }\n    else {\n        /**\n         * @type {Array<import(\"./style/Style.js\").default>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof /** @type {?} */ (obj).getZIndex === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n            var style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n            styles_1 = [style];\n        }\n        return function () {\n            return styles_1;\n        };\n    }\n}\nexport default Feature;\n//# sourceMappingURL=Feature.js.map","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./map-demo.vue?vue&type=style&index=0&id=5a998970&scoped=true&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./map-demo.vue?vue&type=style&index=0&id=5a998970&scoped=true&lang=less&\"","/**\n * @module ol/format/FormatType\n */\n/**\n * @enum {string}\n */\nexport default {\n    ARRAY_BUFFER: 'arraybuffer',\n    JSON: 'json',\n    TEXT: 'text',\n    XML: 'xml'\n};\n//# sourceMappingURL=FormatType.js.map","/**\n * @module ol/featureloader\n */\nimport { VOID } from './functions.js';\nimport FormatType from './format/FormatType.js';\n/**\n *\n * @type {boolean}\n * @private\n */\nvar withCredentials = false;\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area to be loaded,\n * a `{number}` representing the resolution (map units per pixel) and an\n * {@link module:ol/proj/Projection} for the projection  as\n * arguments. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default), import(\"./extent.js\").Extent, number,\n *                    import(\"./proj/Projection.js\").default): void} FeatureLoader\n * @api\n */\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {function(this:import(\"./VectorTile.js\").default, Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default, import(\"./extent.js\").Extent): void|function(this:import(\"./source/Vector\").default, Array<import(\"./Feature.js\").default>): void} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:import(\"./VectorTile.js\").default): void|function(this:import(\"./source/Vector\").default): void} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {FeatureLoader} The feature loader.\n */\nexport function loadFeaturesXhr(url, format, success, failure) {\n    return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function (extent, resolution, projection) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url, true);\n        if (format.getType() == FormatType.ARRAY_BUFFER) {\n            xhr.responseType = 'arraybuffer';\n        }\n        xhr.withCredentials = withCredentials;\n        /**\n         * @param {Event} event Event.\n         * @private\n         */\n        xhr.onload = function (event) {\n            // status will be 0 for file:// urls\n            if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n                var type = format.getType();\n                /** @type {Document|Node|Object|string|undefined} */\n                var source = void 0;\n                if (type == FormatType.JSON || type == FormatType.TEXT) {\n                    source = xhr.responseText;\n                }\n                else if (type == FormatType.XML) {\n                    source = xhr.responseXML;\n                    if (!source) {\n                        source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n                    }\n                }\n                else if (type == FormatType.ARRAY_BUFFER) {\n                    source = /** @type {ArrayBuffer} */ (xhr.response);\n                }\n                if (source) {\n                    success.call(this, format.readFeatures(source, {\n                        extent: extent,\n                        featureProjection: projection\n                    }), format.readProjection(source));\n                }\n                else {\n                    failure.call(this);\n                }\n            }\n            else {\n                failure.call(this);\n            }\n        }.bind(this);\n        /**\n         * @private\n         */\n        xhr.onerror = function () {\n            failure.call(this);\n        }.bind(this);\n        xhr.send();\n    });\n}\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n    return loadFeaturesXhr(url, format, \n    /**\n     * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n     * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n     * projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function (features, dataProjection) {\n        var sourceOrTile = /** @type {?} */ (this);\n        if (typeof sourceOrTile.addFeatures === 'function') {\n            /** @type {import(\"./source/Vector\").default} */ (sourceOrTile).addFeatures(features);\n        }\n    }, /* FIXME handle error */ VOID);\n}\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\nexport function setWithCredentials(xhrWithCredentials) {\n    withCredentials = xhrWithCredentials;\n}\n//# sourceMappingURL=featureloader.js.map","/**\n * @module ol/loadingstrategy\n */\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n    return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n    return [extent];\n}\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n    return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution) {\n        var z = tileGrid.getZForResolution(resolution);\n        var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n        /** @type {Array<import(\"./extent.js\").Extent>} */\n        var extents = [];\n        /** @type {import(\"./tilecoord.js\").TileCoord} */\n        var tileCoord = [z, 0, 0];\n        for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n            for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n                extents.push(tileGrid.getTileCoordExtent(tileCoord));\n            }\n        }\n        return extents;\n    });\n}\n//# sourceMappingURL=loadingstrategy.js.map","/**\n * @module ol/source/VectorEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a feature is added to the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n     * @api\n     */\n    ADDFEATURE: 'addfeature',\n    /**\n     * Triggered when a feature is updated.\n     * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n     * @api\n     */\n    CHANGEFEATURE: 'changefeature',\n    /**\n     * Triggered when the clear method is called on the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#clear\n     * @api\n     */\n    CLEAR: 'clear',\n    /**\n     * Triggered when a feature is removed from the source.\n     * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n     * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n     * @api\n     */\n    REMOVEFEATURE: 'removefeature'\n};\n//# sourceMappingURL=VectorEventType.js.map","/**\n * @module ol/structs/RBush\n */\nimport { getUid } from '../util.js';\nimport RBush_ from 'rbush/rbush.js';\nimport { createOrUpdate, equals } from '../extent.js';\nimport { isEmpty } from '../obj.js';\n/**\n * @typedef {Object} Entry\n * @property {number} minX\n * @property {number} minY\n * @property {number} maxX\n * @property {number} maxY\n * @property {Object} [value]\n */\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nvar RBush = /** @class */ (function () {\n    /**\n     * @param {number=} opt_maxEntries Max entries.\n     */\n    function RBush(opt_maxEntries) {\n        /**\n         * @private\n         */\n        this.rbush_ = new RBush_(opt_maxEntries);\n        /**\n         * A mapping between the objects added to this rbush wrapper\n         * and the objects that are actually added to the internal rbush.\n         * @private\n         * @type {Object<string, Entry>}\n         */\n        this.items_ = {};\n    }\n    /**\n     * Insert a value into the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.insert = function (extent, value) {\n        /** @type {Entry} */\n        var item = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3],\n            value: value\n        };\n        this.rbush_.insert(item);\n        this.items_[getUid(value)] = item;\n    };\n    /**\n     * Bulk-insert values into the RBush.\n     * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n     * @param {Array<T>} values Values.\n     */\n    RBush.prototype.load = function (extents, values) {\n        var items = new Array(values.length);\n        for (var i = 0, l = values.length; i < l; i++) {\n            var extent = extents[i];\n            var value = values[i];\n            /** @type {Entry} */\n            var item = {\n                minX: extent[0],\n                minY: extent[1],\n                maxX: extent[2],\n                maxY: extent[3],\n                value: value\n            };\n            items[i] = item;\n            this.items_[getUid(value)] = item;\n        }\n        this.rbush_.load(items);\n    };\n    /**\n     * Remove a value from the RBush.\n     * @param {T} value Value.\n     * @return {boolean} Removed.\n     */\n    RBush.prototype.remove = function (value) {\n        var uid = getUid(value);\n        // get the object in which the value was wrapped when adding to the\n        // internal rbush. then use that object to do the removal.\n        var item = this.items_[uid];\n        delete this.items_[uid];\n        return this.rbush_.remove(item) !== null;\n    };\n    /**\n     * Update the extent of a value in the RBush.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {T} value Value.\n     */\n    RBush.prototype.update = function (extent, value) {\n        var item = this.items_[getUid(value)];\n        var bbox = [item.minX, item.minY, item.maxX, item.maxY];\n        if (!equals(bbox, extent)) {\n            this.remove(value);\n            this.insert(extent, value);\n        }\n    };\n    /**\n     * Return all values in the RBush.\n     * @return {Array<T>} All.\n     */\n    RBush.prototype.getAll = function () {\n        var items = this.rbush_.all();\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Return all values in the given extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {Array<T>} All in extent.\n     */\n    RBush.prototype.getInExtent = function (extent) {\n        /** @type {Entry} */\n        var bbox = {\n            minX: extent[0],\n            minY: extent[1],\n            maxX: extent[2],\n            maxY: extent[3]\n        };\n        var items = this.rbush_.search(bbox);\n        return items.map(function (item) {\n            return item.value;\n        });\n    };\n    /**\n     * Calls a callback function with each value in the tree.\n     * If the callback returns a truthy value, this value is returned without\n     * checking the rest of the tree.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach = function (callback) {\n        return this.forEach_(this.getAll(), callback);\n    };\n    /**\n     * Calls a callback function with each value in the provided extent.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(T): *} callback Callback.\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEachInExtent = function (extent, callback) {\n        return this.forEach_(this.getInExtent(extent), callback);\n    };\n    /**\n     * @param {Array<T>} values Values.\n     * @param {function(T): *} callback Callback.\n     * @private\n     * @return {*} Callback return value.\n     */\n    RBush.prototype.forEach_ = function (values, callback) {\n        var result;\n        for (var i = 0, l = values.length; i < l; i++) {\n            result = callback(values[i]);\n            if (result) {\n                return result;\n            }\n        }\n        return result;\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    RBush.prototype.isEmpty = function () {\n        return isEmpty(this.items_);\n    };\n    /**\n     * Remove all values from the RBush.\n     */\n    RBush.prototype.clear = function () {\n        this.rbush_.clear();\n        this.items_ = {};\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    RBush.prototype.getExtent = function (opt_extent) {\n        var data = this.rbush_.toJSON();\n        return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n    };\n    /**\n     * @param {RBush} rbush R-Tree.\n     */\n    RBush.prototype.concat = function (rbush) {\n        this.rbush_.load(rbush.rbush_.all());\n        for (var i in rbush.items_) {\n            this.items_[i] = rbush.items_[i];\n        }\n    };\n    return RBush;\n}());\nexport default RBush;\n//# sourceMappingURL=RBush.js.map","/**\n * @module ol/source/Vector\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getUid } from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport { extend } from '../array.js';\nimport { assert } from '../asserts.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport { containsExtent, equals } from '../extent.js';\nimport { xhr } from '../featureloader.js';\nimport { TRUE, VOID } from '../functions.js';\nimport { all as allStrategy } from '../loadingstrategy.js';\nimport { isEmpty, getValues } from '../obj.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nvar VectorSourceEvent = /** @class */ (function (_super) {\n    __extends(VectorSourceEvent, _super);\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../Feature.js\").default<Geometry>=} opt_feature Feature.\n     */\n    function VectorSourceEvent(type, opt_feature) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The feature being added or removed.\n         * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n         * @api\n         */\n        _this.feature = opt_feature;\n        return _this;\n    }\n    return VectorSourceEvent;\n}(Event));\nexport { VectorSourceEvent };\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          vectorSource.addFeatures(\n *              vectorSource.getFormat().readFeatures(xhr.responseText));\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy~all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader~xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy~all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180° and 180° meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\nvar VectorSource = /** @class */ (function (_super) {\n    __extends(VectorSource, _super);\n    /**\n     * @param {Options=} opt_options Vector source options.\n     */\n    function VectorSource(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        _this = _super.call(this, {\n            attributions: options.attributions,\n            projection: undefined,\n            state: SourceState.READY,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true\n        }) || this;\n        /**\n         * @private\n         * @type {import(\"../featureloader.js\").FeatureLoader}\n         */\n        _this.loader_ = VOID;\n        /**\n         * @private\n         * @type {import(\"../format/Feature.js\").default|undefined}\n         */\n        _this.format_ = options.format;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.overlaps_ = options.overlaps === undefined ? true : options.overlaps;\n        /**\n         * @private\n         * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n         */\n        _this.url_ = options.url;\n        if (options.loader !== undefined) {\n            _this.loader_ = options.loader;\n        }\n        else if (_this.url_ !== undefined) {\n            assert(_this.format_, 7); // `format` must be set when `url` is set\n            // create a XHR feature loader for \"url\" and \"format\"\n            _this.loader_ = xhr(_this.url_, /** @type {import(\"../format/Feature.js\").default} */ (_this.format_));\n        }\n        /**\n         * @private\n         * @type {LoadingStrategy}\n         */\n        _this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n        var useSpatialIndex = options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n        /**\n         * @private\n         * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n        /**\n         * @private\n         * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n         */\n        _this.loadedExtentsRtree_ = new RBush();\n        /**\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.nullGeometryFeatures_ = {};\n        /**\n         * A lookup of features by id (the return from feature.getId()).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.idIndex_ = {};\n        /**\n         * A lookup of features by uid (using getUid(feature)).\n         * @private\n         * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.uidIndex_ = {};\n        /**\n         * @private\n         * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n         */\n        _this.featureChangeKeys_ = {};\n        /**\n         * @private\n         * @type {Collection<import(\"../Feature.js\").default<Geometry>>}\n         */\n        _this.featuresCollection_ = null;\n        var collection, features;\n        if (Array.isArray(options.features)) {\n            features = options.features;\n        }\n        else if (options.features) {\n            collection = options.features;\n            features = collection.getArray();\n        }\n        if (!useSpatialIndex && collection === undefined) {\n            collection = new Collection(features);\n        }\n        if (features !== undefined) {\n            _this.addFeaturesInternal(features);\n        }\n        if (collection !== undefined) {\n            _this.bindFeaturesCollection_(collection);\n        }\n        return _this;\n    }\n    /**\n     * Add a single feature to the source.  If you want to add a batch of features\n     * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n     * instead. A feature will not be added to the source if feature with\n     * the same id is already there. The reason for this behavior is to avoid\n     * feature duplication when using bbox or tile loading strategies.\n     * Note: this also applies if an {@link module:ol/Collection} is used for features,\n     * meaning that if a feature with a duplicate id is added in the collection, it will\n     * be removed from it right away.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n     * @api\n     */\n    VectorSource.prototype.addFeature = function (feature) {\n        this.addFeatureInternal(feature);\n        this.changed();\n    };\n    /**\n     * Add a feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @protected\n     */\n    VectorSource.prototype.addFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        if (!this.addToIndex_(featureKey, feature)) {\n            if (this.featuresCollection_) {\n                this.featuresCollection_.remove(feature);\n            }\n            return;\n        }\n        this.setupChangeEvents_(featureKey, feature);\n        var geometry = feature.getGeometry();\n        if (geometry) {\n            var extent = geometry.getExtent();\n            if (this.featuresRtree_) {\n                this.featuresRtree_.insert(extent, feature);\n            }\n        }\n        else {\n            this.nullGeometryFeatures_[featureKey] = feature;\n        }\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @private\n     */\n    VectorSource.prototype.setupChangeEvents_ = function (featureKey, feature) {\n        this.featureChangeKeys_[featureKey] = [\n            listen(feature, EventType.CHANGE, this.handleFeatureChange_, this),\n            listen(feature, ObjectEventType.PROPERTYCHANGE, this.handleFeatureChange_, this)\n        ];\n    };\n    /**\n     * @param {string} featureKey Unique identifier for the feature.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} The feature is \"valid\", in the sense that it is also a\n     *     candidate for insertion into the Rtree.\n     * @private\n     */\n    VectorSource.prototype.addToIndex_ = function (featureKey, feature) {\n        var valid = true;\n        var id = feature.getId();\n        if (id !== undefined) {\n            if (!(id.toString() in this.idIndex_)) {\n                this.idIndex_[id.toString()] = feature;\n            }\n            else {\n                valid = false;\n            }\n        }\n        if (valid) {\n            assert(!(featureKey in this.uidIndex_), 30); // The passed `feature` was already added to the source\n            this.uidIndex_[featureKey] = feature;\n        }\n        return valid;\n    };\n    /**\n     * Add a batch of features to the source.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n     * @api\n     */\n    VectorSource.prototype.addFeatures = function (features) {\n        this.addFeaturesInternal(features);\n        this.changed();\n    };\n    /**\n     * Add features without firing a `change` event.\n     * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n     * @protected\n     */\n    VectorSource.prototype.addFeaturesInternal = function (features) {\n        var extents = [];\n        var newFeatures = [];\n        var geometryFeatures = [];\n        for (var i = 0, length_1 = features.length; i < length_1; i++) {\n            var feature = features[i];\n            var featureKey = getUid(feature);\n            if (this.addToIndex_(featureKey, feature)) {\n                newFeatures.push(feature);\n            }\n        }\n        for (var i = 0, length_2 = newFeatures.length; i < length_2; i++) {\n            var feature = newFeatures[i];\n            var featureKey = getUid(feature);\n            this.setupChangeEvents_(featureKey, feature);\n            var geometry = feature.getGeometry();\n            if (geometry) {\n                var extent = geometry.getExtent();\n                extents.push(extent);\n                geometryFeatures.push(feature);\n            }\n            else {\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.load(extents, geometryFeatures);\n        }\n        for (var i = 0, length_3 = newFeatures.length; i < length_3; i++) {\n            this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n        }\n    };\n    /**\n     * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n     * @private\n     */\n    VectorSource.prototype.bindFeaturesCollection_ = function (collection) {\n        var modifyingCollection = false;\n        this.addEventListener(VectorEventType.ADDFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.push(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        this.addEventListener(VectorEventType.REMOVEFEATURE, \n        /**\n         * @param {VectorSourceEvent<Geometry>} evt The vector source event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                collection.remove(evt.feature);\n                modifyingCollection = false;\n            }\n        });\n        collection.addEventListener(CollectionEventType.ADD, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.addFeature(/** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        collection.addEventListener(CollectionEventType.REMOVE, \n        /**\n         * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n         */\n        function (evt) {\n            if (!modifyingCollection) {\n                modifyingCollection = true;\n                this.removeFeature(/** @type {import(\"../Feature.js\").default<Geometry>} */ (evt.element));\n                modifyingCollection = false;\n            }\n        }.bind(this));\n        this.featuresCollection_ = collection;\n    };\n    /**\n     * Remove all features from the source.\n     * @param {boolean=} opt_fast Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#removefeature} events.\n     * @api\n     */\n    VectorSource.prototype.clear = function (opt_fast) {\n        if (opt_fast) {\n            for (var featureId in this.featureChangeKeys_) {\n                var keys = this.featureChangeKeys_[featureId];\n                keys.forEach(unlistenByKey);\n            }\n            if (!this.featuresCollection_) {\n                this.featureChangeKeys_ = {};\n                this.idIndex_ = {};\n                this.uidIndex_ = {};\n            }\n        }\n        else {\n            if (this.featuresRtree_) {\n                this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));\n                for (var id in this.nullGeometryFeatures_) {\n                    this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n                }\n            }\n        }\n        if (this.featuresCollection_) {\n            this.featuresCollection_.clear();\n        }\n        if (this.featuresRtree_) {\n            this.featuresRtree_.clear();\n        }\n        this.nullGeometryFeatures_ = {};\n        var clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n        this.dispatchEvent(clearEvent);\n        this.changed();\n    };\n    /**\n     * Iterate through all features on the source, calling the provided callback\n     * with each one.  If the callback returns any \"truthy\" value, iteration will\n     * stop and the function will return the same value.\n     * Note: this function only iterate through the feature that have a defined geometry.\n     *\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     on the source.  Return a truthy value to stop iteration.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeature = function (callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEach(callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometries contain the provided\n     * coordinate, calling the callback with each feature.  If the callback returns\n     * a \"truthy\" value, iteration will stop and the function will return the same\n     * value.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose goemetry contains the provided coordinate.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     */\n    VectorSource.prototype.forEachFeatureAtCoordinateDirect = function (coordinate, callback) {\n        var extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n        return this.forEachFeatureInExtent(extent, function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsCoordinate(coordinate)) {\n                return callback(feature);\n            }\n            else {\n                return undefined;\n            }\n        });\n    };\n    /**\n     * Iterate through all features whose bounding box intersects the provided\n     * extent (note that the feature's geometry may not intersect the extent),\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you are interested in features whose geometry intersects an extent, call\n     * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n     *\n     * When `useSpatialIndex` is set to false, this method will loop through all\n     * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose bounding box intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureInExtent = function (extent, callback) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.forEachInExtent(extent, callback);\n        }\n        else if (this.featuresCollection_) {\n            this.featuresCollection_.forEach(callback);\n        }\n    };\n    /**\n     * Iterate through all features whose geometry intersects the provided extent,\n     * calling the callback with each feature.  If the callback returns a \"truthy\"\n     * value, iteration will stop and the function will return the same value.\n     *\n     * If you only want to test for bounding box intersection, call the\n     * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n     *     whose geometry intersects the provided extent.\n     * @return {T|undefined} The return value from the last call to the callback.\n     * @template T\n     * @api\n     */\n    VectorSource.prototype.forEachFeatureIntersectingExtent = function (extent, callback) {\n        return this.forEachFeatureInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         * @return {T|undefined} The return value from the last call to the callback.\n         */\n        function (feature) {\n            var geometry = feature.getGeometry();\n            if (geometry.intersectsExtent(extent)) {\n                var result = callback(feature);\n                if (result) {\n                    return result;\n                }\n            }\n        });\n    };\n    /**\n     * Get the features collection associated with this source. Will be `null`\n     * unless the source was configured with `useSpatialIndex` set to `false`, or\n     * with an {@link module:ol/Collection} as `features`.\n     * @return {Collection<import(\"../Feature.js\").default<Geometry>>} The collection of features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesCollection = function () {\n        return this.featuresCollection_;\n    };\n    /**\n     * Get all features on the source in random order.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeatures = function () {\n        var features;\n        if (this.featuresCollection_) {\n            features = this.featuresCollection_.getArray();\n        }\n        else if (this.featuresRtree_) {\n            features = this.featuresRtree_.getAll();\n            if (!isEmpty(this.nullGeometryFeatures_)) {\n                extend(features, getValues(this.nullGeometryFeatures_));\n            }\n        }\n        return (\n        /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */ (features));\n    };\n    /**\n     * Get all features whose geometry intersects the provided coordinate.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesAtCoordinate = function (coordinate) {\n        var features = [];\n        this.forEachFeatureAtCoordinateDirect(coordinate, function (feature) {\n            features.push(feature);\n        });\n        return features;\n    };\n    /**\n     * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n     * all features intersecting the given extent in random order (so it may include\n     * features whose geometries do not intersect the extent).\n     *\n     * When `useSpatialIndex` is set to false, this method will return all\n     * features.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n     * @api\n     */\n    VectorSource.prototype.getFeaturesInExtent = function (extent) {\n        if (this.featuresRtree_) {\n            return this.featuresRtree_.getInExtent(extent);\n        }\n        else if (this.featuresCollection_) {\n            return this.featuresCollection_.getArray();\n        }\n        else {\n            return [];\n        }\n    };\n    /**\n     * Get the closest feature to the provided coordinate.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {function(import(\"../Feature.js\").default<Geometry>):boolean=} opt_filter Feature filter function.\n     *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n     *     and it should return a boolean value. By default, no filtering is made.\n     * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n     * @api\n     */\n    VectorSource.prototype.getClosestFeatureToCoordinate = function (coordinate, opt_filter) {\n        // Find the closest feature using branch and bound.  We start searching an\n        // infinite extent, and find the distance from the first feature found.  This\n        // becomes the closest feature.  We then compute a smaller extent which any\n        // closer feature must intersect.  We continue searching with this smaller\n        // extent, trying to find a closer feature.  Every time we find a closer\n        // feature, we update the extent being searched so that any even closer\n        // feature must intersect it.  We continue until we run out of features.\n        var x = coordinate[0];\n        var y = coordinate[1];\n        var closestFeature = null;\n        var closestPoint = [NaN, NaN];\n        var minSquaredDistance = Infinity;\n        var extent = [-Infinity, -Infinity, Infinity, Infinity];\n        var filter = opt_filter ? opt_filter : TRUE;\n        this.featuresRtree_.forEachInExtent(extent, \n        /**\n         * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n         */\n        function (feature) {\n            if (filter(feature)) {\n                var geometry = feature.getGeometry();\n                var previousMinSquaredDistance = minSquaredDistance;\n                minSquaredDistance = geometry.closestPointXY(x, y, closestPoint, minSquaredDistance);\n                if (minSquaredDistance < previousMinSquaredDistance) {\n                    closestFeature = feature;\n                    // This is sneaky.  Reduce the extent that it is currently being\n                    // searched while the R-Tree traversal using this same extent object\n                    // is still in progress.  This is safe because the new extent is\n                    // strictly contained by the old extent.\n                    var minDistance = Math.sqrt(minSquaredDistance);\n                    extent[0] = x - minDistance;\n                    extent[1] = y - minDistance;\n                    extent[2] = x + minDistance;\n                    extent[3] = y + minDistance;\n                }\n            }\n        });\n        return closestFeature;\n    };\n    /**\n     * Get the extent of the features currently in the source.\n     *\n     * This method is not available when the source is configured with\n     * `useSpatialIndex` set to `false`.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Destination extent. If provided, no new extent\n     *     will be created. Instead, that extent's coordinates will be overwritten.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    VectorSource.prototype.getExtent = function (opt_extent) {\n        return this.featuresRtree_.getExtent(opt_extent);\n    };\n    /**\n     * Get a feature by its identifier (the value returned by feature.getId()).\n     * Note that the index treats string and numeric identifiers as the same.  So\n     * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n     *\n     * @param {string|number} id Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n     * @api\n     */\n    VectorSource.prototype.getFeatureById = function (id) {\n        var feature = this.idIndex_[id.toString()];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get a feature by its internal unique identifier (using `getUid`).\n     *\n     * @param {string} uid Feature identifier.\n     * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n     */\n    VectorSource.prototype.getFeatureByUid = function (uid) {\n        var feature = this.uidIndex_[uid];\n        return feature !== undefined ? feature : null;\n    };\n    /**\n     * Get the format associated with this source.\n     *\n     * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n     * @api\n     */\n    VectorSource.prototype.getFormat = function () {\n        return this.format_;\n    };\n    /**\n     * @return {boolean} The source can have overlapping geometries.\n     */\n    VectorSource.prototype.getOverlaps = function () {\n        return this.overlaps_;\n    };\n    /**\n     * Get the url associated with this source.\n     *\n     * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n     * @api\n     */\n    VectorSource.prototype.getUrl = function () {\n        return this.url_;\n    };\n    /**\n     * @param {Event} event Event.\n     * @private\n     */\n    VectorSource.prototype.handleFeatureChange_ = function (event) {\n        var feature = /** @type {import(\"../Feature.js\").default<Geometry>} */ (event.target);\n        var featureKey = getUid(feature);\n        var geometry = feature.getGeometry();\n        if (!geometry) {\n            if (!(featureKey in this.nullGeometryFeatures_)) {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.remove(feature);\n                }\n                this.nullGeometryFeatures_[featureKey] = feature;\n            }\n        }\n        else {\n            var extent = geometry.getExtent();\n            if (featureKey in this.nullGeometryFeatures_) {\n                delete this.nullGeometryFeatures_[featureKey];\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.insert(extent, feature);\n                }\n            }\n            else {\n                if (this.featuresRtree_) {\n                    this.featuresRtree_.update(extent, feature);\n                }\n            }\n        }\n        var id = feature.getId();\n        if (id !== undefined) {\n            var sid = id.toString();\n            if (this.idIndex_[sid] !== feature) {\n                this.removeFromIdIndex_(feature);\n                this.idIndex_[sid] = feature;\n            }\n        }\n        else {\n            this.removeFromIdIndex_(feature);\n            this.uidIndex_[featureKey] = feature;\n        }\n        this.changed();\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE, feature));\n    };\n    /**\n     * Returns true if the feature is contained within the source.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {boolean} Has feature.\n     * @api\n     */\n    VectorSource.prototype.hasFeature = function (feature) {\n        var id = feature.getId();\n        if (id !== undefined) {\n            return id in this.idIndex_;\n        }\n        else {\n            return getUid(feature) in this.uidIndex_;\n        }\n    };\n    /**\n     * @return {boolean} Is empty.\n     */\n    VectorSource.prototype.isEmpty = function () {\n        return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n    };\n    /**\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection.\n     */\n    VectorSource.prototype.loadFeatures = function (extent, resolution, projection) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var extentsToLoad = this.strategy_(extent, resolution);\n        this.loading = false;\n        var _loop_1 = function (i, ii) {\n            var extentToLoad = extentsToLoad[i];\n            var alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad, \n            /**\n             * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n             * @return {boolean} Contains.\n             */\n            function (object) {\n                return containsExtent(object.extent, extentToLoad);\n            });\n            if (!alreadyLoaded) {\n                this_1.loader_.call(this_1, extentToLoad, resolution, projection);\n                loadedExtentsRtree.insert(extentToLoad, { extent: extentToLoad.slice() });\n                this_1.loading = this_1.loader_ !== VOID;\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n            _loop_1(i, ii);\n        }\n    };\n    VectorSource.prototype.refresh = function () {\n        this.clear(true);\n        this.loadedExtentsRtree_.clear();\n        _super.prototype.refresh.call(this);\n    };\n    /**\n     * Remove an extent from the list of loaded extents.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @api\n     */\n    VectorSource.prototype.removeLoadedExtent = function (extent) {\n        var loadedExtentsRtree = this.loadedExtentsRtree_;\n        var obj;\n        loadedExtentsRtree.forEachInExtent(extent, function (object) {\n            if (equals(object.extent, extent)) {\n                obj = object;\n                return true;\n            }\n        });\n        if (obj) {\n            loadedExtentsRtree.remove(obj);\n        }\n    };\n    /**\n     * Remove a single feature from the source.  If you want to remove all features\n     * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n     * instead.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n     * @api\n     */\n    VectorSource.prototype.removeFeature = function (feature) {\n        var featureKey = getUid(feature);\n        if (featureKey in this.nullGeometryFeatures_) {\n            delete this.nullGeometryFeatures_[featureKey];\n        }\n        else {\n            if (this.featuresRtree_) {\n                this.featuresRtree_.remove(feature);\n            }\n        }\n        this.removeFeatureInternal(feature);\n        this.changed();\n    };\n    /**\n     * Remove feature without firing a `change` event.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @protected\n     */\n    VectorSource.prototype.removeFeatureInternal = function (feature) {\n        var featureKey = getUid(feature);\n        this.featureChangeKeys_[featureKey].forEach(unlistenByKey);\n        delete this.featureChangeKeys_[featureKey];\n        var id = feature.getId();\n        if (id !== undefined) {\n            delete this.idIndex_[id.toString()];\n        }\n        delete this.uidIndex_[featureKey];\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE, feature));\n    };\n    /**\n     * Remove a feature from the id index.  Called internally when the feature id\n     * may have changed.\n     * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n     * @return {boolean} Removed the feature from the index.\n     * @private\n     */\n    VectorSource.prototype.removeFromIdIndex_ = function (feature) {\n        var removed = false;\n        for (var id in this.idIndex_) {\n            if (this.idIndex_[id] === feature) {\n                delete this.idIndex_[id];\n                removed = true;\n                break;\n            }\n        }\n        return removed;\n    };\n    /**\n     * Set the new loader of the source. The next render cycle will use the\n     * new loader.\n     * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n     * @api\n     */\n    VectorSource.prototype.setLoader = function (loader) {\n        this.loader_ = loader;\n    };\n    /**\n     * Points the source to a new url. The next render cycle will use the new url.\n     * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n     * @api\n     */\n    VectorSource.prototype.setUrl = function (url) {\n        assert(this.format_, 7); // `format` must be set when `url` is set\n        this.setLoader(xhr(url, this.format_));\n    };\n    return VectorSource;\n}(Source));\nexport default VectorSource;\n//# sourceMappingURL=Vector.js.map","/**\n * @module ol/geom/flat/length\n */\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    var length = 0;\n    for (var i = offset + stride; i < end; i += stride) {\n        var x2 = flatCoordinates[i];\n        var y2 = flatCoordinates[i + 1];\n        length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n        x1 = x2;\n        y1 = y2;\n    }\n    return length;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n    var perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n    var dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n    var dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n    perimeter += Math.sqrt(dx * dx + dy * dy);\n    return perimeter;\n}\n//# sourceMappingURL=length.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"map\",attrs:{\"id\":\"map\"}}),_c('div',{staticClass:\"tooltip\"},[_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.showCircle([119.3008804321289, 26.059913635253906])}}},[_vm._v(\" 画圆(半径500米） \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.hideCircle()}}},[_vm._v(\" 清除圆 \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.addInteraction('Star')}}},[_vm._v(\" 手动画图 \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.drawLineHand()}}},[_vm._v(\" 手动画线条 \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.cancelDrawLineHand()}}},[_vm._v(\" 取消手动画线条 \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.drawLine()}}},[_vm._v(\" 渲染线条 \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.startAnimation()}}},[_vm._v(\" 动画 \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.cluster()}}},[_vm._v(\" 聚合图层 \")]),_c('el-button',{staticClass:\"draw-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.getCenter()}}},[_vm._v(\" 获取中心点 \")])],1),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('p',{staticClass:\"tip\",attrs:{\"id\":\"tip\"}},[_vm._v(\" \"+_vm._s(_vm.tip)+\" \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @module ol/source/Cluster\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getUid } from '../util.js';\nimport { assert } from '../asserts.js';\nimport Feature from '../Feature.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport { scale as scaleCoordinate, add as addCoordinate } from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport { buffer, createEmpty, createOrUpdateFromCoordinate } from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from './Vector.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Minimum distance in pixels between clusters.\n * @property {function(Feature):Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underyling source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {VectorSource} [source] Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n *\n * If the instance is disposed without also disposing the underlying\n * source `setSource(null)` has to be called to remove the listener reference\n * from the wrapped source.\n * @api\n */\nvar Cluster = /** @class */ (function (_super) {\n    __extends(Cluster, _super);\n    /**\n     * @param {Options} options Cluster options.\n     */\n    function Cluster(options) {\n        var _this = _super.call(this, {\n            attributions: options.attributions,\n            wrapX: options.wrapX\n        }) || this;\n        /**\n         * @type {number|undefined}\n         * @protected\n         */\n        _this.resolution = undefined;\n        /**\n         * @type {number}\n         * @protected\n         */\n        _this.distance = options.distance !== undefined ? options.distance : 20;\n        /**\n         * @type {Array<Feature>}\n         * @protected\n         */\n        _this.features = [];\n        /**\n         * @param {Feature} feature Feature.\n         * @return {Point} Cluster calculation point.\n         * @protected\n         */\n        _this.geometryFunction = options.geometryFunction || function (feature) {\n            var geometry = feature.getGeometry();\n            assert(geometry.getType() == GeometryType.POINT, 10); // The default `geometryFunction` can only handle `Point` geometries\n            return geometry;\n        };\n        _this.boundRefresh_ = _this.refresh.bind(_this);\n        _this.setSource(options.source || null);\n        return _this;\n    }\n    /**\n     * @override\n     */\n    Cluster.prototype.clear = function (opt_fast) {\n        this.features.length = 0;\n        _super.prototype.clear.call(this, opt_fast);\n    };\n    /**\n     * Get the distance in pixels between clusters.\n     * @return {number} Distance.\n     * @api\n     */\n    Cluster.prototype.getDistance = function () {\n        return this.distance;\n    };\n    /**\n     * Get a reference to the wrapped source.\n     * @return {VectorSource} Source.\n     * @api\n     */\n    Cluster.prototype.getSource = function () {\n        return this.source;\n    };\n    /**\n     * @inheritDoc\n     */\n    Cluster.prototype.loadFeatures = function (extent, resolution, projection) {\n        this.source.loadFeatures(extent, resolution, projection);\n        if (resolution !== this.resolution) {\n            this.clear();\n            this.resolution = resolution;\n            this.cluster();\n            this.addFeatures(this.features);\n        }\n    };\n    /**\n     * Set the distance in pixels between clusters.\n     * @param {number} distance The distance in pixels.\n     * @api\n     */\n    Cluster.prototype.setDistance = function (distance) {\n        this.distance = distance;\n        this.refresh();\n    };\n    /**\n     * Replace the wrapped source.\n     * @param {VectorSource} source The new source for this instance.\n     * @api\n     */\n    Cluster.prototype.setSource = function (source) {\n        if (this.source) {\n            this.source.removeEventListener(EventType.CHANGE, this.boundRefresh_);\n        }\n        this.source = source;\n        if (source) {\n            source.addEventListener(EventType.CHANGE, this.boundRefresh_);\n        }\n        this.refresh();\n    };\n    /**\n     * Handle the source changing.\n     * @override\n     */\n    Cluster.prototype.refresh = function () {\n        this.clear();\n        this.cluster();\n        this.addFeatures(this.features);\n    };\n    /**\n     * @protected\n     */\n    Cluster.prototype.cluster = function () {\n        if (this.resolution === undefined || !this.source) {\n            return;\n        }\n        var extent = createEmpty();\n        var mapDistance = this.distance * this.resolution;\n        var features = this.source.getFeatures();\n        /**\n         * @type {!Object<string, boolean>}\n         */\n        var clustered = {};\n        for (var i = 0, ii = features.length; i < ii; i++) {\n            var feature = features[i];\n            if (!(getUid(feature) in clustered)) {\n                var geometry = this.geometryFunction(feature);\n                if (geometry) {\n                    var coordinates = geometry.getCoordinates();\n                    createOrUpdateFromCoordinate(coordinates, extent);\n                    buffer(extent, mapDistance, extent);\n                    var neighbors = this.source.getFeaturesInExtent(extent);\n                    neighbors = neighbors.filter(function (neighbor) {\n                        var uid = getUid(neighbor);\n                        if (!(uid in clustered)) {\n                            clustered[uid] = true;\n                            return true;\n                        }\n                        else {\n                            return false;\n                        }\n                    });\n                    this.features.push(this.createCluster(neighbors));\n                }\n            }\n        }\n    };\n    /**\n     * @param {Array<Feature>} features Features\n     * @return {Feature} The cluster feature.\n     * @protected\n     */\n    Cluster.prototype.createCluster = function (features) {\n        var centroid = [0, 0];\n        for (var i = features.length - 1; i >= 0; --i) {\n            var geometry = this.geometryFunction(features[i]);\n            if (geometry) {\n                addCoordinate(centroid, geometry.getCoordinates());\n            }\n            else {\n                features.splice(i, 1);\n            }\n        }\n        scaleCoordinate(centroid, 1 / features.length);\n        var cluster = new Feature(new Point(centroid));\n        cluster.set('features', features);\n        return cluster;\n    };\n    return Cluster;\n}(VectorSource));\nexport default Cluster;\n//# sourceMappingURL=Cluster.js.map","/**\n * @module ol/OverlayPositioning\n */\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_CENTER: 'bottom-center',\n    BOTTOM_RIGHT: 'bottom-right',\n    CENTER_LEFT: 'center-left',\n    CENTER_CENTER: 'center-center',\n    CENTER_RIGHT: 'center-right',\n    TOP_LEFT: 'top-left',\n    TOP_CENTER: 'top-center',\n    TOP_RIGHT: 'top-right'\n};\n//# sourceMappingURL=OverlayPositioning.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Overlay\n */\nimport MapEventType from './MapEventType.js';\nimport BaseObject, { getChangeEventType } from './Object.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport { CLASS_SELECTABLE } from './css.js';\nimport { removeNode, removeChildren, outerWidth, outerHeight } from './dom.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { containsExtent } from './extent.js';\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {OverlayPositioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {PanIntoViewOptions|boolean} [autoPan=false] Pan the map when calling\n * `setPosition`, so that the overlay is entirely visible in the current viewport?\n * If `true` (deprecated), then `autoPanAnimation` and `autoPanMargin` will be\n * used to determine the panning parameters; if an object is supplied then other\n * parameters are ignored.\n * @property {PanOptions} [autoPanAnimation] The animation options used to pan\n * the overlay into view. This animation is only used when `autoPan` is enabled.\n * A `duration` and `easing` may be provided to customize the animation.\n * Deprecated and ignored if `autoPan` is supplied as an object.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning. Deprecated and ignored\n * if `autoPan` is supplied as an object.\n * @property {PanIntoViewOptions} [autoPanOptions] The options to use for the\n * autoPan. This is only used when `autoPan` is enabled and has preference over\n * the individual `autoPanMargin` and `autoPanOptions`.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing~inAndOut}.\n */\n/**\n * @typedef {Object} PanIntoViewOptions\n * @property {PanOptions} [animation={}] The animation parameters for the pan\n * @property {number} [margin=20] The margin (in pixels) between the\n * overlay and the borders of the map when panning into view.\n */\n/**\n * @enum {string}\n * @protected\n */\nvar Property = {\n    ELEMENT: 'element',\n    MAP: 'map',\n    OFFSET: 'offset',\n    POSITION: 'position',\n    POSITIONING: 'positioning'\n};\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nvar Overlay = /** @class */ (function (_super) {\n    __extends(Overlay, _super);\n    /**\n     * @param {Options} options Overlay options.\n     */\n    function Overlay(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @protected\n         * @type {Options}\n         */\n        _this.options = options;\n        /**\n         * @protected\n         * @type {number|string|undefined}\n         */\n        _this.id = options.id;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.insertFirst = options.insertFirst !== undefined ?\n            options.insertFirst : true;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.element = document.createElement('div');\n        _this.element.className = options.className !== undefined ?\n            options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\n        _this.element.style.position = 'absolute';\n        var autoPan = options.autoPan;\n        if (autoPan && ('object' !== typeof autoPan)) {\n            autoPan = {\n                animation: options.autoPanAnimation,\n                margin: options.autoPanMargin\n            };\n        }\n        /**\n         * @protected\n         * @type {PanIntoViewOptions|false}\n         */\n        _this.autoPan = /** @type {PanIntoViewOptions} */ (autoPan) || false;\n        /**\n         * @protected\n         * @type {{transform_: string,\n         *         visible: boolean}}\n         */\n        _this.rendered = {\n            transform_: '',\n            visible: true\n        };\n        /**\n         * @protected\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.mapPostrenderListenerKey = null;\n        _this.addEventListener(getChangeEventType(Property.ELEMENT), _this.handleElementChanged);\n        _this.addEventListener(getChangeEventType(Property.MAP), _this.handleMapChanged);\n        _this.addEventListener(getChangeEventType(Property.OFFSET), _this.handleOffsetChanged);\n        _this.addEventListener(getChangeEventType(Property.POSITION), _this.handlePositionChanged);\n        _this.addEventListener(getChangeEventType(Property.POSITIONING), _this.handlePositioningChanged);\n        if (options.element !== undefined) {\n            _this.setElement(options.element);\n        }\n        _this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n        _this.setPositioning(options.positioning !== undefined ?\n            /** @type {OverlayPositioning} */ (options.positioning) :\n            OverlayPositioning.TOP_LEFT);\n        if (options.position !== undefined) {\n            _this.setPosition(options.position);\n        }\n        return _this;\n    }\n    /**\n     * Get the DOM element of this overlay.\n     * @return {HTMLElement|undefined} The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getElement = function () {\n        return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n    };\n    /**\n     * Get the overlay identifier which is set on constructor.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Overlay.prototype.getId = function () {\n        return this.id;\n    };\n    /**\n     * Get the map associated with this overlay.\n     * @return {import(\"./PluggableMap.js\").default|undefined} The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getMap = function () {\n        return (\n        /** @type {import(\"./PluggableMap.js\").default|undefined} */ (this.get(Property.MAP)));\n    };\n    /**\n     * Get the offset of this overlay.\n     * @return {Array<number>} The offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getOffset = function () {\n        return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n    };\n    /**\n     * Get the current position of this overlay.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n     *     anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPosition = function () {\n        return (\n        /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION)));\n    };\n    /**\n     * Get the current positioning of this overlay.\n     * @return {OverlayPositioning} How the overlay is positioned\n     *     relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPositioning = function () {\n        return (\n        /** @type {OverlayPositioning} */ (this.get(Property.POSITIONING)));\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleElementChanged = function () {\n        removeChildren(this.element);\n        var element = this.getElement();\n        if (element) {\n            this.element.appendChild(element);\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleMapChanged = function () {\n        if (this.mapPostrenderListenerKey) {\n            removeNode(this.element);\n            unlistenByKey(this.mapPostrenderListenerKey);\n            this.mapPostrenderListenerKey = null;\n        }\n        var map = this.getMap();\n        if (map) {\n            this.mapPostrenderListenerKey = listen(map, MapEventType.POSTRENDER, this.render, this);\n            this.updatePixelPosition();\n            var container = this.stopEvent ?\n                map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n            if (this.insertFirst) {\n                container.insertBefore(this.element, container.childNodes[0] || null);\n            }\n            else {\n                container.appendChild(this.element);\n            }\n            this.performAutoPan();\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.render = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleOffsetChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositionChanged = function () {\n        this.updatePixelPosition();\n        this.performAutoPan();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositioningChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * Set the DOM element to be associated with this overlay.\n     * @param {HTMLElement|undefined} element The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setElement = function (element) {\n        this.set(Property.ELEMENT, element);\n    };\n    /**\n     * Set the map to be associated with this overlay.\n     * @param {import(\"./PluggableMap.js\").default|undefined} map The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setMap = function (map) {\n        this.set(Property.MAP, map);\n    };\n    /**\n     * Set the offset for this overlay.\n     * @param {Array<number>} offset Offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setOffset = function (offset) {\n        this.set(Property.OFFSET, offset);\n    };\n    /**\n     * Set the position for this overlay. If the position is `undefined` the\n     * overlay is hidden.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n     *     is anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPosition = function (position) {\n        this.set(Property.POSITION, position);\n    };\n    /**\n     * Pan the map so that the overlay is entirely visisble in the current viewport\n     * (if necessary) using the configured autoPan parameters\n     * @protected\n     */\n    Overlay.prototype.performAutoPan = function () {\n        if (this.autoPan) {\n            this.panIntoView(this.autoPan);\n        }\n    };\n    /**\n     * Pan the map so that the overlay is entirely visible in the current viewport\n     * (if necessary).\n     * @param {PanIntoViewOptions|undefined} panIntoViewOptions Options for the pan action\n     * @api\n     */\n    Overlay.prototype.panIntoView = function (panIntoViewOptions) {\n        var map = this.getMap();\n        if (!map || !map.getTargetElement() || !this.get(Property.POSITION)) {\n            return;\n        }\n        var mapRect = this.getRect(map.getTargetElement(), map.getSize());\n        var element = this.getElement();\n        var overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\n        var myMargin = (panIntoViewOptions.margin === undefined) ? 20 : panIntoViewOptions.margin;\n        if (!containsExtent(mapRect, overlayRect)) {\n            // the overlay is not completely inside the viewport, so pan the map\n            var offsetLeft = overlayRect[0] - mapRect[0];\n            var offsetRight = mapRect[2] - overlayRect[2];\n            var offsetTop = overlayRect[1] - mapRect[1];\n            var offsetBottom = mapRect[3] - overlayRect[3];\n            var delta = [0, 0];\n            if (offsetLeft < 0) {\n                // move map to the left\n                delta[0] = offsetLeft - myMargin;\n            }\n            else if (offsetRight < 0) {\n                // move map to the right\n                delta[0] = Math.abs(offsetRight) + myMargin;\n            }\n            if (offsetTop < 0) {\n                // move map up\n                delta[1] = offsetTop - myMargin;\n            }\n            else if (offsetBottom < 0) {\n                // move map down\n                delta[1] = Math.abs(offsetBottom) + myMargin;\n            }\n            if (delta[0] !== 0 || delta[1] !== 0) {\n                var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (map.getView().getCenterInternal());\n                var centerPx = map.getPixelFromCoordinateInternal(center);\n                var newCenterPx = [\n                    centerPx[0] + delta[0],\n                    centerPx[1] + delta[1]\n                ];\n                var panOptions = panIntoViewOptions.animation || {};\n                map.getView().animateInternal({\n                    center: map.getCoordinateFromPixelInternal(newCenterPx),\n                    duration: panOptions.duration,\n                    easing: panOptions.easing\n                });\n            }\n        }\n    };\n    /**\n     * Get the extent of an element relative to the document\n     * @param {HTMLElement} element The element.\n     * @param {import(\"./size.js\").Size} size The size of the element.\n     * @return {import(\"./extent.js\").Extent} The extent.\n     * @protected\n     */\n    Overlay.prototype.getRect = function (element, size) {\n        var box = element.getBoundingClientRect();\n        var offsetX = box.left + window.pageXOffset;\n        var offsetY = box.top + window.pageYOffset;\n        return [\n            offsetX,\n            offsetY,\n            offsetX + size[0],\n            offsetY + size[1]\n        ];\n    };\n    /**\n     * Set the positioning for this overlay.\n     * @param {OverlayPositioning} positioning how the overlay is\n     *     positioned relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPositioning = function (positioning) {\n        this.set(Property.POSITIONING, positioning);\n    };\n    /**\n     * Modify the visibility of the element.\n     * @param {boolean} visible Element visibility.\n     * @protected\n     */\n    Overlay.prototype.setVisible = function (visible) {\n        if (this.rendered.visible !== visible) {\n            this.element.style.display = visible ? '' : 'none';\n            this.rendered.visible = visible;\n        }\n    };\n    /**\n     * Update pixel position.\n     * @protected\n     */\n    Overlay.prototype.updatePixelPosition = function () {\n        var map = this.getMap();\n        var position = this.getPosition();\n        if (!map || !map.isRendered() || !position) {\n            this.setVisible(false);\n            return;\n        }\n        var pixel = map.getPixelFromCoordinate(position);\n        var mapSize = map.getSize();\n        this.updateRenderedPosition(pixel, mapSize);\n    };\n    /**\n     * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n     * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n     * @protected\n     */\n    Overlay.prototype.updateRenderedPosition = function (pixel, mapSize) {\n        var style = this.element.style;\n        var offset = this.getOffset();\n        var positioning = this.getPositioning();\n        this.setVisible(true);\n        var x = Math.round(pixel[0] + offset[0]) + 'px';\n        var y = Math.round(pixel[1] + offset[1]) + 'px';\n        var posX = '0%';\n        var posY = '0%';\n        if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n            positioning == OverlayPositioning.CENTER_RIGHT ||\n            positioning == OverlayPositioning.TOP_RIGHT) {\n            posX = '-100%';\n        }\n        else if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n            positioning == OverlayPositioning.CENTER_CENTER ||\n            positioning == OverlayPositioning.TOP_CENTER) {\n            posX = '-50%';\n        }\n        if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n            positioning == OverlayPositioning.BOTTOM_CENTER ||\n            positioning == OverlayPositioning.BOTTOM_RIGHT) {\n            posY = '-100%';\n        }\n        else if (positioning == OverlayPositioning.CENTER_LEFT ||\n            positioning == OverlayPositioning.CENTER_CENTER ||\n            positioning == OverlayPositioning.CENTER_RIGHT) {\n            posY = '-50%';\n        }\n        var transform = \"translate(\" + posX + \", \" + posY + \") translate(\" + x + \", \" + y + \")\";\n        if (this.rendered.transform_ != transform) {\n            this.rendered.transform_ = transform;\n            style.transform = transform;\n            // @ts-ignore IE9\n            style.msTransform = transform;\n        }\n    };\n    /**\n     * returns the options this Overlay has been created with\n     * @return {Options} overlay options\n     */\n    Overlay.prototype.getOptions = function () {\n        return this.options;\n    };\n    return Overlay;\n}(BaseObject));\nexport default Overlay;\n//# sourceMappingURL=Overlay.js.map","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport TextPlacement from './TextPlacement.js';\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nvar DEFAULT_FILL_COLOR = '#333';\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle=Math.PI/4] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45° (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./TextPlacement.js\").default|string} [placement='point'] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {import(\"./Fill.js\").default} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nvar Text = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Text(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.font_ = options.font;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.text_ = options.text;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textAlign_ = options.textAlign;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        this.textBaseline_ = options.textBaseline;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill :\n            new Fill({ color: DEFAULT_FILL_COLOR });\n        /**\n         * @private\n         * @type {number}\n         */\n        this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n        /**\n         * @private\n         * @type {import(\"./TextPlacement.js\").default|string}\n         */\n        this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.overflow_ = !!options.overflow;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.padding_ = options.padding === undefined ? null : options.padding;\n    }\n    /**\n     * Clones the style.\n     * @return {Text} The cloned style.\n     * @api\n     */\n    Text.prototype.clone = function () {\n        return new Text({\n            font: this.getFont(),\n            placement: this.getPlacement(),\n            maxAngle: this.getMaxAngle(),\n            overflow: this.getOverflow(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            scale: this.getScale(),\n            text: this.getText(),\n            textAlign: this.getTextAlign(),\n            textBaseline: this.getTextBaseline(),\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            offsetX: this.getOffsetX(),\n            offsetY: this.getOffsetY(),\n            backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n            backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined,\n            padding: this.getPadding()\n        });\n    };\n    /**\n     * Get the `overflow` configuration.\n     * @return {boolean} Let text overflow the length of the path they follow.\n     * @api\n     */\n    Text.prototype.getOverflow = function () {\n        return this.overflow_;\n    };\n    /**\n     * Get the font name.\n     * @return {string|undefined} Font.\n     * @api\n     */\n    Text.prototype.getFont = function () {\n        return this.font_;\n    };\n    /**\n     * Get the maximum angle between adjacent characters.\n     * @return {number} Angle in radians.\n     * @api\n     */\n    Text.prototype.getMaxAngle = function () {\n        return this.maxAngle_;\n    };\n    /**\n     * Get the label placement.\n     * @return {import(\"./TextPlacement.js\").default|string} Text placement.\n     * @api\n     */\n    Text.prototype.getPlacement = function () {\n        return this.placement_;\n    };\n    /**\n     * Get the x-offset for the text.\n     * @return {number} Horizontal text offset.\n     * @api\n     */\n    Text.prototype.getOffsetX = function () {\n        return this.offsetX_;\n    };\n    /**\n     * Get the y-offset for the text.\n     * @return {number} Vertical text offset.\n     * @api\n     */\n    Text.prototype.getOffsetY = function () {\n        return this.offsetY_;\n    };\n    /**\n     * Get the fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Determine whether the text rotates with the map.\n     * @return {boolean|undefined} Rotate with map.\n     * @api\n     */\n    Text.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the text rotation.\n     * @return {number|undefined} Rotation.\n     * @api\n     */\n    Text.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the text scale.\n     * @return {number|undefined} Scale.\n     * @api\n     */\n    Text.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Get the text to be rendered.\n     * @return {string|undefined} Text.\n     * @api\n     */\n    Text.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Get the text alignment.\n     * @return {string|undefined} Text align.\n     * @api\n     */\n    Text.prototype.getTextAlign = function () {\n        return this.textAlign_;\n    };\n    /**\n     * Get the text baseline.\n     * @return {string|undefined} Text baseline.\n     * @api\n     */\n    Text.prototype.getTextBaseline = function () {\n        return this.textBaseline_;\n    };\n    /**\n     * Get the background fill style for the text.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Text.prototype.getBackgroundFill = function () {\n        return this.backgroundFill_;\n    };\n    /**\n     * Get the background stroke style for the text.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Text.prototype.getBackgroundStroke = function () {\n        return this.backgroundStroke_;\n    };\n    /**\n     * Get the padding for the text.\n     * @return {Array<number>} Padding.\n     * @api\n     */\n    Text.prototype.getPadding = function () {\n        return this.padding_;\n    };\n    /**\n     * Set the `overflow` property.\n     *\n     * @param {boolean} overflow Let text overflow the path that it follows.\n     * @api\n     */\n    Text.prototype.setOverflow = function (overflow) {\n        this.overflow_ = overflow;\n    };\n    /**\n     * Set the font.\n     *\n     * @param {string|undefined} font Font.\n     * @api\n     */\n    Text.prototype.setFont = function (font) {\n        this.font_ = font;\n    };\n    /**\n     * Set the maximum angle between adjacent characters.\n     *\n     * @param {number} maxAngle Angle in radians.\n     * @api\n     */\n    Text.prototype.setMaxAngle = function (maxAngle) {\n        this.maxAngle_ = maxAngle;\n    };\n    /**\n     * Set the x offset.\n     *\n     * @param {number} offsetX Horizontal text offset.\n     * @api\n     */\n    Text.prototype.setOffsetX = function (offsetX) {\n        this.offsetX_ = offsetX;\n    };\n    /**\n     * Set the y offset.\n     *\n     * @param {number} offsetY Vertical text offset.\n     * @api\n     */\n    Text.prototype.setOffsetY = function (offsetY) {\n        this.offsetY_ = offsetY;\n    };\n    /**\n     * Set the text placement.\n     *\n     * @param {import(\"./TextPlacement.js\").default|string} placement Placement.\n     * @api\n     */\n    Text.prototype.setPlacement = function (placement) {\n        this.placement_ = placement;\n    };\n    /**\n     * Set whether to rotate the text with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    Text.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number|undefined} rotation Rotation.\n     * @api\n     */\n    Text.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number|undefined} scale Scale.\n     * @api\n     */\n    Text.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n    };\n    /**\n     * Set the stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Set the text.\n     *\n     * @param {string|undefined} text Text.\n     * @api\n     */\n    Text.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Set the text alignment.\n     *\n     * @param {string|undefined} textAlign Text align.\n     * @api\n     */\n    Text.prototype.setTextAlign = function (textAlign) {\n        this.textAlign_ = textAlign;\n    };\n    /**\n     * Set the text baseline.\n     *\n     * @param {string|undefined} textBaseline Text baseline.\n     * @api\n     */\n    Text.prototype.setTextBaseline = function (textBaseline) {\n        this.textBaseline_ = textBaseline;\n    };\n    /**\n     * Set the background fill.\n     *\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Text.prototype.setBackgroundFill = function (fill) {\n        this.backgroundFill_ = fill;\n    };\n    /**\n     * Set the background stroke.\n     *\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Text.prototype.setBackgroundStroke = function (stroke) {\n        this.backgroundStroke_ = stroke;\n    };\n    /**\n     * Set the padding (`[top, right, bottom, left]`).\n     *\n     * @param {!Array<number>} padding Padding.\n     * @api\n     */\n    Text.prototype.setPadding = function (padding) {\n        this.padding_ = padding;\n    };\n    return Text;\n}());\nexport default Text;\n//# sourceMappingURL=Text.js.map","<template>\r\n  <div class=\"wrapper\">\r\n    <div\r\n      id=\"map\"\r\n      class=\"map\"\r\n    />\r\n    <div class=\"tooltip\">\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"showCircle([119.3008804321289, 26.059913635253906])\"\r\n      >\r\n        画圆(半径500米）\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"hideCircle()\"\r\n      >\r\n        清除圆\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"addInteraction('Star')\"\r\n      >\r\n        手动画图\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"drawLineHand()\"\r\n      >\r\n        手动画线条\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"cancelDrawLineHand()\"\r\n      >\r\n        取消手动画线条\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"drawLine()\"\r\n      >\r\n        渲染线条\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"startAnimation()\"\r\n      >\r\n        动画\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"cluster()\"\r\n      >\r\n        聚合图层\r\n      </el-button>\r\n      <el-button\r\n        class=\"draw-button\"\r\n        type=\"success\"\r\n        @click=\"getCenter()\"\r\n      >\r\n        获取中心点\r\n      </el-button>\r\n    </div>\r\n    <!-- Overlay 模板弹窗的集合，外层要加一个style=\"display: none\"使得默认不显示 -->\r\n    <div style=\"display: none\">\r\n      <p\r\n        id=\"tip\"\r\n        class=\"tip\"\r\n      >\r\n        {{ tip }}\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css';\r\nimport Map from 'ol/Map';\r\nimport {getDistance} from 'ol/sphere';\r\nimport View from 'ol/View';\r\nimport {OSM, Vector as VectorSource, XYZ, Cluster} from 'ol/source';\r\nimport {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\r\nimport Feature from 'ol/Feature';\r\nimport {Point, Circle, Polygon, LineString} from 'ol/geom';\r\nimport Overlay from 'ol/Overlay';\r\nimport {transform} from 'ol/proj';\r\nimport {Style, Fill, Stroke, Circle as CircleStyle, Icon, Text} from 'ol/style';\r\nimport Draw, {createRegularPolygon, createBox} from 'ol/interaction/Draw';\r\nimport lineData from './data/line-data.json';\r\nimport {circular} from 'ol/geom/Polygon';\r\nimport videoImg from './img/ball-running.png';\r\nimport activeVideoImg from './img/ball-stop.png';\r\nexport default {\r\n  name:'MapDemo',\r\n  data() {\r\n    return {\r\n      vectorLayerList: [],\r\n      mapObject: null,\r\n      pointsList: [{'point':[119.3045711517334, 26.060256958007812], 'name':0}, {'point':[119.35881614685059, 26.061973571777344], 'name':1}, {'point':[119.31727409362793, 26.0540771484375], 'name':2}, {'point':[119.33684349060059, 26.028671264648438], 'name':3}, {'point':[119.35812950134277, 26.03485107421875], 'name':4}, {'point':[119.29530143737793, 26.06231689453125], 'name':5}, {'point':[119.26543235778809, 26.070213317871094], 'name':6}, {'point':[119.31487083435059, 26.0760498046875], 'name':7}, {'point':[119.30319786071777, 26.083602905273438], 'name':8}, {'point':[119.23761073035672, 26.062660217285156], 'name':9}, {'point':[119.23932734412625, 26.03931427001953], 'name':10}],\r\n      textPointsList: [{'point':[119.29564476013184, 26.060256958007812], 'name':0}, {'point':[119.33993339538574, 26.058883666992188], 'name':1}, {'point':[119.33169364929199, 26.03862762451172], 'name':2}, {'point':[119.27229881286621, 26.047897338867188], 'name':3}, {'point':[119.23007011413574, 26.05682373046875], 'name':4}, {'point':[119.20844078063965, 26.059913635253906], 'name':5}, {'point':[119.28774833679199, 26.068153381347656], 'name':6}, {'point':[119.34988975524902, 26.065750122070312], 'name':7}, {'point':[119.33341026306152, 26.029701232910156], 'name':8}, {'point':[119.30766105651855, 26.03107452392578], 'name':9}, {'point':[119.27298545837402, 26.037940979003906], 'name':10}, {'point':[119.24002647399902, 26.05030059814453], 'name':11}, {'point':[119.2884349822998, 26.067123413085938], 'name':12}],\r\n      activePointsList: [],\r\n      drawSource: null,\r\n      draw: null,\r\n      drawVector: null,\r\n      tip: '',\r\n      overlaySet: {}, // overlay集合\r\n      handDraw:null,\r\n      now: null,\r\n      speed: 60,\r\n      geoMarker:null,\r\n      animating:false,\r\n      wgs84Sphere:null,\r\n      center: [119.30122375488281, 26.066436767578125], //[-26924713.90236847, 2813379.48157834]\r\n      clickPointSet:[]\r\n    };\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created: function () {\r\n    this.$emit('setCode', '/demo/map-demo.vue');\r\n    this.$emit('setInfo', `原生地图demo (demo/map-demo.vue)\r\n      该demo瓦片在外网环境下，福州区域\r\n    `);\r\n\r\n  },\r\n  mounted: function () {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    /**\r\n       * 页面初始化\r\n       * */\r\n    init() {\r\n      this.initMap();\r\n      this.initMapEvent();\r\n      this.showLocationPoint();\r\n    },\r\n    /**\r\n       * 初始化地图\r\n       * */\r\n    initMap() {\r\n\r\n      this.drawSource = new VectorSource({\r\n        wrapX: false,\r\n      });\r\n\r\n      this.drawVector = new VectorLayer({\r\n        source: this.drawSource\r\n      });\r\n      this.markerSource = new VectorSource({\r\n        wrapX: false,\r\n      });\r\n\r\n      this.markerVector = new VectorLayer({\r\n        source: this.markerSource,\r\n      });\r\n\r\n      this.mapObject = new Map({\r\n        target: 'map',\r\n        layers: [\r\n          new TileLayer({\r\n            source: new OSM({\r\n              url: 'https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png' +\r\n                  '?apikey=0e6fc415256d4fbb9b5166a718591d71'\r\n            })\r\n          }),\r\n          this.drawVector,\r\n          this.markerVector\r\n        ],\r\n        view: new View({\r\n          center: this.center,\r\n          zoom: 12,\r\n          projection:'EPSG:4326'\r\n        })\r\n      });\r\n    },\r\n    formatLength(linePoints) {\r\n\r\n      //定义长度变量\r\n      // let length;\r\n      // //如果大地测量复选框被勾选，则计算球面距离\r\n      // if (geodesicCheckbox.checked) {\r\n      //   //Return the coordinates of the linestring.\r\n      //   //获取坐标串\r\n      //   let coordinates = line.getCoordinates();\r\n      //   //初始长度为0\r\n      //   length = 0;\r\n      //   //获取源数据的坐标系\r\n      let sourceProj = this.mapObject.getView().getProjection();\r\n      let length = 0;\r\n      //进行点的坐标转换\r\n      for (let i = 0; i < linePoints.length - 1; i++) {\r\n        //第一个点\r\n        let c1 = transform(linePoints[i], sourceProj, 'EPSG:4326');\r\n        //第二个点\r\n        let c2 = transform(linePoints[i + 1], sourceProj, 'EPSG:4326');\r\n        //获取转换后的球面距离\r\n        //Returns the distance from c1 to c2 using the haversine formula.\r\n        length += getDistance(c1, c2);\r\n      }\r\n      console.log(length);\r\n      this.$message.success(parseInt(length) + 'meter');\r\n      // } else {\r\n      //   //Return the length of the linestring on projected plane.\r\n      //   //计算平面距离\r\n      //   length = Math.round(line.getLength() * 100) / 100;\r\n      // }\r\n      // //定义输出变量\r\n      // let output;\r\n      // //如果长度大于1000，则使用km单位，否则使用m单位\r\n      // if (length > 1000) {\r\n      //   output = (Math.round(length / 1000 * 100) / 100) + ' ' + 'km'; //换算成KM单位\r\n      // } else {\r\n      //   output = (Math.round(length * 100) / 100) + ' ' + 'm'; //m为单位\r\n      // }\r\n      // return output;\r\n    },\r\n    /**\r\n       * 初始化地图事件\r\n       * */\r\n    initMapEvent() {\r\n      // 单击\r\n      this.mapObject.on('click', this.mapObjectClick);\r\n      // 悬浮\r\n      this.mapObject.on('pointermove', this.mapObjectPointerMove);\r\n    },\r\n    /**\r\n       * 悬浮\r\n       */\r\n    mapObjectPointerMove(evt) {\r\n      if (this.mapObject.hasFeatureAtPixel(evt.pixel)) {\r\n        this.mapObject.getTargetElement().style.cursor = 'pointer';\r\n      } else {\r\n        this.mapObject.getTargetElement().style.cursor = '';\r\n      }\r\n\r\n      let features = this.mapObject.getFeaturesAtPixel(evt.pixel);\r\n      let coors = this.mapObject.getCoordinateFromPixel(evt.pixel);\r\n      let flag = this.mapObject.hasFeatureAtPixel(evt.pixel);\r\n      if (features && features.length) {\r\n        let property = features[0].getProperties();\r\n        if (property && property.name) {\r\n          this.showTipModel(coors, property.name);\r\n        }\r\n      } else {\r\n        this.hideModel('tip');\r\n      }\r\n    },\r\n    /**\r\n       * 隐藏地图人员弹窗\r\n       *\r\n       */\r\n    hideModel(id) {\r\n      this.mapObject.removeOverlay(this.overlaySet[id]);\r\n    },\r\n    /**\r\n       * 显示属性标签\r\n       * */\r\n    showTipModel(coors, name) {\r\n      this.tip = name;\r\n      this.showModel({\r\n        point: coors,\r\n        type: 'tip'\r\n      }, 'tip', false);\r\n    },\r\n    /**\r\n       * 显示地图弹窗\r\n       * option:{\r\n          point:linePoint.point,坐标\r\n        }\r\n       id:弹窗ID\r\n       isSetCenter:点位是否移动到地图中间\r\n       */\r\n    showModel(option, id, isSetCenter = true) {\r\n      let currentOverlay = this.overlaySet[id];\r\n      //overlay\r\n      if (!currentOverlay) {\r\n        currentOverlay = new Overlay({\r\n          offset: [10, 0],\r\n          element: document.getElementById(id),\r\n          autoPan: true,\r\n          autoPanAnimation: {\r\n            duration: 250\r\n          }\r\n        });\r\n        this.overlaySet[id] = currentOverlay;\r\n      }\r\n      this.mapObject.addOverlay(currentOverlay);\r\n      currentOverlay.setPosition(option.point);\r\n      if (isSetCenter) {\r\n        let size = (this.mapObject.getSize());\r\n        let offsetHeight = 200;\r\n        this.view.centerOn(option.point, size, [(size[0] / 2), (size[1] / 2) - offsetHeight]);\r\n      }\r\n    },\r\n    /**\r\n       * 显示点位\r\n       * */\r\n    showLocationPoint() {\r\n      this.showVectorLayer('location');\r\n      this.vectorLayerList['location'].setStyle(new Style({\r\n        image: new Icon({\r\n          src: videoImg,\r\n          scale: 1,\r\n        }),\r\n      }));\r\n      for (let point of this.pointsList) {\r\n        let pointFeature = this.getPointFeature(point.point);\r\n        pointFeature.setProperties(point);\r\n        this.vectorLayerList['location'].getSource().addFeature(pointFeature);\r\n        point.feature = pointFeature;\r\n      }\r\n    },\r\n    /**\r\n       * 显示重叠字体图标\r\n       * */\r\n    showTextPoint() {\r\n      for (let point of this.textPointsList) {\r\n        this.showVectorLayer('text' + point.name);\r\n        let pointFeature = this.getTextPointFeature(point.point, point.name);\r\n        pointFeature.setProperties(point);\r\n        this.vectorLayerList['text' + point.name].getSource().addFeature(pointFeature);\r\n        point.feature = pointFeature;\r\n      }\r\n    },\r\n    /**\r\n       * 渲染圆\r\n       * */\r\n    showCircle(coord) {\r\n      this.showVectorLayer('circle');\r\n      let circleFeature = this.getCircleFeature(coord, 500);\r\n      this.vectorLayerList['circle'].getSource().addFeature(circleFeature);\r\n      let geometry = circleFeature.getGeometry();\r\n      this.showHightPoint(geometry);\r\n    },\r\n    /**\r\n       * 隐藏圆\r\n       *\r\n       * */\r\n    hideCircle(){\r\n      this.hideVectorLayer('circle');\r\n      for (let feature of this.activePointsList) {\r\n        feature.setStyle(null);\r\n      }\r\n      this.activePointsList = [];\r\n    },\r\n    /**\r\n       * 高亮显示点位\r\n       * */\r\n    showHightPoint(geometry) {\r\n      for (let point of this.pointsList) {\r\n        let isInside = geometry.intersectsCoordinate(point.point);\r\n        if (isInside) {\r\n          if(this.activePointsList.indexOf(point.feature) === -1){\r\n            point.feature.setStyle(new Style({\r\n              image: new Icon({\r\n                src: activeVideoImg,\r\n                scale: 1,\r\n              }),\r\n            }));\r\n            this.activePointsList.push(point.feature);\r\n          }\r\n          console.log(this.activePointsList);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n       * 隐藏图层\r\n       */\r\n    hideVectorLayer(vectorId) {\r\n      if (this.vectorLayerList[vectorId]) {\r\n        let features = this.vectorLayerList[vectorId].getSource().getFeatures();\r\n        for(let feature of features){\r\n          this.vectorLayerList[vectorId].getSource().removeFeature(feature);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n       * 点击事件\r\n       * */\r\n    mapObjectClick(evt) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      let features = this.mapObject.getFeaturesAtPixel(evt.pixel);\r\n      let coors = this.mapObject.getCoordinateFromPixel(evt.pixel);\r\n      this.clickPointSet.push({\r\n        point:coors,\r\n        name:this.clickPointSet.length\r\n      });\r\n      console.log(JSON.stringify(this.clickPointSet));\r\n      let flag = this.mapObject.hasFeatureAtPixel(evt.pixel);\r\n    },\r\n    /**\r\n       * 获取点位图标\r\n       * point:[x,y]\r\n       * return:Feature\r\n       * */\r\n    getPointFeature(point) {\r\n      let pointGeo = new Point(point);\r\n      let pointFeature = new Feature({\r\n        geometry: pointGeo,\r\n        name: 'point'\r\n      });\r\n      return pointFeature;\r\n    },\r\n    /**\r\n       * 获取字体点位图标\r\n       * point:[x,y]\r\n       * return:Feature\r\n       * */\r\n    getTextPointFeature(point, text) {\r\n      let pointGeo = new Point(point);\r\n      let pointFeature = new Feature({\r\n        geometry: pointGeo,\r\n        name: 'point'\r\n      });\r\n      pointFeature.setStyle(new Style({\r\n        image: new Icon({\r\n          src: videoImg,\r\n          scale: 1,\r\n        }),\r\n        text:new Text({\r\n          font:'normal 19px Microsoft Yahei',\r\n          text,\r\n          fill:new Fill({\r\n            color:'#000'\r\n          })\r\n        })\r\n      }));\r\n      return pointFeature;\r\n    },\r\n    /**\r\n       * 获取圆形Feature\r\n       * point:[x,y]\r\n       * return:Feature\r\n       * */\r\n    getCircleFeature(point, radius) {\r\n      let pointGeo = new circular(point, radius, 64);\r\n      let feature = new Feature({\r\n        geometry: pointGeo,\r\n        name: 'circle'\r\n      });\r\n      feature.setStyle(new Style({\r\n        fill: new Fill({\r\n          color: 'rgba(230,135,23,0.5)'\r\n        }),\r\n        stroke: new Stroke({\r\n          color: '#e68717'\r\n        })\r\n      }));\r\n      return feature;\r\n    },\r\n    /**\r\n       * 显示图层\r\n       * */\r\n    showVectorLayer(type) {\r\n      let oVectorLayer = this.vectorLayerList[type];\r\n      if (oVectorLayer) {\r\n        // 已有了该图层  则显示\r\n        oVectorLayer.setVisible(true);\r\n        return;\r\n      }\r\n      // 没有该图层   创建图层\r\n      oVectorLayer = this.createVectorLayer();\r\n      this.vectorLayerList[type] = oVectorLayer;\r\n      this.mapObject.addLayer(this.vectorLayerList[type]);\r\n    },\r\n    /**\r\n       * 创建VectorLayer\r\n       * */\r\n    createVectorLayer() {\r\n      let oVectorSource = new VectorSource();\r\n      let oVectorLayer = new VectorLayer({\r\n        source: oVectorSource\r\n      });\r\n      return oVectorLayer;\r\n    },\r\n    /**\r\n       * 画图形\r\n       * @param value\r\n       */\r\n    addInteraction(value) {\r\n      if (value === 'None') {\r\n        this.draw.finishDrawing();\r\n        this.mapObject.removeInteraction(this.draw);\r\n        return;\r\n      }\r\n      let geometryFunction;\r\n      if (value === 'Square') {\r\n        value = 'Circle';\r\n        geometryFunction = createRegularPolygon(4);\r\n      } else if (value === 'Box') {\r\n        value = 'Circle';\r\n        geometryFunction = createBox();\r\n      } else if (value === 'Star') {\r\n        value = 'Circle';\r\n        geometryFunction = function (coordinates, geometry) {\r\n          let center = coordinates[0];\r\n          let last = coordinates[1];\r\n          let dx = center[0] - last[0];\r\n          let dy = center[1] - last[1];\r\n          let radius = Math.sqrt(dx * dx + dy * dy);\r\n          let rotation = Math.atan2(dy, dx);\r\n          let newCoordinates = [];\r\n          let numPoints = 12;\r\n          for (let i = 0; i < numPoints; ++i) {\r\n            let angle = rotation + i * 2 * Math.PI / numPoints;\r\n            let fraction;\r\n            if(i % 2 === 0){\r\n              fraction = 1;\r\n            }else{\r\n              fraction = 0.5;\r\n            }\r\n            let offsetX = radius * fraction * Math.cos(angle);\r\n            let offsetY = radius * fraction * Math.sin(angle);\r\n            newCoordinates.push([center[0] + offsetX, center[1] + offsetY]);\r\n          }\r\n          newCoordinates.push(newCoordinates[0].slice());\r\n          if (!geometry) {\r\n            geometry = new Polygon([newCoordinates]);\r\n          } else {\r\n            geometry.setCoordinates([newCoordinates]);\r\n          }\r\n          return geometry;\r\n        };\r\n      }\r\n      this.draw = new Draw({\r\n        source: this.drawSource,\r\n        type: value,\r\n        geometryFunction: geometryFunction\r\n      });\r\n      this.mapObject.addInteraction(this.draw);\r\n      this.draw.on('drawend', (event) => {\r\n        let geo = event.feature.getGeometry();\r\n        this.showHightPoint(geo);\r\n      });\r\n    },\r\n    /**\r\n       * 手动划线\r\n       * */\r\n    drawLineHand(){\r\n      this.handDraw = new Draw({\r\n        source: this.drawSource,\r\n        type: 'LineString',\r\n        freehand: true\r\n      });\r\n      this.handDraw.on('drawend', (event) => {\r\n        let geo = event.feature.getGeometry();\r\n        let linePoints = geo.getCoordinates();\r\n        console.log(JSON.stringify(linePoints));\r\n        this.formatLength(linePoints);\r\n      });\r\n      this.mapObject.addInteraction(this.handDraw);\r\n    },\r\n    cancelDrawLineHand(){\r\n      this.mapObject.removeInteraction(this.handDraw);\r\n    },\r\n    drawCar(){\r\n\r\n      const styles = {\r\n        'route': new Style({\r\n          stroke: new Stroke({\r\n            width: 6, color: [237, 212, 0, 0.8]\r\n          })\r\n        }),\r\n        'icon': new Style({\r\n          image: new Icon({\r\n            anchor: [0.5, 1],\r\n            src: 'data/icon.png'\r\n          })\r\n        }),\r\n        'geoMarker': new Style({\r\n          image: new CircleStyle({\r\n            radius: 7,\r\n            fill: new Fill({color: 'black'}),\r\n            stroke: new Stroke({\r\n              color: 'white', width: 2\r\n            })\r\n          })\r\n        })\r\n      };\r\n      this.geoMarker = new Feature({\r\n        type: 'geoMarker',\r\n        geometry: new Point(lineData[0])\r\n      });\r\n      this.markerSource.addFeature(this.geoMarker);\r\n      this.markerVector.setStyle((feature) =>{\r\n        // hide geoMarker if animation is active\r\n        if (this.animating && feature.get('type') === 'geoMarker') {\r\n          return null;\r\n        }\r\n        return styles[feature.get('type')];\r\n      });\r\n    },\r\n    /**\r\n       * 渲染线\r\n       * */\r\n    drawLine(){\r\n      let lineFeature = this.createLineFeature(lineData);\r\n      var a = [];\r\n      a = lineFeature.getGeometry().getCoordinateAt(0.5);\r\n      // for (var i=0; i<=a.length; i++) {\r\n      //   console.log(\"x: \" + a[i].x + \",y: \" + a[i].y);\r\n      // }\r\n      console.log(a);\r\n      this.drawSource.addFeature(lineFeature);\r\n    },\r\n    /**\r\n       * 停止动画\r\n       * @param {boolean} ended end of animation.\r\n       */\r\n    stopAnimation(ended) {\r\n      this.animating = false;\r\n      let coord;\r\n      if(ended){\r\n        coord = lineData[lineData.length - 1];\r\n      }else{\r\n        coord = lineData[0];\r\n      }\r\n      const geometry = /** @type {import(\"../src/ol/geom/Point\").default} */ (this.geoMarker.getGeometry());\r\n      geometry.setCoordinates(coord);\r\n      console.log(coord);\r\n      //remove listener\r\n      this.mapObject.un('postrender', this.moveFeature);\r\n    },\r\n    /**\r\n       * postcompose动画事件\r\n       * */\r\n    moveFeature (event) {\r\n      const vectorContext = event.vectorContext;\r\n      const frameState = event.frameState;\r\n      if (!this.animating) {\r\n        this.mapObject.render();\r\n        return;\r\n      }\r\n      const elapsedTime = frameState.time - this.now;\r\n      // here the trick to increase speed is to jump some indexes\r\n      // on lineString coordinates\r\n      const index = Math.round(this.speed * elapsedTime / 1000);\r\n      if (index >= lineData.length) {\r\n        this.stopAnimation(true);\r\n        return;\r\n      }\r\n      let coord = lineData[index];\r\n      this.hideVectorLayer('circle');\r\n      this.showCircle(coord);\r\n      const currentPoint = new Point(coord);\r\n      const feature = new Feature(currentPoint);\r\n      vectorContext.drawFeature(feature, new Style({\r\n        image: new CircleStyle({\r\n          radius: 7,\r\n          fill: new Fill({color: 'black'}),\r\n          stroke: new Stroke({\r\n            color: 'white', width: 2\r\n          })\r\n        })\r\n      }));\r\n      // tell OpenLayers to continue the postrender animation\r\n      this.mapObject.render();\r\n    },\r\n    /**\r\n       * 开始动画\r\n       * */\r\n    startAnimation(){\r\n      if(this.animating){\r\n        this.stopAnimation(false);\r\n        return;\r\n      }\r\n\r\n      this.showLocationPoint();\r\n      this.drawLine();\r\n      this.drawCar();\r\n      this.animating = true;\r\n      this.now = new Date().getTime();\r\n      this.geoMarker.setStyle(null);\r\n      // just in case you pan somewhere else\r\n      // this.mapObject.getView().setCenter([-472202, 7530279]);\r\n      this.mapObject.on('postcompose', (event)=>{\r\n        this.moveFeature(event);\r\n      });\r\n      this.mapObject.render();\r\n    },\r\n    /**\r\n       * 创建线路Feature\r\n       * @param linePoints 线路点位数组\r\n       * @param styleOption 样式\r\n       * */\r\n    createLineFeature(linePoints, styleOption, text){\r\n      return new Feature({\r\n        geometry: new LineString(linePoints)\r\n      });\r\n    },\r\n    cluster(){\r\n      const features = new Array(this.textPointsList.length);\r\n\r\n      for (let i = 0; i < this.textPointsList.length; ++i) {\r\n        features[i] = new Feature(new Point(this.textPointsList[i].point));\r\n      }\r\n      const source = new VectorSource({\r\n        features: features\r\n      });\r\n      const clusterSource = new Cluster({\r\n        distance:50,\r\n        source: source\r\n      });\r\n      const styleCache = {};\r\n      const clusters = new VectorLayer({\r\n        source: clusterSource,\r\n        style: function(feature) {\r\n          const size = feature.get('features').length;\r\n          let style = styleCache[size];\r\n          if (!style) {\r\n            style = new Style({\r\n              image: new CircleStyle({\r\n                radius: 10,\r\n                stroke: new Stroke({\r\n                  color: '#fff'\r\n                }),\r\n                fill: new Fill({\r\n                  color: '#3399CC'\r\n                })\r\n              }),\r\n              text: new Text({\r\n                text: size.toString(),\r\n                fill: new Fill({\r\n                  color: '#fff'\r\n                })\r\n              })\r\n            });\r\n            styleCache[size] = style;\r\n          }\r\n          return style;\r\n        }\r\n      });\r\n      console.log(clusters);\r\n      this.mapObject.addLayer(clusters);\r\n    },\r\n    getCenter(){\r\n      let center = this.mapObject.getView().getCenter();\r\n      console.log(center);\r\n      this.$message.success(JSON.stringify(center));\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped lang=\"less\">\r\n  .wrapper{\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    min-height: 500px;\r\n  }\r\n  .map{\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .draw-button {\r\n\r\n  }\r\n\r\n  .tooltip {\r\n    position: absolute;\r\n    top: 50px;\r\n    left: 50px;\r\n  }\r\n\r\n  .tip {\r\n    background-color: #deeffe;\r\n    display: inline-block;\r\n    padding: 0 10px;\r\n    border: #2584dd 1px solid;\r\n    font-size: 14px;\r\n    color: #000;\r\n    border-radius: 3px;\r\n  }\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./map-demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./map-demo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./map-demo.vue?vue&type=template&id=5a998970&scoped=true&\"\nimport script from \"./map-demo.vue?vue&type=script&lang=js&\"\nexport * from \"./map-demo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./map-demo.vue?vue&type=style&index=0&id=5a998970&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a998970\",\n  null\n  \n)\n\nexport default component.exports","/**\n * @module ol/style/Style\n */\nimport { assert } from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled. If the function returns `undefined`, the\n * feature will not be rendered.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>|void)} StyleFunction\n */\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n *\n * @api\n */\nvar Style = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Style options.\n     */\n    function Style(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n         */\n        this.geometry_ = null;\n        /**\n         * @private\n         * @type {!GeometryFunction}\n         */\n        this.geometryFunction_ = defaultGeometryFunction;\n        if (options.geometry !== undefined) {\n            this.setGeometry(options.geometry);\n        }\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n           * @private\n           * @type {import(\"./Image.js\").default}\n           */\n        this.image_ = options.image !== undefined ? options.image : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"./Text.js\").default}\n         */\n        this.text_ = options.text !== undefined ? options.text : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zIndex_ = options.zIndex;\n    }\n    /**\n     * Clones the style.\n     * @return {Style} The cloned style.\n     * @api\n     */\n    Style.prototype.clone = function () {\n        var geometry = this.getGeometry();\n        if (geometry && typeof geometry === 'object') {\n            geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n        }\n        return new Style({\n            geometry: geometry,\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            image: this.getImage() ? this.getImage().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            text: this.getText() ? this.getText().clone() : undefined,\n            zIndex: this.getZIndex()\n        });\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setRenderer} or the `renderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n     * and `image` options of the style will be ignored.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setRenderer = function (renderer) {\n        this.renderer_ = renderer;\n    };\n    /**\n     * Get the geometry to be rendered.\n     * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     * Feature property or geometry or function that returns the geometry that will\n     * be rendered with this style.\n     * @api\n     */\n    Style.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    /**\n     * Get the function used to generate a geometry for rendering.\n     * @return {!GeometryFunction} Function that is called with a feature\n     * and returns the geometry to render instead of the feature's geometry.\n     * @api\n     */\n    Style.prototype.getGeometryFunction = function () {\n        return this.geometryFunction_;\n    };\n    /**\n     * Get the fill style.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Style.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Set the fill style.\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Style.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Get the image style.\n     * @return {import(\"./Image.js\").default} Image style.\n     * @api\n     */\n    Style.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Set the image style.\n     * @param {import(\"./Image.js\").default} image Image style.\n     * @api\n     */\n    Style.prototype.setImage = function (image) {\n        this.image_ = image;\n    };\n    /**\n     * Get the stroke style.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Style.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Set the stroke style.\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Style.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Get the text style.\n     * @return {import(\"./Text.js\").default} Text style.\n     * @api\n     */\n    Style.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Set the text style.\n     * @param {import(\"./Text.js\").default} text Text style.\n     * @api\n     */\n    Style.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Get the z-index for the style.\n     * @return {number|undefined} ZIndex.\n     * @api\n     */\n    Style.prototype.getZIndex = function () {\n        return this.zIndex_;\n    };\n    /**\n     * Set a geometry that is rendered instead of the feature's geometry.\n     *\n     * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n     *     Feature property or geometry or function returning a geometry to render\n     *     for this style.\n     * @api\n     */\n    Style.prototype.setGeometry = function (geometry) {\n        if (typeof geometry === 'function') {\n            this.geometryFunction_ = geometry;\n        }\n        else if (typeof geometry === 'string') {\n            this.geometryFunction_ = function (feature) {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry)));\n            };\n        }\n        else if (!geometry) {\n            this.geometryFunction_ = defaultGeometryFunction;\n        }\n        else if (geometry !== undefined) {\n            this.geometryFunction_ = function () {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (geometry));\n            };\n        }\n        this.geometry_ = geometry;\n    };\n    /**\n     * Set the z-index.\n     *\n     * @param {number|undefined} zIndex ZIndex.\n     * @api\n     */\n    Style.prototype.setZIndex = function (zIndex) {\n        this.zIndex_ = zIndex;\n    };\n    return Style;\n}());\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n    var styleFunction;\n    if (typeof obj === 'function') {\n        styleFunction = obj;\n    }\n    else {\n        /**\n         * @type {Array<Style>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof /** @type {?} */ (obj).getZIndex === 'function', 41); // Expected an `Style` or an array of `Style`\n            var style = /** @type {Style} */ (obj);\n            styles_1 = [style];\n        }\n        styleFunction = function () {\n            return styles_1;\n        };\n    }\n    return styleFunction;\n}\n/**\n * @type {Array<Style>}\n */\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n    // We don't use an immediately-invoked function\n    // and a closure so we don't get an error at script evaluation time in\n    // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n    // canvas.getContext('2d') at construction time, which will cause an.error\n    // in such browsers.)\n    if (!defaultStyles) {\n        var fill = new Fill({\n            color: 'rgba(255,255,255,0.4)'\n        });\n        var stroke = new Stroke({\n            color: '#3399CC',\n            width: 1.25\n        });\n        defaultStyles = [\n            new Style({\n                image: new CircleStyle({\n                    fill: fill,\n                    stroke: stroke,\n                    radius: 5\n                }),\n                fill: fill,\n                stroke: stroke\n            })\n        ];\n    }\n    return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n    /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n    var styles = {};\n    var white = [255, 255, 255, 1];\n    var blue = [0, 153, 255, 1];\n    var width = 3;\n    styles[GeometryType.POLYGON] = [\n        new Style({\n            fill: new Fill({\n                color: [255, 255, 255, 0.5]\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_POLYGON] =\n        styles[GeometryType.POLYGON];\n    styles[GeometryType.LINE_STRING] = [\n        new Style({\n            stroke: new Stroke({\n                color: white,\n                width: width + 2\n            })\n        }),\n        new Style({\n            stroke: new Stroke({\n                color: blue,\n                width: width\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_LINE_STRING] =\n        styles[GeometryType.LINE_STRING];\n    styles[GeometryType.CIRCLE] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING]);\n    styles[GeometryType.POINT] = [\n        new Style({\n            image: new CircleStyle({\n                radius: width * 2,\n                fill: new Fill({\n                    color: blue\n                }),\n                stroke: new Stroke({\n                    color: white,\n                    width: width / 2\n                })\n            }),\n            zIndex: Infinity\n        })\n    ];\n    styles[GeometryType.MULTI_POINT] =\n        styles[GeometryType.POINT];\n    styles[GeometryType.GEOMETRY_COLLECTION] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n    return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n    return feature.getGeometry();\n}\nexport default Style;\n//# sourceMappingURL=Style.js.map","/**\n * @module ol/style/IconImage\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createCanvasContext2D } from '../dom.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\nvar IconImage = /** @class */ (function (_super) {\n    __extends(IconImage, _super);\n    /**\n     * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n     * @param {string|undefined} src Src.\n     * @param {import(\"../size.js\").Size} size Size.\n     * @param {?string} crossOrigin Cross origin.\n     * @param {import(\"../ImageState.js\").default} imageState Image state.\n     * @param {import(\"../color.js\").Color} color Color.\n     */\n    function IconImage(image, src, size, crossOrigin, imageState, color) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.hitDetectionImage_ = null;\n        /**\n         * @private\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        _this.image_ = !image ? new Image() : image;\n        if (crossOrigin !== null) {\n            /** @type {HTMLImageElement} */ (_this.image_).crossOrigin = crossOrigin;\n        }\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = color ? document.createElement('canvas') : null;\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = color;\n        /**\n         * @private\n         * @type {?function():void}\n         */\n        _this.unlisten_ = null;\n        /**\n         * @private\n         * @type {import(\"../ImageState.js\").default}\n         */\n        _this.imageState_ = imageState;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = size;\n        /**\n         * @private\n         * @type {string|undefined}\n         */\n        _this.src_ = src;\n        /**\n         * @private\n         * @type {boolean|undefined}\n         */\n        _this.tainted_;\n        return _this;\n    }\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D=} context A context with the image already drawn into.\n     * @return {boolean} The image canvas is tainted.\n     */\n    IconImage.prototype.isTainted_ = function (context) {\n        if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n            if (!context) {\n                context = createCanvasContext2D(1, 1);\n                context.drawImage(this.image_, 0, 0);\n            }\n            try {\n                context.getImageData(0, 0, 1, 1);\n                this.tainted_ = false;\n            }\n            catch (e) {\n                this.tainted_ = true;\n            }\n        }\n        return this.tainted_ === true;\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.dispatchChangeEvent_ = function () {\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageError_ = function () {\n        this.imageState_ = ImageState.ERROR;\n        this.unlistenImage_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.handleImageLoad_ = function () {\n        this.imageState_ = ImageState.LOADED;\n        if (this.size_) {\n            this.image_.width = this.size_[0];\n            this.image_.height = this.size_[1];\n        }\n        this.size_ = [this.image_.width, this.image_.height];\n        this.unlistenImage_();\n        this.replaceColor_();\n        this.dispatchChangeEvent_();\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     */\n    IconImage.prototype.getImage = function (pixelRatio) {\n        return this.canvas_ ? this.canvas_ : this.image_;\n    };\n    /**\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    IconImage.prototype.getImageState = function () {\n        return this.imageState_;\n    };\n    /**\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n     */\n    IconImage.prototype.getHitDetectionImage = function (pixelRatio) {\n        if (!this.hitDetectionImage_) {\n            if (this.isTainted_()) {\n                var width = this.size_[0];\n                var height = this.size_[1];\n                var context = createCanvasContext2D(width, height);\n                context.fillRect(0, 0, width, height);\n                this.hitDetectionImage_ = context.canvas;\n            }\n            else {\n                this.hitDetectionImage_ = this.image_;\n            }\n        }\n        return this.hitDetectionImage_;\n    };\n    /**\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    IconImage.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * @return {string|undefined} Image src.\n     */\n    IconImage.prototype.getSrc = function () {\n        return this.src_;\n    };\n    /**\n     * Load not yet loaded URI.\n     */\n    IconImage.prototype.load = function () {\n        if (this.imageState_ == ImageState.IDLE) {\n            this.imageState_ = ImageState.LOADING;\n            try {\n                /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n            }\n            catch (e) {\n                this.handleImageError_();\n            }\n            this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n        }\n    };\n    /**\n     * @private\n     */\n    IconImage.prototype.replaceColor_ = function () {\n        if (!this.color_) {\n            return;\n        }\n        this.canvas_.width = this.image_.width;\n        this.canvas_.height = this.image_.height;\n        var ctx = this.canvas_.getContext('2d');\n        ctx.drawImage(this.image_, 0, 0);\n        if (this.isTainted_(ctx)) {\n            // If reading from the canvas throws a SecurityError the same effect can be\n            // achieved with globalCompositeOperation.\n            // This could be used as the default, but it is not fully supported by all\n            // browsers. E. g. Internet Explorer 11 does not support the multiply\n            // operation and the resulting image shape will be completelly filled with\n            // the provided color.\n            // So this is only used as a fallback. It is still better than having no icon\n            // at all.\n            var c = this.color_;\n            ctx.globalCompositeOperation = 'multiply';\n            ctx.fillStyle = 'rgb(' + c[0] + ',' + c[1] + ',' + c[2] + ')';\n            ctx.fillRect(0, 0, this.image_.width, this.image_.height);\n            ctx.globalCompositeOperation = 'destination-in';\n            ctx.drawImage(this.image_, 0, 0);\n            return;\n        }\n        var imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n        var data = imgData.data;\n        var r = this.color_[0] / 255.0;\n        var g = this.color_[1] / 255.0;\n        var b = this.color_[2] / 255.0;\n        for (var i = 0, ii = data.length; i < ii; i += 4) {\n            data[i] *= r;\n            data[i + 1] *= g;\n            data[i + 2] *= b;\n        }\n        ctx.putImageData(imgData, 0, 0);\n    };\n    /**\n     * Discards event handlers which listen for load completion or errors.\n     *\n     * @private\n     */\n    IconImage.prototype.unlistenImage_ = function () {\n        if (this.unlisten_) {\n            this.unlisten_();\n            this.unlisten_ = null;\n        }\n    };\n    return IconImage;\n}(EventTarget));\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n    var iconImage = iconImageCache.get(src, crossOrigin, color);\n    if (!iconImage) {\n        iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n        iconImageCache.set(src, crossOrigin, color, iconImage);\n    }\n    return iconImage;\n}\nexport default IconImage;\n//# sourceMappingURL=IconImage.js.map","/**\n * @module ol/style/IconOrigin\n */\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Origin is at bottom left\n     * @api\n     */\n    BOTTOM_LEFT: 'bottom-left',\n    /**\n     * Origin is at bottom right\n     * @api\n     */\n    BOTTOM_RIGHT: 'bottom-right',\n    /**\n     * Origin is at top left\n     * @api\n     */\n    TOP_LEFT: 'top-left',\n    /**\n     * Origin is at top right\n     * @api\n     */\n    TOP_RIGHT: 'top-right'\n};\n//# sourceMappingURL=IconOrigin.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/style/Icon\n */\nimport { getUid } from '../util.js';\nimport ImageState from '../ImageState.js';\nimport { assert } from '../asserts.js';\nimport { asArray } from '../color.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport { get as getIconImage } from './IconImage.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageStyle from './Image.js';\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {Array<number>} [displacement=[0,0]] Displacement the icon\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nvar Icon = /** @class */ (function (_super) {\n    __extends(Icon, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Icon(opt_options) {\n        var _this = this;\n        var options = opt_options || {};\n        /**\n         * @type {number}\n         */\n        var opacity = options.opacity !== undefined ? options.opacity : 1;\n        /**\n         * @type {number}\n         */\n        var rotation = options.rotation !== undefined ? options.rotation : 0;\n        /**\n         * @type {number}\n         */\n        var scale = options.scale !== undefined ? options.scale : 1;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ?\n            options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: opacity,\n            rotation: rotation,\n            scale: scale,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n            rotateWithView: rotateWithView\n        }) || this;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.normalizedAnchor_ = null;\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n            options.anchorOrigin : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n            options.anchorXUnits : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {import(\"./IconAnchorUnits.js\").default}\n         */\n        _this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n            options.anchorYUnits : IconAnchorUnits.FRACTION;\n        /**\n         * @private\n         * @type {?string}\n         */\n        _this.crossOrigin_ =\n            options.crossOrigin !== undefined ? options.crossOrigin : null;\n        /**\n         * @type {HTMLImageElement|HTMLCanvasElement}\n         */\n        var image = options.img !== undefined ? options.img : null;\n        /**\n         * @type {import(\"../size.js\").Size}\n         */\n        var imgSize = options.imgSize !== undefined ? options.imgSize : null;\n        /**\n         * @type {string|undefined}\n         */\n        var src = options.src;\n        assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n        assert(!image || (image && imgSize), 5); // `imgSize` must be set when `image` is provided\n        if ((src === undefined || src.length === 0) && image) {\n            src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n        }\n        assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n        /**\n         * @type {import(\"../ImageState.js\").default}\n         */\n        var imageState = options.src !== undefined ?\n            ImageState.IDLE : ImageState.LOADED;\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color}\n         */\n        _this.color_ = options.color !== undefined ? asArray(options.color) : null;\n        /**\n         * @private\n         * @type {import(\"./IconImage.js\").default}\n         */\n        _this.iconImage_ = getIconImage(image, /** @type {string} */ (src), imgSize, _this.crossOrigin_, imageState, _this.color_);\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n        /**\n         * @private\n         * @type {import(\"./IconOrigin.js\").default}\n         */\n        _this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n            options.offsetOrigin : IconOrigin.TOP_LEFT;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = options.size !== undefined ? options.size : null;\n        return _this;\n    }\n    /**\n     * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n     * @return {Icon} The cloned style.\n     * @api\n     */\n    Icon.prototype.clone = function () {\n        return new Icon({\n            anchor: this.anchor_.slice(),\n            anchorOrigin: this.anchorOrigin_,\n            anchorXUnits: this.anchorXUnits_,\n            anchorYUnits: this.anchorYUnits_,\n            crossOrigin: this.crossOrigin_,\n            color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n            src: this.getSrc(),\n            offset: this.offset_.slice(),\n            offsetOrigin: this.offsetOrigin_,\n            size: this.size_ !== null ? this.size_.slice() : undefined,\n            opacity: this.getOpacity(),\n            scale: this.getScale(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView()\n        });\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Icon.prototype.getAnchor = function () {\n        if (this.normalizedAnchor_) {\n            return this.normalizedAnchor_;\n        }\n        var anchor = this.anchor_;\n        var size = this.getSize();\n        if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n            this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n            if (!size) {\n                return null;\n            }\n            anchor = this.anchor_.slice();\n            if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n                anchor[0] *= size[0];\n            }\n            if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n                anchor[1] *= size[1];\n            }\n        }\n        if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n            if (!size) {\n                return null;\n            }\n            if (anchor === this.anchor_) {\n                anchor = this.anchor_.slice();\n            }\n            if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n                this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                anchor[0] = -anchor[0] + size[0];\n            }\n            if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                anchor[1] = -anchor[1] + size[1];\n            }\n        }\n        this.normalizedAnchor_ = anchor;\n        return this.normalizedAnchor_;\n    };\n    /**\n     * Set the anchor point. The anchor determines the center point for the\n     * symbolizer.\n     *\n     * @param {Array<number>} anchor Anchor.\n     * @api\n     */\n    Icon.prototype.setAnchor = function (anchor) {\n        this.anchor_ = anchor;\n        this.normalizedAnchor_ = null;\n    };\n    /**\n     * Get the icon color.\n     * @return {import(\"../color.js\").Color} Color.\n     * @api\n     */\n    Icon.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the image icon.\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n     * @override\n     * @api\n     */\n    Icon.prototype.getImage = function (pixelRatio) {\n        return this.iconImage_.getImage(pixelRatio);\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getImageSize = function () {\n        return this.iconImage_.getSize();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getHitDetectionImageSize = function () {\n        return this.getImageSize();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getImageState = function () {\n        return this.iconImage_.getImageState();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.getHitDetectionImage = function (pixelRatio) {\n        return this.iconImage_.getHitDetectionImage(pixelRatio);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Icon.prototype.getOrigin = function () {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        var offset = this.offset_;\n        var displacement = this.getDisplacement();\n        if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n            var size = this.getSize();\n            var iconImageSize = this.iconImage_.getSize();\n            if (!size || !iconImageSize) {\n                return null;\n            }\n            offset = offset.slice();\n            if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[0] = iconImageSize[0] - size[0] - offset[0];\n            }\n            if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n                this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n                offset[1] = iconImageSize[1] - size[1] - offset[1];\n            }\n        }\n        offset[0] += displacement[0];\n        offset[1] += displacement[1];\n        this.origin_ = offset;\n        return this.origin_;\n    };\n    /**\n     * Get the image URL.\n     * @return {string|undefined} Image src.\n     * @api\n     */\n    Icon.prototype.getSrc = function () {\n        return this.iconImage_.getSrc();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Icon.prototype.getSize = function () {\n        return !this.size_ ? this.iconImage_.getSize() : this.size_;\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.listenImageChange = function (listener) {\n        this.iconImage_.addEventListener(EventType.CHANGE, listener);\n    };\n    /**\n     * Load not yet loaded URI.\n     * When rendering a feature with an icon style, the vector renderer will\n     * automatically call this method. However, you might want to call this\n     * method yourself for preloading or other purposes.\n     * @override\n     * @api\n     */\n    Icon.prototype.load = function () {\n        this.iconImage_.load();\n    };\n    /**\n     * @override\n     */\n    Icon.prototype.unlistenImageChange = function (listener) {\n        this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n    };\n    return Icon;\n}(ImageStyle));\nexport default Icon;\n//# sourceMappingURL=Icon.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/LineString\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { interpolatePoint, lineStringCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineString } from './flat/intersectsextent.js';\nimport { lineStringLength } from './flat/length.js';\nimport { forEach as forEachSegment } from './flat/segments.js';\nimport { douglasPeucker } from './flat/simplify.js';\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nvar LineString = /** @class */ (function (_super) {\n    __extends(LineString, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {GeometryLayout=} opt_layout Layout.\n     */\n    function LineString(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        _this.flatMidpoint_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatMidpointRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed coordinate to the coordinates of the linestring.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @api\n     */\n    LineString.prototype.appendCoordinate = function (coordinate) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = coordinate.slice();\n        }\n        else {\n            extend(this.flatCoordinates, coordinate);\n        }\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!LineString} Clone.\n     * @override\n     * @api\n     */\n    LineString.prototype.clone = function () {\n        return new LineString(this.flatCoordinates.slice(), this.layout);\n    };\n    /**\n     * @inheritDoc\n     */\n    LineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Iterate over each segment, calling the provided callback.\n     * If the callback returns a truthy value the function returns that\n     * value immediately. Otherwise the function returns `false`.\n     *\n     * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n     *     called for each segment. The function will receive two arguments, the start and end coordinates of the segment.\n     * @return {T|boolean} Value.\n     * @template T,S\n     * @api\n     */\n    LineString.prototype.forEachSegment = function (callback) {\n        return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n    };\n    /**\n     * Returns the coordinate at `m` using linear interpolation, or `null` if no\n     * such coordinate exists.\n     *\n     * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n     * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n     * M will return the first coordinate and Ms greater than the last M will\n     * return the last coordinate.\n     *\n     * @param {number} m M.\n     * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    LineString.prototype.getCoordinateAtM = function (m, opt_extrapolate) {\n        if (this.layout != GeometryLayout.XYM &&\n            this.layout != GeometryLayout.XYZM) {\n            return null;\n        }\n        var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n        return lineStringCoordinateAtM(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, m, extrapolate);\n    };\n    /**\n     * Return the coordinates of the linestring.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @override\n     * @api\n     */\n    LineString.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the coordinate at the provided fraction along the linestring.\n     * The `fraction` is a number between 0 and 1, where 0 is the start of the\n     * linestring and 1 is the end.\n     * @param {number} fraction Fraction.\n     * @param {import(\"../coordinate.js\").Coordinate=} opt_dest Optional coordinate whose values will\n     *     be modified. If not provided, a new coordinate will be returned.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n     * @api\n     */\n    LineString.prototype.getCoordinateAt = function (fraction, opt_dest) {\n        return interpolatePoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, fraction, opt_dest);\n    };\n    /**\n     * Return the length of the linestring on projected plane.\n     * @return {number} Length (on projected plane).\n     * @api\n     */\n    LineString.prototype.getLength = function () {\n        return lineStringLength(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * @return {Array<number>} Flat midpoint.\n     */\n    LineString.prototype.getFlatMidpoint = function () {\n        if (this.flatMidpointRevision_ != this.getRevision()) {\n            this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n            this.flatMidpointRevision_ = this.getRevision();\n        }\n        return this.flatMidpoint_;\n    };\n    /**\n     * @inheritDoc\n     */\n    LineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n        return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    LineString.prototype.getType = function () {\n        return GeometryType.LINE_STRING;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    LineString.prototype.intersectsExtent = function (extent) {\n        return intersectsLineString(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the linestring.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    LineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return LineString;\n}(SimpleGeometry));\nexport default LineString;\n//# sourceMappingURL=LineString.js.map","/**\n * @module ol/style/IconAnchorUnits\n */\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n    /**\n     * Anchor is a fraction\n     * @api\n     */\n    FRACTION: 'fraction',\n    /**\n     * Anchor is in pixels\n     * @api\n     */\n    PIXELS: 'pixels'\n};\n//# sourceMappingURL=IconAnchorUnits.js.map","/**\n * @module ol/style/Fill\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Fill(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n    }\n    /**\n     * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n     * @return {Fill} The cloned style.\n     * @api\n     */\n    Fill.prototype.clone = function () {\n        var color = this.getColor();\n        return new Fill({\n            color: Array.isArray(color) ? color.slice() : color || undefined\n        });\n    };\n    /**\n     * Get the fill color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Fill.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Fill.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    return Fill;\n}());\nexport default Fill;\n//# sourceMappingURL=Fill.js.map","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAACK0lEQVQokX2ST0iTcRzGP+/7WzhSXydjTirXYW06KmchhAPRLpWQBSIEFaMOHQLpUNEhPARFER5CiKBLXSIG1cllXfIghZshbShYbnZozT/vmrWFa+7P+3bQrUniA8/p+T58+T7PV/IKKtEADACnAAegA1HADzwElkqDUoWxH3hyos1d22qzYVEUABLpNNOxGG8+hVLAJeBFpbEf8F3pPSmad+9iK8zFFxge8evAWcAneQUWYO5qX5+ppWnPlqYSIvE4Qy9fpQGncMtcP+3p6OlytyKEQAjBSCDI49FRxkJhiui49toQQmCpNyFJUtXnWGxNBnoP2e3IgAy8DgT5VqNw58Mkg2PjRHcY8U8Eynq7Yx9ArwzYG+oU0HXQdcZCYc7fvkut2Ux9YyMX7g/xLhQu61aTCcBhANDyeTRZXo8Z0DRt83G6jpbLAaAVCrCxfX5JTVDMZilms3S7Wng2eJOUukwqofL0xjW6XS1lfVFVASIGwB+an29vqt4JwDGng/z0DLc6PejodDmd9Bw8QDGTAWAqEgXwS16BFZgb8HQoLmvDtnVEk0kejL//XapjFZidjH0/Y6+plkxCoOVy/zGyrDI8EdSBi0BAuNcz+QLMTi4sHu+0mKvkQgEtnyszk/3DvY9T6Q2TrxQOQDOwH5iJJ1corK5uovrzF8BX4DBwFP796uUjdcqjNqUGm9G45X2LazmimQxvf6w8B84ZSkIwlSaYSm8bTiX+Attn6x+Fv6k1AAAAAElFTkSuQmCC\"","/**\n * @module ol/style/Stroke\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Stroke(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n        /**\n         * @private\n         * @type {CanvasLineCap|undefined}\n         */\n        this.lineCap_ = options.lineCap;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.lineDashOffset_ = options.lineDashOffset;\n        /**\n         * @private\n         * @type {CanvasLineJoin|undefined}\n         */\n        this.lineJoin_ = options.lineJoin;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.miterLimit_ = options.miterLimit;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.width_ = options.width;\n    }\n    /**\n     * Clones the style.\n     * @return {Stroke} The cloned style.\n     * @api\n     */\n    Stroke.prototype.clone = function () {\n        var color = this.getColor();\n        return new Stroke({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n            lineCap: this.getLineCap(),\n            lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n            lineDashOffset: this.getLineDashOffset(),\n            lineJoin: this.getLineJoin(),\n            miterLimit: this.getMiterLimit(),\n            width: this.getWidth()\n        });\n    };\n    /**\n     * Get the stroke color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Stroke.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the line cap type for the stroke.\n     * @return {CanvasLineCap|undefined} Line cap.\n     * @api\n     */\n    Stroke.prototype.getLineCap = function () {\n        return this.lineCap_;\n    };\n    /**\n     * Get the line dash style for the stroke.\n     * @return {Array<number>} Line dash.\n     * @api\n     */\n    Stroke.prototype.getLineDash = function () {\n        return this.lineDash_;\n    };\n    /**\n     * Get the line dash offset for the stroke.\n     * @return {number|undefined} Line dash offset.\n     * @api\n     */\n    Stroke.prototype.getLineDashOffset = function () {\n        return this.lineDashOffset_;\n    };\n    /**\n     * Get the line join type for the stroke.\n     * @return {CanvasLineJoin|undefined} Line join.\n     * @api\n     */\n    Stroke.prototype.getLineJoin = function () {\n        return this.lineJoin_;\n    };\n    /**\n     * Get the miter limit for the stroke.\n     * @return {number|undefined} Miter limit.\n     * @api\n     */\n    Stroke.prototype.getMiterLimit = function () {\n        return this.miterLimit_;\n    };\n    /**\n     * Get the stroke width.\n     * @return {number|undefined} Width.\n     * @api\n     */\n    Stroke.prototype.getWidth = function () {\n        return this.width_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Stroke.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    /**\n     * Set the line cap.\n     *\n     * @param {CanvasLineCap|undefined} lineCap Line cap.\n     * @api\n     */\n    Stroke.prototype.setLineCap = function (lineCap) {\n        this.lineCap_ = lineCap;\n    };\n    /**\n     * Set the line dash.\n     *\n     * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n     * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n     * property will have no visual effect in these browsers.\n     *\n     * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n     *\n     * @param {Array<number>} lineDash Line dash.\n     * @api\n     */\n    Stroke.prototype.setLineDash = function (lineDash) {\n        this.lineDash_ = lineDash;\n    };\n    /**\n     * Set the line dash offset.\n     *\n     * @param {number|undefined} lineDashOffset Line dash offset.\n     * @api\n     */\n    Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n        this.lineDashOffset_ = lineDashOffset;\n    };\n    /**\n     * Set the line join.\n     *\n     * @param {CanvasLineJoin|undefined} lineJoin Line join.\n     * @api\n     */\n    Stroke.prototype.setLineJoin = function (lineJoin) {\n        this.lineJoin_ = lineJoin;\n    };\n    /**\n     * Set the miter limit.\n     *\n     * @param {number|undefined} miterLimit Miter limit.\n     * @api\n     */\n    Stroke.prototype.setMiterLimit = function (miterLimit) {\n        this.miterLimit_ = miterLimit;\n    };\n    /**\n     * Set the width.\n     *\n     * @param {number|undefined} width Width.\n     * @api\n     */\n    Stroke.prototype.setWidth = function (width) {\n        this.width_ = width;\n    };\n    return Stroke;\n}());\nexport default Stroke;\n//# sourceMappingURL=Stroke.js.map","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n * @property {Array<number>} displacement\n */\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nvar ImageStyle = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function ImageStyle(options) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.opacity_ = options.opacity;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.displacement_ = options.displacement;\n    }\n    /**\n     * Clones the style.\n     * @return {ImageStyle} The cloned style.\n     * @api\n     */\n    ImageStyle.prototype.clone = function () {\n        return new ImageStyle({\n            opacity: this.getOpacity(),\n            scale: this.getScale(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice()\n        });\n    };\n    /**\n     * Get the symbolizer opacity.\n     * @return {number} Opacity.\n     * @api\n     */\n    ImageStyle.prototype.getOpacity = function () {\n        return this.opacity_;\n    };\n    /**\n     * Determine whether the symbolizer rotates with the map.\n     * @return {boolean} Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the symoblizer rotation.\n     * @return {number} Rotation.\n     * @api\n     */\n    ImageStyle.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the symbolizer scale.\n     * @return {number} Scale.\n     * @api\n     */\n    ImageStyle.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the displacement of the shape\n     * @return {Array<number>} Shape's center displacement\n     * @api\n     */\n    ImageStyle.prototype.getDisplacement = function () {\n        return this.displacement_;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @abstract\n     * @return {Array<number>} Anchor.\n     */\n    ImageStyle.prototype.getAnchor = function () {\n        return abstract();\n    };\n    /**\n     * Get the image element for the symbolizer.\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getHitDetectionImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    ImageStyle.prototype.getImageState = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    ImageStyle.prototype.getImageSize = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size of the hit-detection image.\n     */\n    ImageStyle.prototype.getHitDetectionImageSize = function () {\n        return abstract();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @abstract\n     * @return {Array<number>} Origin.\n     */\n    ImageStyle.prototype.getOrigin = function () {\n        return abstract();\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size.\n     */\n    ImageStyle.prototype.getSize = function () {\n        return abstract();\n    };\n    /**\n     * Set the opacity.\n     *\n     * @param {number} opacity Opacity.\n     * @api\n     */\n    ImageStyle.prototype.setOpacity = function (opacity) {\n        this.opacity_ = opacity;\n    };\n    /**\n     * Set whether to rotate the style with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number} rotation Rotation.\n     * @api\n     */\n    ImageStyle.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number} scale Scale.\n     * @api\n     */\n    ImageStyle.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.listenImageChange = function (listener) {\n        abstract();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageStyle.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.unlistenImageChange = function (listener) {\n        abstract();\n    };\n    return ImageStyle;\n}());\nexport default ImageStyle;\n//# sourceMappingURL=Image.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/Circle\n */\nimport { createOrUpdate, forEachCorner, intersects } from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { deflateCoordinate } from './flat/deflate.js';\nimport { rotate, translate } from './flat/transform.js';\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    /**\n     * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n     *     For internal use, flat coordinates in combination with `opt_layout` and no\n     *     `opt_radius` are also accepted.\n     * @param {number=} opt_radius Radius.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     */\n    function Circle(center, opt_radius, opt_layout) {\n        var _this = _super.call(this) || this;\n        if (opt_layout !== undefined && opt_radius === undefined) {\n            _this.setFlatCoordinates(opt_layout, center);\n        }\n        else {\n            var radius = opt_radius ? opt_radius : 0;\n            _this.setCenterAndRadius(center, radius, opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!Circle} Clone.\n     * @override\n     * @api\n     */\n    Circle.prototype.clone = function () {\n        return new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        var flatCoordinates = this.flatCoordinates;\n        var dx = x - flatCoordinates[0];\n        var dy = y - flatCoordinates[1];\n        var squaredDistance = dx * dx + dy * dy;\n        if (squaredDistance < minSquaredDistance) {\n            if (squaredDistance === 0) {\n                for (var i = 0; i < this.stride; ++i) {\n                    closestPoint[i] = flatCoordinates[i];\n                }\n            }\n            else {\n                var delta = this.getRadius() / Math.sqrt(squaredDistance);\n                closestPoint[0] = flatCoordinates[0] + delta * dx;\n                closestPoint[1] = flatCoordinates[1] + delta * dy;\n                for (var i = 2; i < this.stride; ++i) {\n                    closestPoint[i] = flatCoordinates[i];\n                }\n            }\n            closestPoint.length = this.stride;\n            return squaredDistance;\n        }\n        else {\n            return minSquaredDistance;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.containsXY = function (x, y) {\n        var flatCoordinates = this.flatCoordinates;\n        var dx = x - flatCoordinates[0];\n        var dy = y - flatCoordinates[1];\n        return dx * dx + dy * dy <= this.getRadiusSquared_();\n    };\n    /**\n     * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n     * @return {import(\"../coordinate.js\").Coordinate} Center.\n     * @api\n     */\n    Circle.prototype.getCenter = function () {\n        return this.flatCoordinates.slice(0, this.stride);\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.computeExtent = function (extent) {\n        var flatCoordinates = this.flatCoordinates;\n        var radius = flatCoordinates[this.stride] - flatCoordinates[0];\n        return createOrUpdate(flatCoordinates[0] - radius, flatCoordinates[1] - radius, flatCoordinates[0] + radius, flatCoordinates[1] + radius, extent);\n    };\n    /**\n     * Return the radius of the circle.\n     * @return {number} Radius.\n     * @api\n     */\n    Circle.prototype.getRadius = function () {\n        return Math.sqrt(this.getRadiusSquared_());\n    };\n    /**\n     * @private\n     * @return {number} Radius squared.\n     */\n    Circle.prototype.getRadiusSquared_ = function () {\n        var dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n        var dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n        return dx * dx + dy * dy;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.getType = function () {\n        return GeometryType.CIRCLE;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.intersectsExtent = function (extent) {\n        var circleExtent = this.getExtent();\n        if (intersects(extent, circleExtent)) {\n            var center = this.getCenter();\n            if (extent[0] <= center[0] && extent[2] >= center[0]) {\n                return true;\n            }\n            if (extent[1] <= center[1] && extent[3] >= center[1]) {\n                return true;\n            }\n            return forEachCorner(extent, this.intersectsCoordinate.bind(this));\n        }\n        return false;\n    };\n    /**\n     * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n     * @param {import(\"../coordinate.js\").Coordinate} center Center.\n     * @api\n     */\n    Circle.prototype.setCenter = function (center) {\n        var stride = this.stride;\n        var radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n        var flatCoordinates = center.slice();\n        flatCoordinates[stride] = flatCoordinates[0] + radius;\n        for (var i = 1; i < stride; ++i) {\n            flatCoordinates[stride + i] = center[i];\n        }\n        this.setFlatCoordinates(this.layout, flatCoordinates);\n        this.changed();\n    };\n    /**\n     * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n     * number) of the circle.\n     * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n     * @param {number} radius Radius.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     * @api\n     */\n    Circle.prototype.setCenterAndRadius = function (center, radius, opt_layout) {\n        this.setLayout(opt_layout, center, 0);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        /** @type {Array<number>} */\n        var flatCoordinates = this.flatCoordinates;\n        var offset = deflateCoordinate(flatCoordinates, 0, center, this.stride);\n        flatCoordinates[offset++] = flatCoordinates[0] + radius;\n        for (var i = 1, ii = this.stride; i < ii; ++i) {\n            flatCoordinates[offset++] = flatCoordinates[i];\n        }\n        flatCoordinates.length = offset;\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.getCoordinates = function () {\n        return null;\n    };\n    /**\n     * @inheritDoc\n     */\n    Circle.prototype.setCoordinates = function (coordinates, opt_layout) { };\n    /**\n     * Set the radius of the circle. The radius is in the units of the projection.\n     * @param {number} radius Radius.\n     * @api\n     */\n    Circle.prototype.setRadius = function (radius) {\n        this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.rotate = function (angle, anchor) {\n        var center = this.getCenter();\n        var stride = this.getStride();\n        this.setCenter(rotate(center, 0, center.length, stride, angle, anchor, center));\n        this.changed();\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    Circle.prototype.translate = function (deltaX, deltaY) {\n        var center = this.getCenter();\n        var stride = this.getStride();\n        this.setCenter(translate(center, 0, center.length, stride, deltaX, deltaY, center));\n        this.changed();\n    };\n    return Circle;\n}(SimpleGeometry));\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n//# sourceMappingURL=Circle.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiLineString\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestArrayPoint, arrayMaxSquaredDelta } from './flat/closest.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { interpolatePoint, lineStringsCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineStringArray } from './flat/intersectsextent.js';\nimport { douglasPeuckerArray } from './flat/simplify.js';\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\nvar MultiLineString = /** @class */ (function (_super) {\n    __extends(MultiLineString, _super);\n    /**\n     * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n     *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n     *     combination with `opt_layout` and `opt_ends` are also accepted.)\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @param {Array<number>=} opt_ends Flat coordinate ends for internal use.\n     */\n    function MultiLineString(coordinates, opt_layout, opt_ends) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        _this.ends_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        if (Array.isArray(coordinates[0])) {\n            _this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n        }\n        else if (opt_layout !== undefined && opt_ends) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n            _this.ends_ = opt_ends;\n        }\n        else {\n            var layout = _this.getLayout();\n            var lineStrings = /** @type {Array<LineString>} */ (coordinates);\n            var flatCoordinates = [];\n            var ends = [];\n            for (var i = 0, ii = lineStrings.length; i < ii; ++i) {\n                var lineString = lineStrings[i];\n                if (i === 0) {\n                    layout = lineString.getLayout();\n                }\n                extend(flatCoordinates, lineString.getFlatCoordinates());\n                ends.push(flatCoordinates.length);\n            }\n            _this.setFlatCoordinates(layout, flatCoordinates);\n            _this.ends_ = ends;\n        }\n        return _this;\n    }\n    /**\n     * Append the passed linestring to the multilinestring.\n     * @param {LineString} lineString LineString.\n     * @api\n     */\n    MultiLineString.prototype.appendLineString = function (lineString) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = lineString.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n        }\n        this.ends_.push(this.flatCoordinates.length);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiLineString} Clone.\n     * @override\n     * @api\n     */\n    MultiLineString.prototype.clone = function () {\n        return new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiLineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * Returns the coordinate at `m` using linear interpolation, or `null` if no\n     * such coordinate exists.\n     *\n     * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n     * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n     * M will return the first coordinate and Ms greater than the last M will\n     * return the last coordinate.\n     *\n     * `opt_interpolate` controls interpolation between consecutive LineStrings\n     * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n     * will be linearly interpolated between the last coordinate of one LineString\n     * and the first coordinate of the next LineString.  If `opt_interpolate` is\n     * `false` then the function will return `null` for Ms falling between\n     * LineStrings.\n     *\n     * @param {number} m M.\n     * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n     * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n     * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n     * @api\n     */\n    MultiLineString.prototype.getCoordinateAtM = function (m, opt_extrapolate, opt_interpolate) {\n        if ((this.layout != GeometryLayout.XYM &&\n            this.layout != GeometryLayout.XYZM) ||\n            this.flatCoordinates.length === 0) {\n            return null;\n        }\n        var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n        var interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n        return lineStringsCoordinateAtM(this.flatCoordinates, 0, this.ends_, this.stride, m, extrapolate, interpolate);\n    };\n    /**\n     * Return the coordinates of the multilinestring.\n     * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n     * @override\n     * @api\n     */\n    MultiLineString.prototype.getCoordinates = function () {\n        return inflateCoordinatesArray(this.flatCoordinates, 0, this.ends_, this.stride);\n    };\n    /**\n     * @return {Array<number>} Ends.\n     */\n    MultiLineString.prototype.getEnds = function () {\n        return this.ends_;\n    };\n    /**\n     * Return the linestring at the specified index.\n     * @param {number} index Index.\n     * @return {LineString} LineString.\n     * @api\n     */\n    MultiLineString.prototype.getLineString = function (index) {\n        if (index < 0 || this.ends_.length <= index) {\n            return null;\n        }\n        return new LineString(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n    };\n    /**\n     * Return the linestrings of this multilinestring.\n     * @return {Array<LineString>} LineStrings.\n     * @api\n     */\n    MultiLineString.prototype.getLineStrings = function () {\n        var flatCoordinates = this.flatCoordinates;\n        var ends = this.ends_;\n        var layout = this.layout;\n        /** @type {Array<LineString>} */\n        var lineStrings = [];\n        var offset = 0;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n            lineStrings.push(lineString);\n            offset = end;\n        }\n        return lineStrings;\n    };\n    /**\n     * @return {Array<number>} Flat midpoints.\n     */\n    MultiLineString.prototype.getFlatMidpoints = function () {\n        var midpoints = [];\n        var flatCoordinates = this.flatCoordinates;\n        var offset = 0;\n        var ends = this.ends_;\n        var stride = this.stride;\n        for (var i = 0, ii = ends.length; i < ii; ++i) {\n            var end = ends[i];\n            var midpoint = interpolatePoint(flatCoordinates, offset, end, stride, 0.5);\n            extend(midpoints, midpoint);\n            offset = end;\n        }\n        return midpoints;\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiLineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEnds = [];\n        simplifiedFlatCoordinates.length = douglasPeuckerArray(this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0, simplifiedEnds);\n        return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiLineString.prototype.getType = function () {\n        return GeometryType.MULTI_LINE_STRING;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiLineString.prototype.intersectsExtent = function (extent) {\n        return intersectsLineStringArray(this.flatCoordinates, 0, this.ends_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the multilinestring.\n     * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    MultiLineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 2);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n        this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n        this.changed();\n    };\n    return MultiLineString;\n}(SimpleGeometry));\nexport default MultiLineString;\n//# sourceMappingURL=MultiLineString.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiPoint\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY, containsXY } from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\nvar MultiPoint = /** @class */ (function (_super) {\n    __extends(MultiPoint, _super);\n    /**\n     * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     */\n    function MultiPoint(coordinates, opt_layout) {\n        var _this = _super.call(this) || this;\n        if (opt_layout && !Array.isArray(coordinates[0])) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed point to this multipoint.\n     * @param {Point} point Point.\n     * @api\n     */\n    MultiPoint.prototype.appendPoint = function (point) {\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = point.getFlatCoordinates().slice();\n        }\n        else {\n            extend(this.flatCoordinates, point.getFlatCoordinates());\n        }\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiPoint} Clone.\n     * @override\n     * @api\n     */\n    MultiPoint.prototype.clone = function () {\n        var multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n        return multiPoint;\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPoint.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        var flatCoordinates = this.flatCoordinates;\n        var stride = this.stride;\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var squaredDistance = squaredDx(x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n            if (squaredDistance < minSquaredDistance) {\n                minSquaredDistance = squaredDistance;\n                for (var j = 0; j < stride; ++j) {\n                    closestPoint[j] = flatCoordinates[i + j];\n                }\n                closestPoint.length = stride;\n            }\n        }\n        return minSquaredDistance;\n    };\n    /**\n     * Return the coordinates of the multipoint.\n     * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n     * @override\n     * @api\n     */\n    MultiPoint.prototype.getCoordinates = function () {\n        return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n    };\n    /**\n     * Return the point at the specified index.\n     * @param {number} index Index.\n     * @return {Point} Point.\n     * @api\n     */\n    MultiPoint.prototype.getPoint = function (index) {\n        var n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n        if (index < 0 || n <= index) {\n            return null;\n        }\n        return new Point(this.flatCoordinates.slice(index * this.stride, (index + 1) * this.stride), this.layout);\n    };\n    /**\n     * Return the points of this multipoint.\n     * @return {Array<Point>} Points.\n     * @api\n     */\n    MultiPoint.prototype.getPoints = function () {\n        var flatCoordinates = this.flatCoordinates;\n        var layout = this.layout;\n        var stride = this.stride;\n        /** @type {Array<Point>} */\n        var points = [];\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var point = new Point(flatCoordinates.slice(i, i + stride), layout);\n            points.push(point);\n        }\n        return points;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPoint.prototype.getType = function () {\n        return GeometryType.MULTI_POINT;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPoint.prototype.intersectsExtent = function (extent) {\n        var flatCoordinates = this.flatCoordinates;\n        var stride = this.stride;\n        for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n            var x = flatCoordinates[i];\n            var y = flatCoordinates[i + 1];\n            if (containsXY(extent, x, y)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    /**\n     * Set the coordinates of the multipoint.\n     * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n     * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    MultiPoint.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 1);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n        this.changed();\n    };\n    return MultiPoint;\n}(SimpleGeometry));\nexport default MultiPoint;\n//# sourceMappingURL=MultiPoint.js.map","/**\n * @module ol/geom/flat/center\n */\nimport { createEmpty, createOrUpdateFromFlatCoordinates } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n    var flatCenters = [];\n    var extent = createEmpty();\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n        flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n        offset = ends[ends.length - 1];\n    }\n    return flatCenters;\n}\n//# sourceMappingURL=center.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/geom/MultiPolygon\n */\nimport { extend } from '../array.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { linearRingss as linearRingssArea } from './flat/area.js';\nimport { linearRingss as linearRingssCenter } from './flat/center.js';\nimport { assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta } from './flat/closest.js';\nimport { linearRingssContainsXY } from './flat/contains.js';\nimport { deflateMultiCoordinatesArray } from './flat/deflate.js';\nimport { inflateMultiCoordinatesArray } from './flat/inflate.js';\nimport { getInteriorPointsOfMultiArray } from './flat/interiorpoint.js';\nimport { intersectsLinearRingMultiArray } from './flat/intersectsextent.js';\nimport { linearRingssAreOriented, orientLinearRingsArray } from './flat/orient.js';\nimport { quantizeMultiArray } from './flat/simplify.js';\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\nvar MultiPolygon = /** @class */ (function (_super) {\n    __extends(MultiPolygon, _super);\n    /**\n     * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n     *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @param {Array<Array<number>>=} opt_endss Array of ends for internal use with flat coordinates.\n     */\n    function MultiPolygon(coordinates, opt_layout, opt_endss) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Array<Array<number>>}\n         * @private\n         */\n        _this.endss_ = [];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.flatInteriorPointsRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.flatInteriorPoints_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDelta_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxDeltaRevision_ = -1;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.orientedRevision_ = -1;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.orientedFlatCoordinates_ = null;\n        if (!opt_endss && !Array.isArray(coordinates[0])) {\n            var layout = _this.getLayout();\n            var polygons = /** @type {Array<Polygon>} */ (coordinates);\n            var flatCoordinates = [];\n            var endss = [];\n            for (var i = 0, ii = polygons.length; i < ii; ++i) {\n                var polygon = polygons[i];\n                if (i === 0) {\n                    layout = polygon.getLayout();\n                }\n                var offset = flatCoordinates.length;\n                var ends = polygon.getEnds();\n                for (var j = 0, jj = ends.length; j < jj; ++j) {\n                    ends[j] += offset;\n                }\n                extend(flatCoordinates, polygon.getFlatCoordinates());\n                endss.push(ends);\n            }\n            opt_layout = layout;\n            coordinates = flatCoordinates;\n            opt_endss = endss;\n        }\n        if (opt_layout !== undefined && opt_endss) {\n            _this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n            _this.endss_ = opt_endss;\n        }\n        else {\n            _this.setCoordinates(/** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */ (coordinates), opt_layout);\n        }\n        return _this;\n    }\n    /**\n     * Append the passed polygon to this multipolygon.\n     * @param {Polygon} polygon Polygon.\n     * @api\n     */\n    MultiPolygon.prototype.appendPolygon = function (polygon) {\n        /** @type {Array<number>} */\n        var ends;\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = polygon.getFlatCoordinates().slice();\n            ends = polygon.getEnds().slice();\n            this.endss_.push();\n        }\n        else {\n            var offset = this.flatCoordinates.length;\n            extend(this.flatCoordinates, polygon.getFlatCoordinates());\n            ends = polygon.getEnds().slice();\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                ends[i] += offset;\n            }\n        }\n        this.endss_.push(ends);\n        this.changed();\n    };\n    /**\n     * Make a complete copy of the geometry.\n     * @return {!MultiPolygon} Clone.\n     * @override\n     * @api\n     */\n    MultiPolygon.prototype.clone = function () {\n        var len = this.endss_.length;\n        var newEndss = new Array(len);\n        for (var i = 0; i < len; ++i) {\n            newEndss[i] = this.endss_[i].slice();\n        }\n        return new MultiPolygon(this.flatCoordinates.slice(), this.layout, newEndss);\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPolygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n        if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n            return minSquaredDistance;\n        }\n        if (this.maxDeltaRevision_ != this.getRevision()) {\n            this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates, 0, this.endss_, this.stride, 0));\n            this.maxDeltaRevision_ = this.getRevision();\n        }\n        return assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPolygon.prototype.containsXY = function (x, y) {\n        return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n    };\n    /**\n     * Return the area of the multipolygon on projected plane.\n     * @return {number} Area (on projected plane).\n     * @api\n     */\n    MultiPolygon.prototype.getArea = function () {\n        return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n    };\n    /**\n     * Get the coordinate array for this geometry.  This array has the structure\n     * of a GeoJSON coordinate array for multi-polygons.\n     *\n     * @param {boolean=} opt_right Orient coordinates according to the right-hand\n     *     rule (counter-clockwise for exterior and clockwise for interior rings).\n     *     If `false`, coordinates will be oriented according to the left-hand rule\n     *     (clockwise for exterior and counter-clockwise for interior rings).\n     *     By default, coordinate orientation will depend on how the geometry was\n     *     constructed.\n     * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n     * @override\n     * @api\n     */\n    MultiPolygon.prototype.getCoordinates = function (opt_right) {\n        var flatCoordinates;\n        if (opt_right !== undefined) {\n            flatCoordinates = this.getOrientedFlatCoordinates().slice();\n            orientLinearRingsArray(flatCoordinates, 0, this.endss_, this.stride, opt_right);\n        }\n        else {\n            flatCoordinates = this.flatCoordinates;\n        }\n        return inflateMultiCoordinatesArray(flatCoordinates, 0, this.endss_, this.stride);\n    };\n    /**\n     * @return {Array<Array<number>>} Endss.\n     */\n    MultiPolygon.prototype.getEndss = function () {\n        return this.endss_;\n    };\n    /**\n     * @return {Array<number>} Flat interior points.\n     */\n    MultiPolygon.prototype.getFlatInteriorPoints = function () {\n        if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n            var flatCenters = linearRingssCenter(this.flatCoordinates, 0, this.endss_, this.stride);\n            this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, flatCenters);\n            this.flatInteriorPointsRevision_ = this.getRevision();\n        }\n        return this.flatInteriorPoints_;\n    };\n    /**\n     * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n     * @return {MultiPoint} Interior points as XYM coordinates, where M is\n     * the length of the horizontal intersection that the point belongs to.\n     * @api\n     */\n    MultiPolygon.prototype.getInteriorPoints = function () {\n        return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n    };\n    /**\n     * @return {Array<number>} Oriented flat coordinates.\n     */\n    MultiPolygon.prototype.getOrientedFlatCoordinates = function () {\n        if (this.orientedRevision_ != this.getRevision()) {\n            var flatCoordinates = this.flatCoordinates;\n            if (linearRingssAreOriented(flatCoordinates, 0, this.endss_, this.stride)) {\n                this.orientedFlatCoordinates_ = flatCoordinates;\n            }\n            else {\n                this.orientedFlatCoordinates_ = flatCoordinates.slice();\n                this.orientedFlatCoordinates_.length =\n                    orientLinearRingsArray(this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n            }\n            this.orientedRevision_ = this.getRevision();\n        }\n        return this.orientedFlatCoordinates_;\n    };\n    /**\n     * @inheritDoc\n     */\n    MultiPolygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n        var simplifiedFlatCoordinates = [];\n        var simplifiedEndss = [];\n        simplifiedFlatCoordinates.length = quantizeMultiArray(this.flatCoordinates, 0, this.endss_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEndss);\n        return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n    };\n    /**\n     * Return the polygon at the specified index.\n     * @param {number} index Index.\n     * @return {Polygon} Polygon.\n     * @api\n     */\n    MultiPolygon.prototype.getPolygon = function (index) {\n        if (index < 0 || this.endss_.length <= index) {\n            return null;\n        }\n        var offset;\n        if (index === 0) {\n            offset = 0;\n        }\n        else {\n            var prevEnds = this.endss_[index - 1];\n            offset = prevEnds[prevEnds.length - 1];\n        }\n        var ends = this.endss_[index].slice();\n        var end = ends[ends.length - 1];\n        if (offset !== 0) {\n            for (var i = 0, ii = ends.length; i < ii; ++i) {\n                ends[i] -= offset;\n            }\n        }\n        return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n    };\n    /**\n     * Return the polygons of this multipolygon.\n     * @return {Array<Polygon>} Polygons.\n     * @api\n     */\n    MultiPolygon.prototype.getPolygons = function () {\n        var layout = this.layout;\n        var flatCoordinates = this.flatCoordinates;\n        var endss = this.endss_;\n        var polygons = [];\n        var offset = 0;\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n            var ends = endss[i].slice();\n            var end = ends[ends.length - 1];\n            if (offset !== 0) {\n                for (var j = 0, jj = ends.length; j < jj; ++j) {\n                    ends[j] -= offset;\n                }\n            }\n            var polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n            polygons.push(polygon);\n            offset = end;\n        }\n        return polygons;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPolygon.prototype.getType = function () {\n        return GeometryType.MULTI_POLYGON;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    MultiPolygon.prototype.intersectsExtent = function (extent) {\n        return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n    };\n    /**\n     * Set the coordinates of the multipolygon.\n     * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n     * @param {GeometryLayout=} opt_layout Layout.\n     * @override\n     * @api\n     */\n    MultiPolygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n        this.setLayout(opt_layout, coordinates, 3);\n        if (!this.flatCoordinates) {\n            this.flatCoordinates = [];\n        }\n        var endss = deflateMultiCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n        if (endss.length === 0) {\n            this.flatCoordinates.length = 0;\n        }\n        else {\n            var lastEnds = endss[endss.length - 1];\n            this.flatCoordinates.length = lastEnds.length === 0 ?\n                0 : lastEnds[lastEnds.length - 1];\n        }\n        this.changed();\n    };\n    return MultiPolygon;\n}(SimpleGeometry));\nexport default MultiPolygon;\n//# sourceMappingURL=MultiPolygon.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Draw\n */\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport { getChangeEventType } from '../Object.js';\nimport { squaredDistance as squaredCoordinateDistance } from '../coordinate.js';\nimport Event from '../events/Event.js';\nimport { noModifierKeys, always, shiftKeyOnly } from '../events/condition.js';\nimport { boundingExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight } from '../extent.js';\nimport { TRUE, FALSE } from '../functions.js';\nimport Circle from '../geom/Circle.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon, { fromCircle, makeRegular } from '../geom/Polygon.js';\nimport PointerInteraction from './Pointer.js';\nimport InteractionProperty from './Property.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport { createEditingStyle } from '../style/Style.js';\nimport { fromUserCoordinate, getUserProjection } from '../proj.js';\n/**\n * @typedef {Object} Options\n * @property {GeometryType} type Geometry type of\n * the geometries being drawn with this instance.\n * @property {number} [clickTolerance=6] The maximum distance in pixels between\n * \"down\" and \"up\" for a \"up\" event to be considered a \"click\" event and\n * actually add a point/vertex to the geometry being drawn.  The default of `6`\n * was chosen for the draw interaction to behave correctly on mouse as well as\n * on touch devices.\n * @property {import(\"../Collection.js\").default<Feature>} [features]\n * Destination collection for the drawn features.\n * @property {VectorSource} [source] Destination source for\n * the drawn features.\n * @property {number} [dragVertexDelay=500] Delay in milliseconds after pointerdown\n * before the current vertex can be dragged to its exact position.\n * @property {number} [snapTolerance=12] Pixel distance for snapping to the\n * drawing finish.\n * @property {boolean} [stopClick=false] Stop click, singleclick, and\n * doubleclick events from firing during drawing.\n * @property {number} [maxPoints] The number of points that can be drawn before\n * a polygon ring or line string is finished. By default there is no\n * restriction.\n * @property {number} [minPoints] The number of points that must be drawn\n * before a polygon ring or line string can be finished. Default is `3` for\n * polygon rings and `2` for line strings.\n * @property {import(\"../events/condition.js\").Condition} [finishCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether the drawing can be finished.\n * @property {import(\"../style/Style.js\").StyleLike} [style]\n * Style for sketch features.\n * @property {GeometryFunction} [geometryFunction]\n * Function that is called when a geometry's coordinates are updated.\n * @property {string} [geometryName] Geometry name to use for features created\n * by the draw interaction.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default {@link module:ol/events/condition~noModifierKeys}, i.e. a click,\n * adds a vertex or deactivates freehand drawing.\n * @property {boolean} [freehand=false] Operate in freehand mode for lines,\n * polygons, and circles.  This makes the interaction always operate in freehand\n * mode and takes precedence over any `freehandCondition` option.\n * @property {import(\"../events/condition.js\").Condition} [freehandCondition]\n * Condition that activates freehand drawing for lines and polygons. This\n * function takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and\n * returns a boolean to indicate whether that event should be handled. The\n * default is {@link module:ol/events/condition~shiftKeyOnly}, meaning that the\n * Shift key activates freehand drawing.\n * @property {boolean} [wrapX=false] Wrap the world horizontally on the sketch\n * overlay.\n */\n/**\n * Coordinate type when drawing points.\n * @typedef {import(\"../coordinate.js\").Coordinate} PointCoordType\n */\n/**\n * Coordinate type when drawing lines.\n * @typedef {Array<import(\"../coordinate.js\").Coordinate>} LineCoordType\n */\n/**\n * Coordinate type when drawing polygons.\n * @typedef {Array<Array<import(\"../coordinate.js\").Coordinate>>} PolyCoordType\n */\n/**\n * Types used for drawing coordinates.\n * @typedef {PointCoordType|LineCoordType|PolyCoordType} SketchCoordType\n */\n/**\n * Function that takes an array of coordinates and an optional existing geometry\n * and a projection as arguments, and returns a geometry. The optional existing\n * geometry is the geometry that is returned when the function is called without\n * a second argument.\n * @typedef {function(!SketchCoordType, import(\"../geom/SimpleGeometry.js\").default=,\n *     import(\"../proj/Projection.js\").default=):\n *     import(\"../geom/SimpleGeometry.js\").default} GeometryFunction\n */\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n * @enum {string}\n */\nvar Mode = {\n    POINT: 'Point',\n    LINE_STRING: 'LineString',\n    POLYGON: 'Polygon',\n    CIRCLE: 'Circle'\n};\n/**\n * @enum {string}\n */\nvar DrawEventType = {\n    /**\n     * Triggered upon feature draw start\n     * @event DrawEvent#drawstart\n     * @api\n     */\n    DRAWSTART: 'drawstart',\n    /**\n     * Triggered upon feature draw end\n     * @event DrawEvent#drawend\n     * @api\n     */\n    DRAWEND: 'drawend',\n    /**\n     * Triggered upon feature draw abortion\n     * @event DrawEvent#drawabort\n     * @api\n     */\n    DRAWABORT: 'drawabort'\n};\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Draw~Draw} instances are\n * instances of this type.\n */\nvar DrawEvent = /** @class */ (function (_super) {\n    __extends(DrawEvent, _super);\n    /**\n     * @param {DrawEventType} type Type.\n     * @param {Feature} feature The feature drawn.\n     */\n    function DrawEvent(type, feature) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The feature being drawn.\n         * @type {Feature}\n         * @api\n         */\n        _this.feature = feature;\n        return _this;\n    }\n    return DrawEvent;\n}(Event));\n/**\n * @classdesc\n * Interaction for drawing feature geometries.\n *\n * @fires DrawEvent\n * @api\n */\nvar Draw = /** @class */ (function (_super) {\n    __extends(Draw, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function Draw(options) {\n        var _this = this;\n        var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n        if (!pointerOptions.stopDown) {\n            pointerOptions.stopDown = FALSE;\n        }\n        _this = _super.call(this, pointerOptions) || this;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.shouldHandle_ = false;\n        /**\n         * @type {import(\"../pixel.js\").Pixel}\n         * @private\n         */\n        _this.downPx_ = null;\n        /**\n         * @type {?}\n         * @private\n         */\n        _this.downTimeout_;\n        /**\n         * @type {number|undefined}\n         * @private\n         */\n        _this.lastDragTime_;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.freehand_ = false;\n        /**\n         * Target source for drawn features.\n         * @type {VectorSource}\n         * @private\n         */\n        _this.source_ = options.source ? options.source : null;\n        /**\n         * Target collection for drawn features.\n         * @type {import(\"../Collection.js\").default<Feature>}\n         * @private\n         */\n        _this.features_ = options.features ? options.features : null;\n        /**\n         * Pixel distance for snapping.\n         * @type {number}\n         * @private\n         */\n        _this.snapTolerance_ = options.snapTolerance ? options.snapTolerance : 12;\n        /**\n         * Geometry type.\n         * @type {GeometryType}\n         * @private\n         */\n        _this.type_ = /** @type {GeometryType} */ (options.type);\n        /**\n         * Drawing mode (derived from geometry type.\n         * @type {Mode}\n         * @private\n         */\n        _this.mode_ = getMode(_this.type_);\n        /**\n         * Stop click, singleclick, and doubleclick events from firing during drawing.\n         * Default is `false`.\n         * @type {boolean}\n         * @private\n         */\n        _this.stopClick_ = !!options.stopClick;\n        /**\n         * The number of points that must be drawn before a polygon ring or line\n         * string can be finished.  The default is 3 for polygon rings and 2 for\n         * line strings.\n         * @type {number}\n         * @private\n         */\n        _this.minPoints_ = options.minPoints ?\n            options.minPoints :\n            (_this.mode_ === Mode.POLYGON ? 3 : 2);\n        /**\n         * The number of points that can be drawn before a polygon ring or line string\n         * is finished. The default is no restriction.\n         * @type {number}\n         * @private\n         */\n        _this.maxPoints_ = options.maxPoints ? options.maxPoints : Infinity;\n        /**\n         * A function to decide if a potential finish coordinate is permissible\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.finishCondition_ = options.finishCondition ? options.finishCondition : TRUE;\n        var geometryFunction = options.geometryFunction;\n        if (!geometryFunction) {\n            if (_this.type_ === GeometryType.CIRCLE) {\n                /**\n                 * @param {!LineCoordType} coordinates The coordinates.\n                 * @param {import(\"../geom/SimpleGeometry.js\").default=} opt_geometry Optional geometry.\n                 * @param {import(\"../proj/Projection.js\").default} projection The view projection.\n                 * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n                 */\n                geometryFunction = function (coordinates, opt_geometry, projection) {\n                    var circle = opt_geometry ? /** @type {Circle} */ (opt_geometry) :\n                        new Circle([NaN, NaN]);\n                    var center = fromUserCoordinate(coordinates[0], projection);\n                    var squaredLength = squaredCoordinateDistance(center, fromUserCoordinate(coordinates[1], projection));\n                    circle.setCenterAndRadius(center, Math.sqrt(squaredLength));\n                    var userProjection = getUserProjection();\n                    if (userProjection) {\n                        circle.transform(projection, userProjection);\n                    }\n                    return circle;\n                };\n            }\n            else {\n                var Constructor_1;\n                var mode_1 = _this.mode_;\n                if (mode_1 === Mode.POINT) {\n                    Constructor_1 = Point;\n                }\n                else if (mode_1 === Mode.LINE_STRING) {\n                    Constructor_1 = LineString;\n                }\n                else if (mode_1 === Mode.POLYGON) {\n                    Constructor_1 = Polygon;\n                }\n                /**\n                 * @param {!LineCoordType} coordinates The coordinates.\n                 * @param {import(\"../geom/SimpleGeometry.js\").default=} opt_geometry Optional geometry.\n                 * @param {import(\"../proj/Projection.js\").default} projection The view projection.\n                 * @return {import(\"../geom/SimpleGeometry.js\").default} A geometry.\n                 */\n                geometryFunction = function (coordinates, opt_geometry, projection) {\n                    var geometry = opt_geometry;\n                    if (geometry) {\n                        if (mode_1 === Mode.POLYGON) {\n                            if (coordinates[0].length) {\n                                // Add a closing coordinate to match the first\n                                geometry.setCoordinates([coordinates[0].concat([coordinates[0][0]])]);\n                            }\n                            else {\n                                geometry.setCoordinates([]);\n                            }\n                        }\n                        else {\n                            geometry.setCoordinates(coordinates);\n                        }\n                    }\n                    else {\n                        geometry = new Constructor_1(coordinates);\n                    }\n                    return geometry;\n                };\n            }\n        }\n        /**\n         * @type {GeometryFunction}\n         * @private\n         */\n        _this.geometryFunction_ = geometryFunction;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.dragVertexDelay_ = options.dragVertexDelay !== undefined ? options.dragVertexDelay : 500;\n        /**\n         * Finish coordinate for the feature (first point for polygons, last point for\n         * linestrings).\n         * @type {import(\"../coordinate.js\").Coordinate}\n         * @private\n         */\n        _this.finishCoordinate_ = null;\n        /**\n         * Sketch feature.\n         * @type {Feature}\n         * @private\n         */\n        _this.sketchFeature_ = null;\n        /**\n         * Sketch point.\n         * @type {Feature<Point>}\n         * @private\n         */\n        _this.sketchPoint_ = null;\n        /**\n         * Sketch coordinates. Used when drawing a line or polygon.\n         * @type {SketchCoordType}\n         * @private\n         */\n        _this.sketchCoords_ = null;\n        /**\n         * Sketch line. Used when drawing polygon.\n         * @type {Feature<LineString>}\n         * @private\n         */\n        _this.sketchLine_ = null;\n        /**\n         * Sketch line coordinates. Used when drawing a polygon or circle.\n         * @type {LineCoordType}\n         * @private\n         */\n        _this.sketchLineCoords_ = null;\n        /**\n         * Squared tolerance for handling up events.  If the squared distance\n         * between a down and up event is greater than this tolerance, up events\n         * will not be handled.\n         * @type {number}\n         * @private\n         */\n        _this.squaredClickTolerance_ = options.clickTolerance ?\n            options.clickTolerance * options.clickTolerance : 36;\n        /**\n         * Draw overlay where our sketch features are drawn.\n         * @type {VectorLayer}\n         * @private\n         */\n        _this.overlay_ = new VectorLayer({\n            source: new VectorSource({\n                useSpatialIndex: false,\n                wrapX: options.wrapX ? options.wrapX : false\n            }),\n            style: options.style ? options.style : getDefaultStyleFunction(),\n            updateWhileInteracting: true\n        });\n        /**\n         * Name of the geometry attribute for newly created features.\n         * @type {string|undefined}\n         * @private\n         */\n        _this.geometryName_ = options.geometryName;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : noModifierKeys;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.freehandCondition_;\n        if (options.freehand) {\n            _this.freehandCondition_ = always;\n        }\n        else {\n            _this.freehandCondition_ = options.freehandCondition ? options.freehandCondition : shiftKeyOnly;\n        }\n        _this.addEventListener(getChangeEventType(InteractionProperty.ACTIVE), _this.updateState_);\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    Draw.prototype.setMap = function (map) {\n        _super.prototype.setMap.call(this, map);\n        this.updateState_();\n    };\n    /**\n     * Get the overlay layer that this interaction renders sketch features to.\n     * @return {VectorLayer} Overlay layer.\n     * @api\n     */\n    Draw.prototype.getOverlay = function () {\n        return this.overlay_;\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} and may actually draw or finish the drawing.\n     * @override\n     * @api\n     */\n    Draw.prototype.handleEvent = function (event) {\n        if (event.originalEvent.type === EventType.CONTEXTMENU) {\n            // Avoid context menu for long taps when drawing on mobile\n            event.preventDefault();\n        }\n        this.freehand_ = this.mode_ !== Mode.POINT && this.freehandCondition_(event);\n        var move = event.type === MapBrowserEventType.POINTERMOVE;\n        var pass = true;\n        if (!this.freehand_ && this.lastDragTime_ && event.type === MapBrowserEventType.POINTERDRAG) {\n            var now = Date.now();\n            if (now - this.lastDragTime_ >= this.dragVertexDelay_) {\n                this.downPx_ = event.pixel;\n                this.shouldHandle_ = !this.freehand_;\n                move = true;\n            }\n            else {\n                this.lastDragTime_ = undefined;\n            }\n            if (this.shouldHandle_ && this.downTimeout_ !== undefined) {\n                clearTimeout(this.downTimeout_);\n                this.downTimeout_ = undefined;\n            }\n        }\n        if (this.freehand_ &&\n            event.type === MapBrowserEventType.POINTERDRAG &&\n            this.sketchFeature_ !== null) {\n            this.addToDrawing_(event.coordinate);\n            pass = false;\n        }\n        else if (this.freehand_ &&\n            event.type === MapBrowserEventType.POINTERDOWN) {\n            pass = false;\n        }\n        else if (move) {\n            pass = event.type === MapBrowserEventType.POINTERMOVE;\n            if (pass && this.freehand_) {\n                pass = this.handlePointerMove_(event);\n            }\n            else if ( /** @type {MapBrowserPointerEvent} */(event).pointerEvent.pointerType == 'mouse' ||\n                (event.type === MapBrowserEventType.POINTERDRAG && this.downTimeout_ === undefined)) {\n                this.handlePointerMove_(event);\n            }\n        }\n        else if (event.type === MapBrowserEventType.DBLCLICK) {\n            pass = false;\n        }\n        return _super.prototype.handleEvent.call(this, event) && pass;\n    };\n    /**\n     * @inheritDoc\n     */\n    Draw.prototype.handleDownEvent = function (event) {\n        this.shouldHandle_ = !this.freehand_;\n        if (this.freehand_) {\n            this.downPx_ = event.pixel;\n            if (!this.finishCoordinate_) {\n                this.startDrawing_(event);\n            }\n            return true;\n        }\n        else if (this.condition_(event)) {\n            this.lastDragTime_ = Date.now();\n            this.downTimeout_ = setTimeout(function () {\n                this.handlePointerMove_(new MapBrowserPointerEvent(MapBrowserEventType.POINTERMOVE, event.map, event.pointerEvent, false, event.frameState));\n            }.bind(this), this.dragVertexDelay_);\n            this.downPx_ = event.pixel;\n            return true;\n        }\n        else {\n            this.lastDragTime_ = undefined;\n            return false;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    Draw.prototype.handleUpEvent = function (event) {\n        var pass = true;\n        if (this.downTimeout_) {\n            clearTimeout(this.downTimeout_);\n            this.downTimeout_ = undefined;\n        }\n        this.handlePointerMove_(event);\n        var circleMode = this.mode_ === Mode.CIRCLE;\n        if (this.shouldHandle_) {\n            if (!this.finishCoordinate_) {\n                this.startDrawing_(event);\n                if (this.mode_ === Mode.POINT) {\n                    this.finishDrawing();\n                }\n            }\n            else if (this.freehand_ || circleMode) {\n                this.finishDrawing();\n            }\n            else if (this.atFinish_(event)) {\n                if (this.finishCondition_(event)) {\n                    this.finishDrawing();\n                }\n            }\n            else {\n                this.addToDrawing_(event.coordinate);\n            }\n            pass = false;\n        }\n        else if (this.freehand_) {\n            this.abortDrawing();\n        }\n        if (!pass && this.stopClick_) {\n            event.stopPropagation();\n        }\n        return pass;\n    };\n    /**\n     * Handle move events.\n     * @param {import(\"../MapBrowserEvent.js\").default} event A move event.\n     * @return {boolean} Pass the event to other interactions.\n     * @private\n     */\n    Draw.prototype.handlePointerMove_ = function (event) {\n        if (this.downPx_ &&\n            ((!this.freehand_ && this.shouldHandle_) ||\n                (this.freehand_ && !this.shouldHandle_))) {\n            var downPx = this.downPx_;\n            var clickPx = event.pixel;\n            var dx = downPx[0] - clickPx[0];\n            var dy = downPx[1] - clickPx[1];\n            var squaredDistance = dx * dx + dy * dy;\n            this.shouldHandle_ = this.freehand_ ?\n                squaredDistance > this.squaredClickTolerance_ :\n                squaredDistance <= this.squaredClickTolerance_;\n            if (!this.shouldHandle_) {\n                return true;\n            }\n        }\n        if (this.finishCoordinate_) {\n            this.modifyDrawing_(event);\n        }\n        else {\n            this.createOrUpdateSketchPoint_(event);\n        }\n        return true;\n    };\n    /**\n     * Determine if an event is within the snapping tolerance of the start coord.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @return {boolean} The event is within the snapping tolerance of the start.\n     * @private\n     */\n    Draw.prototype.atFinish_ = function (event) {\n        var at = false;\n        if (this.sketchFeature_) {\n            var potentiallyDone = false;\n            var potentiallyFinishCoordinates = [this.finishCoordinate_];\n            if (this.mode_ === Mode.LINE_STRING) {\n                potentiallyDone = this.sketchCoords_.length > this.minPoints_;\n            }\n            else if (this.mode_ === Mode.POLYGON) {\n                var sketchCoords = /** @type {PolyCoordType} */ (this.sketchCoords_);\n                potentiallyDone = sketchCoords[0].length > this.minPoints_;\n                potentiallyFinishCoordinates = [sketchCoords[0][0], sketchCoords[0][sketchCoords[0].length - 2]];\n            }\n            if (potentiallyDone) {\n                var map = event.map;\n                for (var i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n                    var finishCoordinate = potentiallyFinishCoordinates[i];\n                    var finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n                    var pixel = event.pixel;\n                    var dx = pixel[0] - finishPixel[0];\n                    var dy = pixel[1] - finishPixel[1];\n                    var snapTolerance = this.freehand_ ? 1 : this.snapTolerance_;\n                    at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n                    if (at) {\n                        this.finishCoordinate_ = finishCoordinate;\n                        break;\n                    }\n                }\n            }\n        }\n        return at;\n    };\n    /**\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @private\n     */\n    Draw.prototype.createOrUpdateSketchPoint_ = function (event) {\n        var coordinates = event.coordinate.slice();\n        if (!this.sketchPoint_) {\n            this.sketchPoint_ = new Feature(new Point(coordinates));\n            this.updateSketchFeatures_();\n        }\n        else {\n            var sketchPointGeom = this.sketchPoint_.getGeometry();\n            sketchPointGeom.setCoordinates(coordinates);\n        }\n    };\n    /**\n     * Start the drawing.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @private\n     */\n    Draw.prototype.startDrawing_ = function (event) {\n        var start = event.coordinate;\n        var projection = event.map.getView().getProjection();\n        this.finishCoordinate_ = start;\n        if (this.mode_ === Mode.POINT) {\n            this.sketchCoords_ = start.slice();\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            this.sketchCoords_ = [[start.slice(), start.slice()]];\n            this.sketchLineCoords_ = this.sketchCoords_[0];\n        }\n        else {\n            this.sketchCoords_ = [start.slice(), start.slice()];\n        }\n        if (this.sketchLineCoords_) {\n            this.sketchLine_ = new Feature(new LineString(this.sketchLineCoords_));\n        }\n        var geometry = this.geometryFunction_(this.sketchCoords_, undefined, projection);\n        this.sketchFeature_ = new Feature();\n        if (this.geometryName_) {\n            this.sketchFeature_.setGeometryName(this.geometryName_);\n        }\n        this.sketchFeature_.setGeometry(geometry);\n        this.updateSketchFeatures_();\n        this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n    };\n    /**\n     * Modify the drawing.\n     * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n     * @private\n     */\n    Draw.prototype.modifyDrawing_ = function (event) {\n        var coordinate = event.coordinate;\n        var geometry = this.sketchFeature_.getGeometry();\n        var projection = event.map.getView().getProjection();\n        var coordinates, last;\n        if (this.mode_ === Mode.POINT) {\n            last = this.sketchCoords_;\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n            last = coordinates[coordinates.length - 1];\n            if (this.atFinish_(event)) {\n                // snap to finish\n                coordinate = this.finishCoordinate_.slice();\n            }\n        }\n        else {\n            coordinates = this.sketchCoords_;\n            last = coordinates[coordinates.length - 1];\n        }\n        last[0] = coordinate[0];\n        last[1] = coordinate[1];\n        this.geometryFunction_(/** @type {!LineCoordType} */ (this.sketchCoords_), geometry, projection);\n        if (this.sketchPoint_) {\n            var sketchPointGeom = this.sketchPoint_.getGeometry();\n            sketchPointGeom.setCoordinates(coordinate);\n        }\n        /** @type {LineString} */\n        var sketchLineGeom;\n        if (geometry.getType() == GeometryType.POLYGON &&\n            this.mode_ !== Mode.POLYGON) {\n            if (!this.sketchLine_) {\n                this.sketchLine_ = new Feature();\n            }\n            var ring = geometry.getLinearRing(0);\n            sketchLineGeom = this.sketchLine_.getGeometry();\n            if (!sketchLineGeom) {\n                sketchLineGeom = new LineString(ring.getFlatCoordinates(), ring.getLayout());\n                this.sketchLine_.setGeometry(sketchLineGeom);\n            }\n            else {\n                sketchLineGeom.setFlatCoordinates(ring.getLayout(), ring.getFlatCoordinates());\n                sketchLineGeom.changed();\n            }\n        }\n        else if (this.sketchLineCoords_) {\n            sketchLineGeom = this.sketchLine_.getGeometry();\n            sketchLineGeom.setCoordinates(this.sketchLineCoords_);\n        }\n        this.updateSketchFeatures_();\n    };\n    /**\n     * Add a new coordinate to the drawing.\n     * @param {!PointCoordType} coordinate Coordinate\n     * @private\n     */\n    Draw.prototype.addToDrawing_ = function (coordinate) {\n        var geometry = this.sketchFeature_.getGeometry();\n        var projection = this.getMap().getView().getProjection();\n        var done;\n        var coordinates;\n        if (this.mode_ === Mode.LINE_STRING) {\n            this.finishCoordinate_ = coordinate.slice();\n            coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n            if (coordinates.length >= this.maxPoints_) {\n                if (this.freehand_) {\n                    coordinates.pop();\n                }\n                else {\n                    done = true;\n                }\n            }\n            coordinates.push(coordinate.slice());\n            this.geometryFunction_(coordinates, geometry, projection);\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n            if (coordinates.length >= this.maxPoints_) {\n                if (this.freehand_) {\n                    coordinates.pop();\n                }\n                else {\n                    done = true;\n                }\n            }\n            coordinates.push(coordinate.slice());\n            if (done) {\n                this.finishCoordinate_ = coordinates[0];\n            }\n            this.geometryFunction_(this.sketchCoords_, geometry, projection);\n        }\n        this.updateSketchFeatures_();\n        if (done) {\n            this.finishDrawing();\n        }\n    };\n    /**\n     * Remove last point of the feature currently being drawn.\n     * @api\n     */\n    Draw.prototype.removeLastPoint = function () {\n        if (!this.sketchFeature_) {\n            return;\n        }\n        var geometry = this.sketchFeature_.getGeometry();\n        var projection = this.getMap().getView().getProjection();\n        var coordinates;\n        /** @type {LineString} */\n        var sketchLineGeom;\n        if (this.mode_ === Mode.LINE_STRING) {\n            coordinates = /** @type {LineCoordType} */ (this.sketchCoords_);\n            coordinates.splice(-2, 1);\n            this.geometryFunction_(coordinates, geometry, projection);\n            if (coordinates.length >= 2) {\n                this.finishCoordinate_ = coordinates[coordinates.length - 2].slice();\n            }\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            coordinates = /** @type {PolyCoordType} */ (this.sketchCoords_)[0];\n            coordinates.splice(-2, 1);\n            sketchLineGeom = this.sketchLine_.getGeometry();\n            sketchLineGeom.setCoordinates(coordinates);\n            this.geometryFunction_(this.sketchCoords_, geometry, projection);\n        }\n        if (coordinates.length === 0) {\n            this.abortDrawing();\n        }\n        this.updateSketchFeatures_();\n    };\n    /**\n     * Stop drawing and add the sketch feature to the target layer.\n     * The {@link module:ol/interaction/Draw~DrawEventType.DRAWEND} event is\n     * dispatched before inserting the feature.\n     * @api\n     */\n    Draw.prototype.finishDrawing = function () {\n        var sketchFeature = this.abortDrawing_();\n        if (!sketchFeature) {\n            return;\n        }\n        var coordinates = this.sketchCoords_;\n        var geometry = sketchFeature.getGeometry();\n        var projection = this.getMap().getView().getProjection();\n        if (this.mode_ === Mode.LINE_STRING) {\n            // remove the redundant last point\n            coordinates.pop();\n            this.geometryFunction_(coordinates, geometry, projection);\n        }\n        else if (this.mode_ === Mode.POLYGON) {\n            // remove the redundant last point in ring\n            /** @type {PolyCoordType} */ (coordinates)[0].pop();\n            this.geometryFunction_(coordinates, geometry, projection);\n            coordinates = geometry.getCoordinates();\n        }\n        // cast multi-part geometries\n        if (this.type_ === GeometryType.MULTI_POINT) {\n            sketchFeature.setGeometry(new MultiPoint([/** @type {PointCoordType} */ (coordinates)]));\n        }\n        else if (this.type_ === GeometryType.MULTI_LINE_STRING) {\n            sketchFeature.setGeometry(new MultiLineString([/** @type {LineCoordType} */ (coordinates)]));\n        }\n        else if (this.type_ === GeometryType.MULTI_POLYGON) {\n            sketchFeature.setGeometry(new MultiPolygon([/** @type {PolyCoordType} */ (coordinates)]));\n        }\n        // First dispatch event to allow full set up of feature\n        this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND, sketchFeature));\n        // Then insert feature\n        if (this.features_) {\n            this.features_.push(sketchFeature);\n        }\n        if (this.source_) {\n            this.source_.addFeature(sketchFeature);\n        }\n    };\n    /**\n     * Stop drawing without adding the sketch feature to the target layer.\n     * @return {Feature} The sketch feature (or null if none).\n     * @private\n     */\n    Draw.prototype.abortDrawing_ = function () {\n        this.finishCoordinate_ = null;\n        var sketchFeature = this.sketchFeature_;\n        this.sketchFeature_ = null;\n        this.sketchPoint_ = null;\n        this.sketchLine_ = null;\n        this.overlay_.getSource().clear(true);\n        return sketchFeature;\n    };\n    /**\n     * Stop drawing without adding the sketch feature to the target layer.\n     * @api\n     */\n    Draw.prototype.abortDrawing = function () {\n        var sketchFeature = this.abortDrawing_();\n        if (sketchFeature) {\n            this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT, sketchFeature));\n        }\n    };\n    /**\n     * Append coordinates to the end of the geometry that is currently being drawn.\n     * This can be used when drawing LineStrings or Polygons. Coordinates will\n     * either be appended to the current LineString or the outer ring of the current\n     * Polygon.\n     * @param {!LineCoordType} coordinates Linear coordinates to be appended into\n     * the coordinate array.\n     * @api\n     */\n    Draw.prototype.appendCoordinates = function (coordinates) {\n        var mode = this.mode_;\n        var sketchCoords = [];\n        if (mode === Mode.LINE_STRING) {\n            sketchCoords = /** @type {LineCoordType} */ this.sketchCoords_;\n        }\n        else if (mode === Mode.POLYGON) {\n            sketchCoords = this.sketchCoords_ && this.sketchCoords_.length ? /** @type {PolyCoordType} */ (this.sketchCoords_)[0] : [];\n        }\n        // Remove last coordinate from sketch drawing (this coordinate follows cursor position)\n        var ending = sketchCoords.pop();\n        // Append coordinate list\n        for (var i = 0; i < coordinates.length; i++) {\n            this.addToDrawing_(coordinates[i]);\n        }\n        // Duplicate last coordinate for sketch drawing\n        this.addToDrawing_(ending);\n    };\n    /**\n     * Initiate draw mode by starting from an existing geometry which will\n     * receive new additional points. This only works on features with\n     * `LineString` geometries, where the interaction will extend lines by adding\n     * points to the end of the coordinates array.\n     * This will change the original feature, instead of drawing a copy.\n     *\n     * The function will dispatch a `drawstart` event.\n     *\n     * @param {!Feature<LineString>} feature Feature to be extended.\n     * @api\n     */\n    Draw.prototype.extend = function (feature) {\n        var geometry = feature.getGeometry();\n        var lineString = geometry;\n        this.sketchFeature_ = feature;\n        this.sketchCoords_ = lineString.getCoordinates();\n        var last = this.sketchCoords_[this.sketchCoords_.length - 1];\n        this.finishCoordinate_ = last.slice();\n        this.sketchCoords_.push(last.slice());\n        this.updateSketchFeatures_();\n        this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART, this.sketchFeature_));\n    };\n    /**\n     * Redraw the sketch features.\n     * @private\n     */\n    Draw.prototype.updateSketchFeatures_ = function () {\n        var sketchFeatures = [];\n        if (this.sketchFeature_) {\n            sketchFeatures.push(this.sketchFeature_);\n        }\n        if (this.sketchLine_) {\n            sketchFeatures.push(this.sketchLine_);\n        }\n        if (this.sketchPoint_) {\n            sketchFeatures.push(this.sketchPoint_);\n        }\n        var overlaySource = this.overlay_.getSource();\n        overlaySource.clear(true);\n        overlaySource.addFeatures(sketchFeatures);\n    };\n    /**\n     * @private\n     */\n    Draw.prototype.updateState_ = function () {\n        var map = this.getMap();\n        var active = this.getActive();\n        if (!map || !active) {\n            this.abortDrawing();\n        }\n        this.overlay_.setMap(active ? map : null);\n    };\n    return Draw;\n}(PointerInteraction));\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n    var styles = createEditingStyle();\n    return function (feature, resolution) {\n        return styles[feature.getGeometry().getType()];\n    };\n}\n/**\n * Create a `geometryFunction` for `type: 'Circle'` that will create a regular\n * polygon with a user specified number of sides and start angle instead of an\n * `import(\"../geom/Circle.js\").Circle` geometry.\n * @param {number=} opt_sides Number of sides of the regular polygon. Default is\n *     32.\n * @param {number=} opt_angle Angle of the first point in radians. 0 means East.\n *     Default is the angle defined by the heading from the center of the\n *     regular polygon to the current pointer position.\n * @return {GeometryFunction} Function that draws a\n *     polygon.\n * @api\n */\nexport function createRegularPolygon(opt_sides, opt_angle) {\n    return function (coordinates, opt_geometry, projection) {\n        var center = fromUserCoordinate(/** @type {LineCoordType} */ (coordinates)[0], projection);\n        var end = fromUserCoordinate(/** @type {LineCoordType} */ (coordinates)[1], projection);\n        var radius = Math.sqrt(squaredCoordinateDistance(center, end));\n        var geometry = opt_geometry ? /** @type {Polygon} */ (opt_geometry) :\n            fromCircle(new Circle(center), opt_sides);\n        var angle = opt_angle;\n        if (!opt_angle) {\n            var x = end[0] - center[0];\n            var y = end[1] - center[1];\n            angle = Math.atan(y / x) - (x < 0 ? Math.PI : 0);\n        }\n        makeRegular(geometry, center, radius, angle);\n        var userProjection = getUserProjection();\n        if (userProjection) {\n            geometry.transform(projection, userProjection);\n        }\n        return geometry;\n    };\n}\n/**\n * Create a `geometryFunction` that will create a box-shaped polygon (aligned\n * with the coordinate system axes).  Use this with the draw interaction and\n * `type: 'Circle'` to return a box instead of a circle geometry.\n * @return {GeometryFunction} Function that draws a box-shaped polygon.\n * @api\n */\nexport function createBox() {\n    return (function (coordinates, opt_geometry, projection) {\n        var extent = boundingExtent(/** @type {LineCoordType} */ (coordinates).map(function (coordinate) {\n            return fromUserCoordinate(coordinate, projection);\n        }));\n        var boxCoordinates = [[\n                getBottomLeft(extent),\n                getBottomRight(extent),\n                getTopRight(extent),\n                getTopLeft(extent),\n                getBottomLeft(extent)\n            ]];\n        var geometry = opt_geometry;\n        if (geometry) {\n            geometry.setCoordinates(boxCoordinates);\n        }\n        else {\n            geometry = new Polygon(boxCoordinates);\n        }\n        var userProjection = getUserProjection();\n        if (userProjection) {\n            geometry.transform(projection, userProjection);\n        }\n        return geometry;\n    });\n}\n/**\n * Get the drawing mode.  The mode for mult-part geometries is the same as for\n * their single-part cousins.\n * @param {GeometryType} type Geometry type.\n * @return {Mode} Drawing mode.\n */\nfunction getMode(type) {\n    var mode;\n    if (type === GeometryType.POINT ||\n        type === GeometryType.MULTI_POINT) {\n        mode = Mode.POINT;\n    }\n    else if (type === GeometryType.LINE_STRING ||\n        type === GeometryType.MULTI_LINE_STRING) {\n        mode = Mode.LINE_STRING;\n    }\n    else if (type === GeometryType.POLYGON ||\n        type === GeometryType.MULTI_POLYGON) {\n        mode = Mode.POLYGON;\n    }\n    else if (type === GeometryType.CIRCLE) {\n        mode = Mode.CIRCLE;\n    }\n    return (\n    /** @type {!Mode} */ (mode));\n}\nexport default Draw;\n//# sourceMappingURL=Draw.js.map","/**\n * @module ol/geom/flat/interpolate\n */\nimport { binarySearch } from '../../array.js';\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n    var pointX = NaN;\n    var pointY = NaN;\n    var n = (end - offset) / stride;\n    if (n === 1) {\n        pointX = flatCoordinates[offset];\n        pointY = flatCoordinates[offset + 1];\n    }\n    else if (n == 2) {\n        pointX = (1 - fraction) * flatCoordinates[offset] +\n            fraction * flatCoordinates[offset + stride];\n        pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n            fraction * flatCoordinates[offset + stride + 1];\n    }\n    else if (n !== 0) {\n        var x1 = flatCoordinates[offset];\n        var y1 = flatCoordinates[offset + 1];\n        var length_1 = 0;\n        var cumulativeLengths = [0];\n        for (var i = offset + stride; i < end; i += stride) {\n            var x2 = flatCoordinates[i];\n            var y2 = flatCoordinates[i + 1];\n            length_1 += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n            cumulativeLengths.push(length_1);\n            x1 = x2;\n            y1 = y2;\n        }\n        var target = fraction * length_1;\n        var index = binarySearch(cumulativeLengths, target);\n        if (index < 0) {\n            var t = (target - cumulativeLengths[-index - 2]) /\n                (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n            var o = offset + (-index - 2) * stride;\n            pointX = lerp(flatCoordinates[o], flatCoordinates[o + stride], t);\n            pointY = lerp(flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n        }\n        else {\n            pointX = flatCoordinates[offset + index * stride];\n            pointY = flatCoordinates[offset + index * stride + 1];\n        }\n    }\n    if (opt_dest) {\n        opt_dest[0] = pointX;\n        opt_dest[1] = pointY;\n        return opt_dest;\n    }\n    else {\n        return [pointX, pointY];\n    }\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n    if (end == offset) {\n        return null;\n    }\n    var coordinate;\n    if (m < flatCoordinates[offset + stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(offset, offset + stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    else if (flatCoordinates[end - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(end - stride, end);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    // FIXME use O(1) search\n    if (m == flatCoordinates[offset + stride - 1]) {\n        return flatCoordinates.slice(offset, offset + stride);\n    }\n    var lo = offset / stride;\n    var hi = end / stride;\n    while (lo < hi) {\n        var mid = (lo + hi) >> 1;\n        if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n            hi = mid;\n        }\n        else {\n            lo = mid + 1;\n        }\n    }\n    var m0 = flatCoordinates[lo * stride - 1];\n    if (m == m0) {\n        return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n    }\n    var m1 = flatCoordinates[(lo + 1) * stride - 1];\n    var t = (m - m0) / (m1 - m0);\n    coordinate = [];\n    for (var i = 0; i < stride - 1; ++i) {\n        coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i], flatCoordinates[lo * stride + i], t));\n    }\n    coordinate.push(m);\n    return coordinate;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n    if (interpolate) {\n        return lineStringCoordinateAtM(flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n    }\n    var coordinate;\n    if (m < flatCoordinates[stride - 1]) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(0, stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    if (flatCoordinates[flatCoordinates.length - 1] < m) {\n        if (extrapolate) {\n            coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n            coordinate[stride - 1] = m;\n            return coordinate;\n        }\n        else {\n            return null;\n        }\n    }\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n        var end = ends[i];\n        if (offset == end) {\n            continue;\n        }\n        if (m < flatCoordinates[offset + stride - 1]) {\n            return null;\n        }\n        else if (m <= flatCoordinates[end - 1]) {\n            return lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, false);\n        }\n        offset = end;\n    }\n    return null;\n}\n//# sourceMappingURL=interpolate.js.map","(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\ntypeof define === 'function' && define.amd ? define(factory) :\n(global = global || self, global.RBush = factory());\n}(this, function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) { swap(arr, left, right); }\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) { i++; }\n            while (compare(arr[j], t) > 0) { j--; }\n        }\n\n        if (compare(arr[left], t) === 0) { swap(arr, left, j); }\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) { left = j + 1; }\n        if (k <= j) { right = j - 1; }\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nvar RBush = function RBush(maxEntries) {\n    if ( maxEntries === void 0 ) maxEntries = 9;\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n    this.clear();\n};\n\nRBush.prototype.all = function all () {\n    return this._all(this.data, []);\n};\n\nRBush.prototype.search = function search (bbox) {\n    var node = this.data;\n    var result = [];\n\n    if (!intersects(bbox, node)) { return result; }\n\n    var toBBox = this.toBBox;\n    var nodesToSearch = [];\n\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf) { result.push(child); }\n                else if (contains(bbox, childBBox)) { this._all(child, result); }\n                else { nodesToSearch.push(child); }\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return result;\n};\n\nRBush.prototype.collides = function collides (bbox) {\n    var node = this.data;\n\n    if (!intersects(bbox, node)) { return false; }\n\n    var nodesToSearch = [];\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? this.toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf || contains(bbox, childBBox)) { return true; }\n                nodesToSearch.push(child);\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return false;\n};\n\nRBush.prototype.load = function load (data) {\n    if (!(data && data.length)) { return this; }\n\n    if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n            this.insert(data[i]);\n        }\n        return this;\n    }\n\n    // recursively build the tree with the given data from scratch using OMT algorithm\n    var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n    if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n\n    } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n\n    } else {\n        if (this.data.height < node.height) {\n            // swap trees if inserted one is bigger\n            var tmpNode = this.data;\n            this.data = node;\n            node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n    }\n\n    return this;\n};\n\nRBush.prototype.insert = function insert (item) {\n    if (item) { this._insert(item, this.data.height - 1); }\n    return this;\n};\n\nRBush.prototype.clear = function clear () {\n    this.data = createNode([]);\n    return this;\n};\n\nRBush.prototype.remove = function remove (item, equalsFn) {\n    if (!item) { return this; }\n\n    var node = this.data;\n    var bbox = this.toBBox(item);\n    var path = [];\n    var indexes = [];\n    var i, parent, goingUp;\n\n    // depth-first iterative tree traversal\n    while (node || path.length) {\n\n        if (!node) { // go up\n            node = path.pop();\n            parent = path[path.length - 1];\n            i = indexes.pop();\n            goingUp = true;\n        }\n\n        if (node.leaf) { // check current node\n            var index = findItem(item, node.children, equalsFn);\n\n            if (index !== -1) {\n                // item found, remove the item and condense tree upwards\n                node.children.splice(index, 1);\n                path.push(node);\n                this._condense(path);\n                return this;\n            }\n        }\n\n        if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n            path.push(node);\n            indexes.push(i);\n            i = 0;\n            parent = node;\n            node = node.children[0];\n\n        } else if (parent) { // go right\n            i++;\n            node = parent.children[i];\n            goingUp = false;\n\n        } else { node = null; } // nothing found\n    }\n\n    return this;\n};\n\nRBush.prototype.toBBox = function toBBox (item) { return item; };\n\nRBush.prototype.compareMinX = function compareMinX (a, b) { return a.minX - b.minX; };\nRBush.prototype.compareMinY = function compareMinY (a, b) { return a.minY - b.minY; };\n\nRBush.prototype.toJSON = function toJSON () { return this.data; };\n\nRBush.prototype.fromJSON = function fromJSON (data) {\n    this.data = data;\n    return this;\n};\n\nRBush.prototype._all = function _all (node, result) {\n    var nodesToSearch = [];\n    while (node) {\n        if (node.leaf) { result.push.apply(result, node.children); }\n        else { nodesToSearch.push.apply(nodesToSearch, node.children); }\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nRBush.prototype._build = function _build (items, left, right, height) {\n\n    var N = right - left + 1;\n    var M = this._maxEntries;\n    var node;\n\n    if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n    }\n\n    if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n    }\n\n    node = createNode([]);\n    node.leaf = false;\n    node.height = height;\n\n    // split the items into M mostly square tiles\n\n    var N2 = Math.ceil(N / M);\n    var N1 = N2 * Math.ceil(Math.sqrt(M));\n\n    multiSelect(items, left, right, N1, this.compareMinX);\n\n    for (var i = left; i <= right; i += N1) {\n\n        var right2 = Math.min(i + N1 - 1, right);\n\n        multiSelect(items, i, right2, N2, this.compareMinY);\n\n        for (var j = i; j <= right2; j += N2) {\n\n            var right3 = Math.min(j + N2 - 1, right2);\n\n            // pack each entry recursively\n            node.children.push(this._build(items, j, right3, height - 1));\n        }\n    }\n\n    calcBBox(node, this.toBBox);\n\n    return node;\n};\n\nRBush.prototype._chooseSubtree = function _chooseSubtree (bbox, node, level, path) {\n    while (true) {\n        path.push(node);\n\n        if (node.leaf || path.length - 1 === level) { break; }\n\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = (void 0);\n\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var area = bboxArea(child);\n            var enlargement = enlargedArea(bbox, child) - area;\n\n            // choose entry with the least area enlargement\n            if (enlargement < minEnlargement) {\n                minEnlargement = enlargement;\n                minArea = area < minArea ? area : minArea;\n                targetNode = child;\n\n            } else if (enlargement === minEnlargement) {\n                // otherwise choose one with the smallest area\n                if (area < minArea) {\n                    minArea = area;\n                    targetNode = child;\n                }\n            }\n        }\n\n        node = targetNode || node.children[0];\n    }\n\n    return node;\n};\n\nRBush.prototype._insert = function _insert (item, level, isNode) {\n    var bbox = isNode ? item : this.toBBox(item);\n    var insertPath = [];\n\n    // find the best node for accommodating the item, saving all nodes along the path too\n    var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n    // put the item into the node\n    node.children.push(item);\n    extend(node, bbox);\n\n    // split on node overflow; propagate upwards if necessary\n    while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n            this._split(insertPath, level);\n            level--;\n        } else { break; }\n    }\n\n    // adjust bboxes along the insertion path\n    this._adjustParentBBoxes(bbox, insertPath, level);\n};\n\n// split overflowed node into two\nRBush.prototype._split = function _split (insertPath, level) {\n    var node = insertPath[level];\n    var M = node.children.length;\n    var m = this._minEntries;\n\n    this._chooseSplitAxis(node, m, M);\n\n    var splitIndex = this._chooseSplitIndex(node, m, M);\n\n    var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n    newNode.height = node.height;\n    newNode.leaf = node.leaf;\n\n    calcBBox(node, this.toBBox);\n    calcBBox(newNode, this.toBBox);\n\n    if (level) { insertPath[level - 1].children.push(newNode); }\n    else { this._splitRoot(node, newNode); }\n};\n\nRBush.prototype._splitRoot = function _splitRoot (node, newNode) {\n    // split root node\n    this.data = createNode([node, newNode]);\n    this.data.height = node.height + 1;\n    this.data.leaf = false;\n    calcBBox(this.data, this.toBBox);\n};\n\nRBush.prototype._chooseSplitIndex = function _chooseSplitIndex (node, m, M) {\n    var index;\n    var minOverlap = Infinity;\n    var minArea = Infinity;\n\n    for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n            minOverlap = overlap;\n            index = i;\n\n            minArea = area < minArea ? area : minArea;\n\n        } else if (overlap === minOverlap) {\n            // otherwise choose distribution with minimum area\n            if (area < minArea) {\n                minArea = area;\n                index = i;\n            }\n        }\n    }\n\n    return index || M - m;\n};\n\n// sorts node children by the best axis for split\nRBush.prototype._chooseSplitAxis = function _chooseSplitAxis (node, m, M) {\n    var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n    var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n    var xMargin = this._allDistMargin(node, m, M, compareMinX);\n    var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n    // if total distributions margin value is minimal for x, sort by minX,\n    // otherwise it's already sorted by minY\n    if (xMargin < yMargin) { node.children.sort(compareMinX); }\n};\n\n// total margin of all possible split distributions where each node is at least m full\nRBush.prototype._allDistMargin = function _allDistMargin (node, m, M, compare) {\n    node.children.sort(compare);\n\n    var toBBox = this.toBBox;\n    var leftBBox = distBBox(node, 0, m, toBBox);\n    var rightBBox = distBBox(node, M - m, M, toBBox);\n    var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n    for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n    }\n\n    for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n    }\n\n    return margin;\n};\n\nRBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes (bbox, path, level) {\n    // adjust bboxes along the given tree path\n    for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n    }\n};\n\nRBush.prototype._condense = function _condense (path) {\n    // go through the path, removing empty nodes and updating bboxes\n    for (var i = path.length - 1, siblings = (void 0); i >= 0; i--) {\n        if (path[i].children.length === 0) {\n            if (i > 0) {\n                siblings = path[i - 1].children;\n                siblings.splice(siblings.indexOf(path[i]), 1);\n\n            } else { this.clear(); }\n\n        } else { calcBBox(path[i], this.toBBox); }\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) { return items.indexOf(item); }\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) { return i; }\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) { destNode = createNode(null); }\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX);\n    var minY = Math.max(a.minY, b.minY);\n    var maxX = Math.min(a.maxX, b.maxX);\n    var maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) { continue; }\n\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n\nreturn RBush;\n\n}));\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","/**\n * @module ol/style/RegularShape\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport ImageState from '../ImageState.js';\nimport { defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit } from '../render/canvas.js';\nimport ImageStyle from './Image.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the shape\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n */\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} miterLimit\n */\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nvar RegularShape = /** @class */ (function (_super) {\n    __extends(RegularShape, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function RegularShape(options) {\n        var _this = this;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ?\n            options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: 1,\n            rotateWithView: rotateWithView,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            scale: 1,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n        }) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.hitDetectionCanvas_ = null;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        _this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.points_ = options.points;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.radius_ = options.radius !== undefined ? options.radius : options.radius1;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.radius2_ = options.radius2;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.angle_ = options.angle !== undefined ? options.angle : 0;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.imageSize_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.hitDetectionImageSize_ = null;\n        _this.render();\n        return _this;\n    }\n    /**\n     * Clones the style.\n     * @return {RegularShape} The cloned style.\n     * @api\n     */\n    RegularShape.prototype.clone = function () {\n        var style = new RegularShape({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            points: this.getPoints(),\n            radius: this.getRadius(),\n            radius2: this.getRadius2(),\n            angle: this.getAngle(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getAnchor = function () {\n        return this.anchor_;\n    };\n    /**\n     * Get the angle used in generating the shape.\n     * @return {number} Shape's rotation in radians.\n     * @api\n     */\n    RegularShape.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    /**\n     * Get the fill style for the shape.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    RegularShape.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImage = function (pixelRatio) {\n        return this.hitDetectionCanvas_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getImage = function (pixelRatio) {\n        return this.canvas_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageSize = function () {\n        return this.imageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImageSize = function () {\n        return this.hitDetectionImageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageState = function () {\n        return ImageState.LOADED;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getOrigin = function () {\n        return this.origin_;\n    };\n    /**\n     * Get the number of points for generating the shape.\n     * @return {number} Number of points for stars and regular polygons.\n     * @api\n     */\n    RegularShape.prototype.getPoints = function () {\n        return this.points_;\n    };\n    /**\n     * Get the (primary) radius for the shape.\n     * @return {number} Radius.\n     * @api\n     */\n    RegularShape.prototype.getRadius = function () {\n        return this.radius_;\n    };\n    /**\n     * Get the secondary radius for the shape.\n     * @return {number|undefined} Radius2.\n     * @api\n     */\n    RegularShape.prototype.getRadius2 = function () {\n        return this.radius2_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * Get the stroke style for the shape.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    RegularShape.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.listenImageChange = function (listener) { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.load = function () { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.unlistenImageChange = function (listener) { };\n    /**\n     * @protected\n     */\n    RegularShape.prototype.render = function () {\n        var lineCap = defaultLineCap;\n        var lineJoin = defaultLineJoin;\n        var miterLimit = 0;\n        var lineDash = null;\n        var lineDashOffset = 0;\n        var strokeStyle;\n        var strokeWidth = 0;\n        if (this.stroke_) {\n            strokeStyle = this.stroke_.getColor();\n            if (strokeStyle === null) {\n                strokeStyle = defaultStrokeStyle;\n            }\n            strokeStyle = asColorLike(strokeStyle);\n            strokeWidth = this.stroke_.getWidth();\n            if (strokeWidth === undefined) {\n                strokeWidth = defaultLineWidth;\n            }\n            lineDash = this.stroke_.getLineDash();\n            lineDashOffset = this.stroke_.getLineDashOffset();\n            lineJoin = this.stroke_.getLineJoin();\n            if (lineJoin === undefined) {\n                lineJoin = defaultLineJoin;\n            }\n            lineCap = this.stroke_.getLineCap();\n            if (lineCap === undefined) {\n                lineCap = defaultLineCap;\n            }\n            miterLimit = this.stroke_.getMiterLimit();\n            if (miterLimit === undefined) {\n                miterLimit = defaultMiterLimit;\n            }\n        }\n        var size = 2 * (this.radius_ + strokeWidth) + 1;\n        var renderOptions = {\n            strokeStyle: strokeStyle,\n            strokeWidth: strokeWidth,\n            size: size,\n            lineCap: lineCap,\n            lineDash: lineDash,\n            lineDashOffset: lineDashOffset,\n            lineJoin: lineJoin,\n            miterLimit: miterLimit\n        };\n        var context = createCanvasContext2D(size, size);\n        this.canvas_ = context.canvas;\n        // canvas.width and height are rounded to the closest integer\n        size = this.canvas_.width;\n        var imageSize = size;\n        var displacement = this.getDisplacement();\n        this.draw_(renderOptions, context, 0, 0);\n        this.createHitDetectionCanvas_(renderOptions);\n        this.anchor_ = [size / 2 - displacement[0], size / 2 + displacement[1]];\n        this.size_ = [size, size];\n        this.imageSize_ = [imageSize, imageSize];\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The rendering context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.draw_ = function (renderOptions, context, x, y) {\n        var i, angle0, radiusC;\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            if (color === null) {\n                color = defaultFillStyle;\n            }\n            context.fillStyle = asColorLike(color);\n            context.fill();\n        }\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (context.setLineDash && renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineCap = renderOptions.lineCap;\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n        context.closePath();\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     */\n    RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n        this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n        this.hitDetectionCanvas_ = this.canvas_;\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            // determine if fill is transparent (or pattern or gradient)\n            var opacity = 0;\n            if (typeof color === 'string') {\n                color = asArray(color);\n            }\n            if (color === null) {\n                opacity = 1;\n            }\n            else if (Array.isArray(color)) {\n                opacity = color.length === 4 ? color[3] : 1;\n            }\n            if (opacity === 0) {\n                // if a transparent fill style is set, create an extra hit-detection image\n                // with a default fill style\n                var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n                this.hitDetectionCanvas_ = context.canvas;\n                this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context, x, y) {\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            var i = void 0, radiusC = void 0, angle0 = void 0;\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        context.fillStyle = defaultFillStyle;\n        context.fill();\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.stroke();\n        }\n        context.closePath();\n    };\n    return RegularShape;\n}(ImageStyle));\nexport default RegularShape;\n//# sourceMappingURL=RegularShape.js.map","/**\n * @module ol/style/Circle\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n */\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nvar CircleStyle = /** @class */ (function (_super) {\n    __extends(CircleStyle, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function CircleStyle(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            points: Infinity,\n            fill: options.fill,\n            radius: options.radius,\n            stroke: options.stroke,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n        }) || this;\n        return _this;\n    }\n    /**\n    * Clones the style.\n    * @return {CircleStyle} The cloned style.\n    * @override\n    * @api\n    */\n    CircleStyle.prototype.clone = function () {\n        var style = new CircleStyle({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            radius: this.getRadius(),\n            displacement: this.getDisplacement().slice()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * Set the circle radius.\n     *\n     * @param {number} radius Circle radius.\n     * @api\n     */\n    CircleStyle.prototype.setRadius = function (radius) {\n        this.radius_ = radius;\n        this.render();\n    };\n    return CircleStyle;\n}(RegularShape));\nexport default CircleStyle;\n//# sourceMappingURL=Circle.js.map","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAACNklEQVQokX2SXUhTYRzGf2fnnA3LRjvzi/yK2jKR1WZ1YQaiBH2aN5Ktm4joLrqIoLyIqCioroKuIiIiTAhCxQ+86MJQSKGEErVtykjnpkPMhW5n57jThW5MEp+X5+r3Prz8n/8rSF4zWSoAbgAXACdgAAGgG3gJRNIXhaxgM/DGfdq9q/xQGdZ8KwCxaIzfP2cY7RtdBq4DH7ODzUB7080msaSimK0U8oXoeNFpAJeBdkHymvMB36VbLbvLD5ZtGUprxj9L2/MPMeCAaHKJt+vO1505VnsUeeMMdg3R8aqDb5+/gybgcDqQkbHb7YBgCfqCqglorDpciYyEjMRQ7xDmsMyXpwP0P+qHoMFgz2CGuzxVAI0mYL8tz4ZhGBiGwfDACA+vPECxKhTZCnly7THDAyMZrhQoAE4JQE+uoUv6es0IpIzU5uEM0JPrXNfWADABU/PhedSkippU8Rx3c+/tfRb+LBBdjnL3dSueGneGR+YiAH4T0D35Y5JEPEEinsBT4yahxGloPUn9nQbUPJUjJ6ozfHx0HKBbkLzmQsB3znvWWrqvZNt1hGcidL7r+ptexwow4R/ztyhFimDZYUHTtf88GwzR09ZrAFeBr6LJJQL8AiamxqdP7a0st6RSa2ialvHqSpye932xjVB7uhyACqAKGFsIR1mNxzd5MboIMA1UA/UA6RcvFjv2PHN6HKW5tp3our7JoiySX5JXlJObU7s0vyQDn6TMJw7MEQrMbVtOtv4BPMP+wIQPFTgAAAAASUVORK5CYII=\""],"sourceRoot":""}