(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62903bc2"],{"18af":function(t,e,i){"use strict";var o=i("7134"),s=i.n(o);s.a},7134:function(t,e,i){},a434:function(t,e,i){"use strict";var o=i("23e7"),s=i("23cb"),n=i("a691"),r=i("50c4"),a=i("7b0b"),l=i("65f0"),h=i("8418"),c=i("1dde"),d=i("ae40"),u=c("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,m=Math.min,p=9007199254740991,w="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u||!f},{splice:function(t,e){var i,o,c,d,u,f,g=a(this),S=r(g.length),C=s(t,S),W=arguments.length;if(0===W?i=o=0:1===W?(i=0,o=S-C):(i=W-2,o=m(v(n(e),0),S-C)),S+i-o>p)throw TypeError(w);for(c=l(g,o),d=0;d<o;d++)u=C+d,u in g&&h(c,d,g[u]);if(c.length=o,i<o){for(d=C;d<S-o;d++)u=d+o,f=d+i,u in g?g[f]=g[u]:delete g[f];for(d=S;d>S-o+i;d--)delete g[d-1]}else if(i>o)for(d=S-o;d>C;d--)u=d+o-1,f=d+i-1,u in g?g[f]=g[u]:delete g[f];for(d=0;d<i;d++)g[d+C]=arguments[d+2];return g.length=S-o+i,c}})},ae40:function(t,e,i){var o=i("83ab"),s=i("d039"),n=i("5135"),r=Object.defineProperty,a={},l=function(t){throw t};t.exports=function(t,e){if(n(a,t))return a[t];e||(e={});var i=[][t],h=!!n(e,"ACCESSORS")&&e.ACCESSORS,c=n(e,0)?e[0]:l,d=n(e,1)?e[1]:void 0;return a[t]=!!i&&!s((function(){if(h&&!o)return!0;var t={length:-1};h?r(t,1,{enumerable:!0,get:l}):t[1]=1,i.call(t,c,d)}))}},bd99:function(t,e,i){"use strict";i.r(e);var o,s,n,r,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"500px"}},[i("video-scroller",{attrs:{"time-data":t.timeData},on:{getResultTime:t.getResultTime}}),i("div",[t._v(" 输出结果："+t._s(t.result.start)+"至"+t._s(t.result.end)+" ")])],1)},l=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-scroller-component-div"},[i("div",{ref:"canvasBox",staticClass:"top-div"},[i("canvas",{attrs:{id:"myCanvas",width:t.canvasWidth,height:t.canvasHeight}}),i("div",{staticClass:"ruler-scroller",style:t.rulerScrollStyle,on:{mousedown:function(e){return t.handleScrollerMouseDown(e,"rulerInfo")},mouseenter:function(e){t.isRealTimeShow=!0},mousemove:function(e){t.isRealTimeShow=!0},mouseleave:function(e){t.isRealTimeShow=!1}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isRealTimeShow,expression:"isRealTimeShow"}],staticClass:"float-span-space float-left-top"},[t._v(t._s(t.result.start))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isRealTimeShow,expression:"isRealTimeShow"}],staticClass:"float-span-space float-right-top"},[t._v(t._s(t.result.end))]),i("div",{staticClass:"icon-triangle-div",on:{mousedown:function(e){return e.stopPropagation(),t.handleWidthChangeMouseDown(e,"left","rulerInfo")}}},[i("i",{staticClass:"icon-special"}),i("i",{staticClass:"icon-triangle"})]),i("div",{staticClass:"icon-triangle-div icon-triangle-div-right",on:{mousedown:function(e){return e.stopPropagation(),t.handleWidthChangeMouseDown(e,"right","rulerInfo")}}},[i("i",{staticClass:"icon-special icon-special-right"}),i("i",{staticClass:"icon-triangle icon-triangle-right"})])])]),i("div",{staticClass:"bottom-div"},[i("div",{ref:"scrollerOutBox",staticClass:"scroller-out-box"},[i("div",{staticClass:"scroller-in-box",style:t.scrollerStyle,on:{mousedown:function(e){return t.handleScrollerMouseDown(e,"scrollerInfo")}}},[i("i",{staticClass:"icon-drag",on:{mousedown:function(e){return e.stopPropagation(),t.handleWidthChangeMouseDown(e,"left","scrollerInfo")}}}),i("span",[t._v("|||")]),i("i",{staticClass:"icon-drag",on:{mousedown:function(e){return e.stopPropagation(),t.handleWidthChangeMouseDown(e,"right","scrollerInfo")}}})])]),i("span",{staticClass:"float-span-space float-left-style"},[t._v(t._s(t.timeData.videoStartTime))]),i("span",{staticClass:"float-span-space float-right-style"},[t._v(t._s(t.timeData.videoEndTime))])])])},c=[],d=(i("a434"),i("c1df")),u=i("2ef0"),f={name:"VideoScroller",props:{timeData:{type:Object,default:null}},data:function(){return{rulerInfo:{isDrag:!1,isWidthChange:!1,start:0,prePosition:0,nowPosition:0,preWidth:200,width:200,maxScrollerWidth:0},scrollerInfo:{isDrag:!1,isWidthChange:!1,start:0,prePosition:0,nowPosition:0,preWidth:200,width:200,maxScrollerWidth:0},canvasWidth:0,canvasHeight:0,rulerRange:95,ready:!1,pendingEvent:[],isRealTimeShow:!1,result:{start:"",end:""}}},computed:{rulerScrollStyle:function(){return{width:this.rulerInfo.width+"px",left:this.rulerInfo.nowPosition+10+"px"}},scrollerStyle:function(){return{width:this.scrollerInfo.width+"px",left:this.scrollerInfo.nowPosition+"px"}}},watch:{timeData:{handler:function(t){t&&this.calculateResult()},immediate:!0,deep:!0}},mounted:function(){this.initComponent()},methods:{initComponent:function(){this.rulerInfo.maxScrollerWidth=this.$refs.scrollerOutBox.offsetWidth-20,this.scrollerInfo.maxScrollerWidth=this.$refs.scrollerOutBox.offsetWidth,this.initCanvas()},initCanvas:function(){var t=this;this.canvasWidth=this.$refs.canvasBox.offsetWidth,this.canvasHeight=this.$refs.canvasBox.offsetHeight-2,this.$nextTick((function(){if(t.drawGraduationRuler(),t.ready=!0,t.pendingEvent.length){for(var e=[],i=t.pendingEvent.length,o=0;o<i;o++)t[t.pendingEvent[o]](),e.push(o);for(var s=0,n=e;s<n.length;s++){var r=n[s];t.pendingEvent.splice(r)}}}))},drawGraduationRuler:function(){var t=document.getElementById("myCanvas"),e=t.getContext("2d"),i=document.createElement("canvas");i.width=t.width,i.height=t.height;var o=i.getContext("2d"),s=0,n=Math.floor(this.canvasWidth/96),r=(this.canvasWidth-96*n)/2+n;o.translate(r,0);for(var a=0;a<this.rulerRange;a++){o.beginPath();var l=0;l=a%5===0&&0!==a?this.canvasHeight-34:this.canvasHeight-24,o.moveTo(s,l),o.lineTo(s,this.canvasHeight-2),o.lineWidth=1,o.strokeStyle="#d0dbdf",o.stroke(),s+=n}e.drawImage(i,0,0)},handleScrollerMouseDown:function(t,e){var i=this;this[e].isDrag=!0,this[e].start=t.clientX,o=function(t){i.handleScrollerMouseMove(t,e)},s=function(t){i.handleScrollerMouseUp(t,e)},document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)},handleScrollerMouseMove:function(t,e){if(t.preventDefault(),this[e].isDrag){var i=t.clientX;this[e].nowPosition=this[e].prePosition+(i-this[e].start),this.checkScrollerCrossBorder(e)}},handleScrollerMouseUp:function(t,e){var i=this;this[e].isDrag=!1,this[e].prePosition=this[e].nowPosition,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),this.$nextTick((function(){i.calculateResult()}))},checkScrollerCrossBorder:function(t){var e=this[t].maxScrollerWidth-this[t].width;this[t].nowPosition>=0&&this[t].nowPosition<=e||(this[t].nowPosition<0?this[t].nowPosition=0:this[t].nowPosition=e)},handleWidthChangeMouseDown:function(t,e,i){var o=this;this[i].start=t.clientX,this[i].isWidthChange=!0,n=function(t){o.handleScrollerWidthMouseMove(t,e,i)},r=function(t){o.handleScrollerWidthMouseUp(t,e,i)},document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)},handleScrollerWidthMouseMove:function(t,e,i){if(t.preventDefault(),this[i].isWidthChange){var o=t.clientX;if("left"===e){if(this[i].nowPosition=this[i].prePosition+(o-this[i].start),this.checkScrollerCrossBorder(i),this[i].nowPosition<=0)return;this[i].width=this[i].preWidth-(o-this[i].start)}else this[i].width=this[i].preWidth+(o-this[i].start);this.checkScrollerWidthCrossBorder(i)}},checkScrollerWidthCrossBorder:function(t){var e=this[t].maxScrollerWidth,i=100,o=this[t].width+this[t].nowPosition;o<=e&&this[t].width>i||(this[t].width=o>e?e-this[t].nowPosition:i)},handleScrollerWidthMouseUp:function(t,e,i){var o=this;this[i].isWidthChange=!1,"left"===e&&(this[i].prePosition=this[i].nowPosition),this[i].preWidth=this[i].width,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),this.$nextTick((function(){o.calculateResult()}))},calculateResult:function(){if(this.ready){var t=d(u.get(this.timeData,"videoDate","")+" "+u.get(this.timeData,"videoStartTime")).valueOf(),e=d(u.get(this.timeData,"videoDate","")+" "+u.get(this.timeData,"videoEndTime")).valueOf(),i=e-t,o=i/this.scrollerInfo.maxScrollerWidth,s=o*this.scrollerInfo.nowPosition,n=o*this.scrollerInfo.width,r=n/this.rulerInfo.maxScrollerWidth,a=this.rulerInfo.nowPosition*r,l=(this.rulerInfo.nowPosition+this.rulerInfo.width)*r,h=Math.ceil(s+a+t),c=Math.ceil(l+t+s),f=d(h).format("YYYY-MM-DD HH:mm:ss"),v=d(c).format("YYYY-MM-DD HH:mm:ss");console.log(f,v),this.result.start=d(f).format("HH:mm:ss"),this.result.end=d(v).format("HH:mm:ss"),this.$emit("getResultTime",{start:f,end:v})}else this.pendingEvent.push("calculateResult")}}},v=f,m=(i("18af"),i("2877")),p=Object(m["a"])(v,h,c,!1,null,"2c435209",null),w=p.exports,g={name:"VideoScrollerDemo",components:{VideoScroller:w},data:function(){return{timeData:{videoDate:"2019-12-26",videoStartTime:"12:00:00",videoEndTime:"13:00:00"},result:{start:"",end:""}}},methods:{getResultTime:function(t){this.result=t}}},S=g,C=Object(m["a"])(S,a,l,!1,null,"43ee4e56",null);e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-62903bc2.74f35c98.js.map