{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./src/public/selection-picture.vue?c98a","webpack:///src/public/selection-picture.vue","webpack:///./src/public/selection-picture.vue?4d67","webpack:///./src/public/selection-picture.vue","webpack:///./node_modules/core-js/modules/es.number.constructor.js"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","isObject","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","constructor","prototype","render","_vm","this","_h","$createElement","_c","_self","staticClass","style","attrs","canvasWidth","canvasHeight","on","$event","type","indexOf","_k","keyCode","key","button","preventDefault","mousedown","mousemove","mouseup","clear","isMultiSelecter","_e","regionDataUrl","targetWidth","staticRenderFns","props","default","data","canvas","ctx","offCanvas","offCtx","preCanvas","preCtx","img","drawing","beginDrawPoint","drawingPoint","centerPoint","rectWidthHeight","regionResultList","computed","canvasStyle","watch","src","immediate","handler","initCanvas","created","mounted","methods","reset","Image","addEventListener","width","imgWidth","height","imgHeight","e","offsetX","offsetY","getLeftImage","draw","tempBeginPoint","i","rate","tempEndPoint","tempCanvas","tempCtx","drawImage","toDataURL","push","$emit","document","createElement","getContext","strokeStyle","strokeWidth","component","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","length","index","code","it","charCodeAt","NaN","slice","parseInt","NumberWrapper","value","arguments","valueOf","call","keys","split","j"],"mappings":"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","file":"js/chunk-4d9a52c6.b57cd1c9.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"clearfix\"},[_c('div',{staticClass:\"left\"},[_c('canvas',{staticClass:\"open-3D\",style:(_vm.canvasStyle),attrs:{\"id\":\"canvas\",\"width\":_vm.canvasWidth,\"height\":_vm.canvasHeight},on:{\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }$event.preventDefault();return _vm.mousedown($event)},\"mousemove\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }$event.preventDefault();return _vm.mousemove($event)},\"mouseup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }$event.preventDefault();return _vm.mouseup($event)},\"mouseleave\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }$event.preventDefault();return _vm.mouseup($event)},\"contextmenu\":function($event){$event.preventDefault();return _vm.clear($event)}}})]),(!_vm.isMultiSelecter)?_c('div',{staticClass:\"right\"},[_c('img',{attrs:{\"src\":_vm.regionDataUrl,\"width\":_vm.targetWidth}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"clearfix\">\r\n    <div class=\"left\">\r\n      <canvas\r\n        id=\"canvas\"\r\n        :width=\"canvasWidth\"\r\n        :height=\"canvasHeight\"\r\n        class=\"open-3D\"\r\n        :style=\"canvasStyle\"\r\n        @mousedown.left.prevent=\"mousedown\"\r\n        @mousemove.left.prevent=\"mousemove\"\r\n        @mouseup.left.prevent=\"mouseup\"\r\n        @mouseleave.left.prevent=\"mouseup\"\r\n        @contextmenu.prevent=\"clear\"\r\n      />\r\n    </div>\r\n\r\n\r\n    <div\r\n      v-if=\"!isMultiSelecter\"\r\n      class=\"right\"\r\n    >\r\n      <!--<div class=\"right\">-->\r\n      <img\r\n        :src=\"regionDataUrl\"\r\n        :width=\"targetWidth\"\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props:{\r\n    'width':{\r\n      type:Number,\r\n      default:0\r\n    },\r\n    'height':{\r\n      type:Number,\r\n      default:0\r\n    },\r\n    'src':{\r\n      type:String,\r\n      default:null\r\n    },\r\n    'isHoverTrigger':{\r\n      type:Boolean,\r\n      default:false\r\n    },\r\n    'isInit':{\r\n      type:Boolean,\r\n      default:false\r\n    },\r\n    'targetWidth':{\r\n      type:Number,\r\n      default:null\r\n    },\r\n    // 多选\r\n    'isMultiSelecter':{\r\n      type:Boolean,\r\n      default:false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      canvas: null, // 在线画布\r\n      ctx: null,\r\n      offCanvas: null, // 离线画布\r\n      offCtx: null,\r\n      preCanvas: null, // 上一次框选结果画布\r\n      preCtx: null,\r\n\r\n      img: null,\r\n      drawing: false,\r\n      beginDrawPoint: null,\r\n      drawingPoint: null,\r\n      centerPoint: null,\r\n\r\n      rectWidthHeight: [],\r\n      regionDataUrl: '', //框选的dataUrl（base64）\r\n\r\n      canvasWidth :0,\r\n      canvasHeight :0,\r\n      regionResultList:[], // 框选结果列表\r\n    };\r\n  },\r\n  computed: {\r\n    canvasStyle(){\r\n      return `width:${this.canvasWidth}px;height:${this.canvasHeight}px`;\r\n    }\r\n  },\r\n  watch: {\r\n    src:{\r\n      immediate:true,\r\n      handler(){\r\n        this.initCanvas();\r\n      }\r\n    }\r\n  },\r\n  created: function () {\r\n\r\n  },\r\n  mounted: function () {\r\n  },\r\n  methods: {\r\n    reset(){\r\n      this.canvas = null;// 在线画布\r\n      this.ctx = null;\r\n      this.offCanvas = null;// 离线画布\r\n      this.offCtx = null;\r\n      this.preCanvas = null;// 上一次框选结果画布\r\n      this.preCtx = null;\r\n\r\n      this.img = null;\r\n      this.drawing = false;\r\n      this.beginDrawPoint = null;\r\n      this.drawingPoint = null;\r\n      this.centerPoint = null;\r\n\r\n      this.rectWidthHeight = [];\r\n      this.regionDataUrl = '';//框选的dataUrl（base64）\r\n\r\n      this.canvasWidth = 0;\r\n      this.canvasHeight = 0;\r\n      this.regionResultList = []; // 框选结果列表\r\n    },\r\n    initCanvas() {\r\n      this.reset();\r\n      if(!this.src){\r\n        return;\r\n      }\r\n\r\n      this.img = new Image();\r\n      // this.img.crossOrigin = 'Anonymous';\r\n      this.img.addEventListener('load', () => {\r\n        let imgWidth = this.img.width;\r\n        let imgHeight = this.img.height;\r\n        let imgRate = imgWidth / imgHeight;\r\n        let canvasRate = this.width / this.height;\r\n        if(imgRate > canvasRate){\r\n          let width = null;\r\n          if(imgWidth > this.width){\r\n            width = this.width;\r\n          }else{\r\n            width = imgWidth;\r\n          }\r\n          this.canvasWidth = width;\r\n          this.canvasHeight = width * imgHeight / imgWidth;\r\n        }else if(imgRate <= canvasRate){\r\n          let height = null;\r\n          if(imgHeight > this.height){\r\n            height = this.height;\r\n          }else{\r\n            height = imgHeight;\r\n          }\r\n          this.canvasWidth = height * imgWidth / imgHeight;\r\n          this.canvasHeight = height;\r\n        }else{\r\n          this.canvasWidth = imgWidth;\r\n          this.canvasHeight = imgHeight;\r\n        }\r\n        this.$nextTick(()=>{\r\n          this.canvas = document.getElementById('canvas');\r\n          this.ctx = this.canvas.getContext('2d');\r\n\r\n          this.offCanvas = document.createElement('canvas');\r\n          this.offCanvas.width = this.canvasWidth;\r\n          this.offCanvas.height = this.canvasHeight;\r\n          this.offCtx = this.offCanvas.getContext('2d');\r\n          this.offCtx.strokeStyle = '#ee5051';\r\n          this.offCtx.strokeWidth = 2;\r\n          this.offCtx.drawImage(this.img, 0, 0, this.offCanvas.width, this.offCanvas.height);\r\n\r\n          this.ctx.drawImage(this.offCanvas, 0, 0);\r\n\r\n          if(this.isInit){\r\n            this.centerPoint = [250, 250 ];\r\n            this.getLeftImage();\r\n          }\r\n        });\r\n      });\r\n      this.img.src = this.src;\r\n    },\r\n    /**\r\n       *                 drawing:false,\r\n       beginDrawPoint:0,\r\n       drawingPoint:0,\r\n       */\r\n    mousedown(e) {\r\n      if(this.isHoverTrigger){\r\n        return;\r\n      }\r\n\r\n      this.drawing = true;\r\n      this.beginDrawPoint = [e.offsetX, e.offsetY];\r\n    },\r\n    mousemove(e) {\r\n      if(this.isHoverTrigger){\r\n        this.centerPoint = [e.offsetX, e.offsetY ];\r\n        this.getLeftImage('center');\r\n        // this.draw();\r\n        return;\r\n      }\r\n\r\n      if (this.drawing) {\r\n        this.drawingPoint = [e.offsetX, e.offsetY];\r\n        this.draw();\r\n      }\r\n    },\r\n    mouseup(e) {\r\n      if(this.isHoverTrigger){\r\n        return;\r\n      }\r\n\r\n      this.drawingPoint = [e.offsetX, e.offsetY];\r\n      if (this.drawing) {\r\n        this.drawing = false;\r\n        this.draw(true);\r\n        if (this.beginDrawPoint[0] === this.drawingPoint[0] && this.beginDrawPoint[1] === this.drawingPoint[1]) {\r\n          this.beginDrawPoint = null;\r\n          this.drawingPoint = null;\r\n          this.regionDataUrl = '';\r\n        } else {\r\n          this.getLeftImage();\r\n        }\r\n      }\r\n    },\r\n    //获取框选的图片\r\n    getLeftImage() {\r\n      let tempCanvas = document.createElement('canvas');\r\n      let rate = this.img.width / this.offCanvas.width;\r\n      let rectWidthHeight = [];\r\n      let tempBeginPoint = [];\r\n      let tempEndPoint = [];\r\n      if(this.isHoverTrigger){\r\n        for (let i = 0; i < this.centerPoint.length; i ++) {\r\n          tempBeginPoint[i] = this.centerPoint[i] * rate - 56;\r\n          tempEndPoint[i] = this.centerPoint[i] * rate + 50;\r\n        }\r\n        rectWidthHeight = [116, 100];\r\n      }else{\r\n        for (let i = 0; i < this.drawingPoint.length; i ++) {\r\n          tempBeginPoint[i] = this.beginDrawPoint[i] * rate;\r\n          tempEndPoint[i] = this.drawingPoint[i] * rate;\r\n        }\r\n        for (let i = 0; i < tempBeginPoint.length; i ++) {\r\n          rectWidthHeight[i] = Math.abs(tempEndPoint[i] - tempBeginPoint[i]);\r\n        }\r\n      }\r\n\r\n      tempCanvas.width = rectWidthHeight[0];\r\n      tempCanvas.height = rectWidthHeight[1];\r\n      let tempCtx = tempCanvas.getContext('2d');\r\n      if(tempEndPoint[0] - tempBeginPoint[0] < 0){\r\n        tempBeginPoint = tempEndPoint;\r\n      }\r\n      tempCtx.drawImage(this.img, ...tempBeginPoint, tempCanvas.width, tempCanvas.height, 0, 0, tempCanvas.width, tempCanvas.height);\r\n      this.regionDataUrl = tempCanvas.toDataURL();\r\n      this.regionResultList.push(this.regionDataUrl);\r\n      this.$emit('region', this.regionResultList);\r\n    },\r\n    draw(isEnd) {\r\n      if(this.preCanvas){\r\n        this.offCtx.drawImage(this.preCanvas, 0, 0, this.offCanvas.width, this.offCanvas.height);\r\n      }else{\r\n        this.offCtx.drawImage(this.img, 0, 0, this.offCanvas.width, this.offCanvas.height);\r\n      }\r\n      let rectWidthHeight = [];\r\n      for (let i = 0; i < this.drawingPoint.length; i ++) {\r\n        rectWidthHeight[i] = this.drawingPoint[i] - this.beginDrawPoint[i];\r\n      }\r\n      this.rectWidthHeight = rectWidthHeight;\r\n      this.offCtx.strokeRect(...this.beginDrawPoint, ...rectWidthHeight);\r\n      this.ctx.drawImage(this.offCanvas, 0, 0);\r\n      if(isEnd && this.isMultiSelecter){\r\n        if(!this.preCanvas){\r\n          this.preCanvas = document.createElement('canvas');\r\n          this.preCanvas.width = this.canvasWidth;\r\n          this.preCanvas.height = this.canvasHeight;\r\n          this.preCtx = this.preCanvas.getContext('2d');\r\n          this.preCtx.strokeStyle = '#ee5051';\r\n          this.preCtx.strokeWidth = 2;\r\n        }\r\n        this.preCtx.drawImage(this.offCanvas, 0, 0);\r\n      }\r\n    },\r\n    clear() {\r\n      this.offCtx.drawImage(this.img, 0, 0, this.offCanvas.width, this.offCanvas.height);\r\n      this.beginDrawPoint = null;\r\n      this.drawingPoint = null;\r\n      this.regionResultList = [];\r\n      this.preCanvas = null;\r\n      this.preCtx = null;\r\n      this.ctx.drawImage(this.offCanvas, 0, 0);\r\n      // this.reset();\r\n    },\r\n  }\r\n\r\n};\r\n</script>\r\n\r\n<!-- Add 'scoped\" attribute to limit CSS to this component only -->\r\n<style scoped lang=\"less\">\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection-picture.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./selection-picture.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./selection-picture.vue?vue&type=template&id=5db7b127&scoped=true&\"\nimport script from \"./selection-picture.vue?vue&type=script&lang=js&\"\nexport * from \"./selection-picture.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5db7b127\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n"],"sourceRoot":""}