(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d9a52c6"],{2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var s=i("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t){return a(t)||r(t)||Object(s["a"])(t)||o()}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var n=i("1d80"),a=i("5899"),r="["+a+"]",s=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),h=function(t){return function(e){var i=String(n(e));return 1&t&&(i=i.replace(s,"")),2&t&&(i=i.replace(o,"")),i}};t.exports={start:h(1),end:h(2),trim:h(3)}},7156:function(t,e,i){var n=i("861d"),a=i("d2bb");t.exports=function(t,e,i){var r,s;return a&&"function"==typeof(r=e.constructor)&&r!==i&&n(s=r.prototype)&&s!==i.prototype&&a(t,s),t}},"8ea2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clearfix"},[i("div",{staticClass:"left"},[i("canvas",{staticClass:"open-3D",style:t.canvasStyle,attrs:{id:"canvas",width:t.canvasWidth,height:t.canvasHeight},on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.preventDefault(),t.mousedown(e))},mousemove:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.preventDefault(),t.mousemove(e))},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.preventDefault(),t.mouseup(e))},mouseleave:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.preventDefault(),t.mouseup(e))},contextmenu:function(e){return e.preventDefault(),t.clear(e)}}})]),t.isMultiSelecter?t._e():i("div",{staticClass:"right"},[i("img",{attrs:{src:t.regionDataUrl,width:t.targetWidth}})])])},a=[],r=(i("99af"),i("a9e3"),i("2909")),s={props:{width:{type:Number,default:0},height:{type:Number,default:0},src:{type:String,default:null},isHoverTrigger:{type:Boolean,default:!1},isInit:{type:Boolean,default:!1},targetWidth:{type:Number,default:null},isMultiSelecter:{type:Boolean,default:!1}},data:function(){return{canvas:null,ctx:null,offCanvas:null,offCtx:null,preCanvas:null,preCtx:null,img:null,drawing:!1,beginDrawPoint:null,drawingPoint:null,centerPoint:null,rectWidthHeight:[],regionDataUrl:"",canvasWidth:0,canvasHeight:0,regionResultList:[]}},computed:{canvasStyle:function(){return"width:".concat(this.canvasWidth,"px;height:").concat(this.canvasHeight,"px")}},watch:{src:{immediate:!0,handler:function(){this.initCanvas()}}},created:function(){},mounted:function(){},methods:{reset:function(){this.canvas=null,this.ctx=null,this.offCanvas=null,this.offCtx=null,this.preCanvas=null,this.preCtx=null,this.img=null,this.drawing=!1,this.beginDrawPoint=null,this.drawingPoint=null,this.centerPoint=null,this.rectWidthHeight=[],this.regionDataUrl="",this.canvasWidth=0,this.canvasHeight=0,this.regionResultList=[]},initCanvas:function(){var t=this;this.reset(),this.src&&(this.img=new Image,this.img.addEventListener("load",(function(){var e=t.img.width,i=t.img.height,n=e/i,a=t.width/t.height;if(n>a){var r=null;r=e>t.width?t.width:e,t.canvasWidth=r,t.canvasHeight=r*i/e}else if(n<=a){var s=null;s=i>t.height?t.height:i,t.canvasWidth=s*e/i,t.canvasHeight=s}else t.canvasWidth=e,t.canvasHeight=i;t.$nextTick((function(){t.canvas=document.getElementById("canvas"),t.ctx=t.canvas.getContext("2d"),t.offCanvas=document.createElement("canvas"),t.offCanvas.width=t.canvasWidth,t.offCanvas.height=t.canvasHeight,t.offCtx=t.offCanvas.getContext("2d"),t.offCtx.strokeStyle="#ee5051",t.offCtx.strokeWidth=2,t.offCtx.drawImage(t.img,0,0,t.offCanvas.width,t.offCanvas.height),t.ctx.drawImage(t.offCanvas,0,0),t.isInit&&(t.centerPoint=[250,250],t.getLeftImage())}))})),this.img.src=this.src)},mousedown:function(t){this.isHoverTrigger||(this.drawing=!0,this.beginDrawPoint=[t.offsetX,t.offsetY])},mousemove:function(t){if(this.isHoverTrigger)return this.centerPoint=[t.offsetX,t.offsetY],void this.getLeftImage("center");this.drawing&&(this.drawingPoint=[t.offsetX,t.offsetY],this.draw())},mouseup:function(t){this.isHoverTrigger||(this.drawingPoint=[t.offsetX,t.offsetY],this.drawing&&(this.drawing=!1,this.draw(!0),this.beginDrawPoint[0]===this.drawingPoint[0]&&this.beginDrawPoint[1]===this.drawingPoint[1]?(this.beginDrawPoint=null,this.drawingPoint=null,this.regionDataUrl=""):this.getLeftImage()))},getLeftImage:function(){var t=document.createElement("canvas"),e=this.img.width/this.offCanvas.width,i=[],n=[],a=[];if(this.isHoverTrigger){for(var s=0;s<this.centerPoint.length;s++)n[s]=this.centerPoint[s]*e-56,a[s]=this.centerPoint[s]*e+50;i=[116,100]}else{for(var o=0;o<this.drawingPoint.length;o++)n[o]=this.beginDrawPoint[o]*e,a[o]=this.drawingPoint[o]*e;for(var h=0;h<n.length;h++)i[h]=Math.abs(a[h]-n[h])}t.width=i[0],t.height=i[1];var f=t.getContext("2d");a[0]-n[0]<0&&(n=a),f.drawImage.apply(f,[this.img].concat(Object(r["a"])(n),[t.width,t.height,0,0,t.width,t.height])),this.regionDataUrl=t.toDataURL(),this.regionResultList.push(this.regionDataUrl),this.$emit("region",this.regionResultList)},draw:function(t){var e;this.preCanvas?this.offCtx.drawImage(this.preCanvas,0,0,this.offCanvas.width,this.offCanvas.height):this.offCtx.drawImage(this.img,0,0,this.offCanvas.width,this.offCanvas.height);for(var i=[],n=0;n<this.drawingPoint.length;n++)i[n]=this.drawingPoint[n]-this.beginDrawPoint[n];this.rectWidthHeight=i,(e=this.offCtx).strokeRect.apply(e,Object(r["a"])(this.beginDrawPoint).concat(i)),this.ctx.drawImage(this.offCanvas,0,0),t&&this.isMultiSelecter&&(this.preCanvas||(this.preCanvas=document.createElement("canvas"),this.preCanvas.width=this.canvasWidth,this.preCanvas.height=this.canvasHeight,this.preCtx=this.preCanvas.getContext("2d"),this.preCtx.strokeStyle="#ee5051",this.preCtx.strokeWidth=2),this.preCtx.drawImage(this.offCanvas,0,0))},clear:function(){this.offCtx.drawImage(this.img,0,0,this.offCanvas.width,this.offCanvas.height),this.beginDrawPoint=null,this.drawingPoint=null,this.regionResultList=[],this.preCanvas=null,this.preCtx=null,this.ctx.drawImage(this.offCanvas,0,0)}}},o=s,h=i("2877"),f=Object(h["a"])(o,n,a,!1,null,"5db7b127",null);e["default"]=f.exports},a9e3:function(t,e,i){"use strict";var n=i("83ab"),a=i("da84"),r=i("94ca"),s=i("6eeb"),o=i("5135"),h=i("c6b6"),f=i("7156"),u=i("c04e"),c=i("d039"),l=i("7c73"),d=i("241c").f,g=i("06cf").f,v=i("9bf2").f,p=i("58a8").trim,w="Number",m=a[w],C=m.prototype,b=h(l(C))==w,y=function(t){var e,i,n,a,r,s,o,h,f=u(t,!1);if("string"==typeof f&&f.length>2)if(f=p(f),e=f.charCodeAt(0),43===e||45===e){if(i=f.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+f}for(r=f.slice(2),s=r.length,o=0;o<s;o++)if(h=r.charCodeAt(o),h<48||h>a)return NaN;return parseInt(r,n)}return+f};if(r(w,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var x,I=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof I&&(b?c((function(){C.valueOf.call(i)})):h(i)!=w)?f(new m(y(e)),i,I):y(e)},P=n?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;P.length>k;k++)o(m,x=P[k])&&!o(I,x)&&v(I,x,g(m,x));I.prototype=C,C.constructor=I,s(a,w,I)}}}]);
//# sourceMappingURL=chunk-4d9a52c6.b57cd1c9.js.map