(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e600bdc"],{2909:function(t,i,e){"use strict";e.d(i,"a",(function(){return l}));var n=e("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}e("a4d3"),e("e01a"),e("d28b"),e("a630"),e("e260"),e("d3b7"),e("3ca3"),e("ddb0");function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=e("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return a(t)||s(t)||Object(o["a"])(t)||r()}},"3dba":function(t){t.exports=JSON.parse('[{"code":"","value":"全部","selected":true},{"code":"A","value":"白色"},{"code":"B","value":"灰色"},{"code":"C","value":"黄色"},{"code":"D","value":"粉色"},{"code":"E","value":"红色"},{"code":"F","value":"紫色"},{"code":"G","value":"绿色"},{"code":"H","value":"蓝色"},{"code":"I","value":"棕色"},{"code":"J","value":"黑色"},{"code":"M","value":"深灰色"},{"code":"K","value":"金色"},{"code":"L","value":"青色"},{"code":"Z","value":"其它"}]')},"45ab":function(t,i,e){},"6d64":function(t,i,e){"use strict";var n=e("45ab"),a=e.n(n);a.a},9003:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("view-pic-dialog",{attrs:{visible:t.bigPicVisible,index:t.index,list:t.tableData},on:{"update:visible":function(i){t.bigPicVisible=i}}}),e("div",[e("el-button",{attrs:{type:"primary"},on:{click:function(i){t.bigPicVisible=!t.bigPicVisible}}},[t._v(" 显示弹窗 ")])],1)],1)},a=[],s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-dialog",{staticClass:"common-table view-pic-dialog",attrs:{title:"查看图片",width:"1200px",visible:t.dialogVisible},on:{"update:visible":function(i){t.dialogVisible=i},close:t.cancel}},[e("div",{staticClass:"content"},[e("div",{staticClass:"pic-wrapper"},[e("selection-picture",{attrs:{src:t.currentItem&&t.currentItem["src"],"region-position":t.currentItem,"is-hover-trigger":!0,width:570,height:509,"target-width":570,"is-init":!0}})],1),e("div",{staticClass:"info"},[e("ul",{staticClass:"info-list clearfix"},["nonMotor"===t.nonMotorLayout?e("li",{staticClass:"info-item"},[e("span",{staticClass:"info-title"},[t._v("车辆类型：")]),e("span",[t._v(t._s(t.currentItem.vehicleType))])]):t._e(),"all"===t.nonMotorLayout?e("li",{staticClass:"info-item"},[e("span",{staticClass:"info-title"},[t._v("车牌号码：")]),e("span",[t._v(t._s(t.currentItem.plateNumber))])]):t._e(),"nonMotor"===t.nonMotorLayout||"all"===t.nonMotorLayout?e("li",{staticClass:"info-item"},[e("span",{staticClass:"info-title"},[t._v("过车时间：")]),e("span",[t._v(t._s(t.currentItem.passTime))])]):t._e(),"nonMotor"===t.nonMotorLayout||"all"===t.nonMotorLayout?e("li",{staticClass:"info-item"},[e("span",{staticClass:"info-title"},[t._v("点位：")]),e("span",{attrs:{title:t.currentItem.passPortName}},[t._v(t._s(t.util.beyondShowDot(t.currentItem.passPortName,20)))])]):t._e(),"all"===t.nonMotorLayout?e("li",{staticClass:"info-item"},[e("span",{staticClass:"info-title"},[t._v("车辆品牌：")]),e("span",[t._v(t._s(t.currentItem.brandName)+" ")])]):t._e(),"all"===t.nonMotorLayout?e("li",{staticClass:"info-item"},[e("span",{staticClass:"info-title"},[t._v("车身颜色：")]),e("span",{staticClass:"color-block",staticStyle:{"background-color":"#fff"}}),e("span")]):t._e(),"all"===t.nonMotorLayout?e("li",{staticClass:"info-item"},[e("span",{staticClass:"info-title"},[t._v("车辆类型：")]),e("span",[t._v(t._s(t.currentItem.vehicleType))])]):t._e()])])]),t.isShowFooter?e("footer",{staticClass:"footer"},[e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"},on:{click:t.prev}},[t._v(" 上一条 ")]),e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"},on:{click:t.next}},[t._v(" 下一条 ")]),e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"}},[t._v(" 以图搜车 ")]),e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"}},[t._v(" 下载图片 ")]),t.unreal?t._e():e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"}},[t._v(" 违章检测 ")]),t.isTrack?t._e():e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"}},[t._v(" 轨迹重现 ")]),t.unreal?e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"}},[t._v(" 加入假套牌车库 ")]):t._e(),t.unreal?e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"}},[t._v(" 布控详情 ")]):t._e()],1):t._e()])},o=[],r=(e("a9e3"),function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"clearfix"},[e("div",{staticClass:"left"},[e("div",{staticClass:"canvas-box"},[e("canvas",{staticClass:"open-3D",style:t.canvasStyle,attrs:{id:"canvas",width:t.canvasWidth,height:t.canvasHeight},on:{mousedown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.preventDefault(),t.mousedown(i))},mousemove:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.preventDefault(),t.mousemove(i))},mouseup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.preventDefault(),t.mouseup(i))},mouseleave:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.preventDefault(),t.mouseup(i))},contextmenu:function(i){return i.preventDefault(),t.clear(i)}}}),t.platePosition?e("span",{staticClass:"region-style",style:t.platePosition}):t._e()])]),t.isMultiSelecter?t._e():e("div",{staticClass:"right"},[e("img",{attrs:{src:t.regionDataUrl,width:t.targetWidth}})])])}),l=[],c=(e("99af"),e("a15b"),e("2909"));function h(t){if(Array.isArray(t))return t}e("a4d3"),e("e01a"),e("d28b"),e("e260"),e("d3b7"),e("3ca3"),e("ddb0");function u(t,i){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0)if(e.push(o.value),i&&e.length===i)break}catch(l){a=!0,s=l}finally{try{n||null==r["return"]||r["return"]()}finally{if(a)throw s}}return e}}var f=e("06c5");function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t,i){return h(t)||u(t,i)||Object(f["a"])(t,i)||d()}e("96cf");var v=e("1da1"),p={props:{width:{type:Number,default:0},height:{type:Number,default:0},src:{type:String,default:null},isHoverTrigger:{type:Boolean,default:!1},isInit:{type:Boolean,default:!1},targetWidth:{type:Number,default:null},isMultiSelecter:{type:Boolean,default:!1},regionPosition:{type:Object,default:function(){return null}}},data:function(){return{platePosition:null,canvas:null,ctx:null,offCanvas:null,offCtx:null,preCanvas:null,preCtx:null,img:null,drawing:!1,beginDrawPoint:null,drawingPoint:null,centerPoint:null,rectWidthHeight:[],regionDataUrl:"",canvasWidth:0,canvasHeight:0,regionResultList:[],toPositionArray:["0,0,0,0"]}},computed:{canvasStyle:function(){return"width:".concat(this.canvasWidth,"px;height:").concat(this.canvasHeight,"px")}},watch:{src:{immediate:!0,handler:function(){this.init()}}},created:function(){},mounted:function(){},methods:{init:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.reset(),t.src){i.next=3;break}return i.abrupt("return");case 3:t.img=new Image,t.platePosition={},t.img.addEventListener("load",(function(){t.initCanvasWidthHeight(),t.$nextTick((function(){t.initCanvas(),t.getRegionPosition()}))})),t.img.src=t.src;case 7:case"end":return i.stop()}}),i)})))()},getRegionPosition:function(){if(this.regionPosition)if(this.regionPosition.plateRectLeft||this.regionPosition.plateRectTop){var t=Math.round(this.regionPosition.plateRectTop/this.regionPosition.picheight*this.canvasHeight),i=Math.round(this.regionPosition.plateRectLeft/this.regionPosition.picwidth*this.canvasWidth),e=Math.ceil(this.regionPosition.plateRectWidth/this.regionPosition.picwidth*this.canvasWidth),n=Math.ceil(this.regionPosition.plateRectHeight/this.regionPosition.picheight*this.canvasHeight);this.platePosition={top:t+"px",left:i+"px",width:e+"px",height:n+"px",border:"1px red solid"}}else this.platePosition=null},reset:function(){this.canvas=null,this.ctx=null,this.offCanvas=null,this.offCtx=null,this.preCanvas=null,this.preCtx=null,this.img=null,this.drawing=!1,this.beginDrawPoint=null,this.drawingPoint=null,this.centerPoint=null,this.rectWidthHeight=[],this.regionDataUrl="",this.canvasWidth=0,this.canvasHeight=0,this.regionResultList=[],this.toPositionArray=["0,0,0,0"],this.$emit("toPosition",this.toPositionArray)},initCanvasWidthHeight:function(){var t=this.img.width,i=this.img.height,e=t/i,n=this.width/this.height;if(e>n){var a=null;a=t>this.width?this.width:t,this.canvasWidth=a,this.canvasHeight=a*i/t}else if(e<=n){var s=null;s=i>this.height?this.height:i,this.canvasWidth=s*t/i,this.canvasHeight=s}},initCanvas:function(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.offCanvas=document.createElement("canvas"),this.offCanvas.width=this.canvasWidth,this.offCanvas.height=this.canvasHeight,this.offCtx=this.offCanvas.getContext("2d"),this.offCtx.strokeStyle="#ee5051",this.offCtx.lineWidth=2,this.offCtx.drawImage(this.img,0,0,this.offCanvas.width,this.offCanvas.height),this.drawToRealCanvasFromOffCanvas(),this.isInit&&(this.centerPoint=[250,250],this.getMagnifyImage())},mousedown:function(t){this.isHoverTrigger||(this.drawing=!0,this.beginDrawPoint=[t.offsetX,t.offsetY])},mousemove:function(t){if(this.isHoverTrigger)return this.centerPoint=[t.offsetX,t.offsetY],void this.getMagnifyImage("center");this.drawing&&(this.drawingPoint=[t.offsetX,t.offsetY],this.draw())},mouseup:function(t){this.isHoverTrigger||(this.drawingPoint=[t.offsetX,t.offsetY],this.drawing&&(this.drawing=!1,this.draw(!0),this.beginDrawPoint[0]===this.drawingPoint[0]&&this.beginDrawPoint[1]===this.drawingPoint[1]?(this.beginDrawPoint=null,this.drawingPoint=null,this.regionDataUrl=""):this.getMagnifyImage()))},getMagnifyImage:function(){var t=this.getTempCanvas(),i=g(t,2),e=i[0],n=i[1],a=e.getContext("2d");a.drawImage.apply(a,[this.img].concat(Object(c["a"])(n),[e.width,e.height,0,0,e.width,e.height])),this.getBeginEndPoint(e,n),this.regionDataUrl=e.toDataURL(),this.regionResultList.push(this.regionDataUrl),this.$emit("region",this.regionResultList)},getBeginEndPoint:function(t,i){if(t&&i){for(var e=0;e<i.length;e++)i[e]=parseInt(i[e]);var n=i.join(","),a=parseInt(i[0]+t.width)+","+parseInt(i[1]+t.height),s=n+","+a;this.toPositionArray.push(s),this.$emit("toPosition",this.toPositionArray)}},getTempCanvas:function(){var t=[285,245],i=document.createElement("canvas"),e=this.img.width/this.offCanvas.width,n=[],a=[],s=[];if(this.isHoverTrigger){for(var o=0;o<this.centerPoint.length;o++)a[o]=this.centerPoint[o]*e-t[o];n=[2*t[0],2*t[1]]}else{for(var r=0;r<this.drawingPoint.length;r++)a[r]=this.beginDrawPoint[r]*e,s[r]=this.drawingPoint[r]*e;for(var l=0;l<a.length;l++)n[l]=Math.abs(s[l]-a[l]);var c=s[0]-a[0],h=s[1]-a[1];if(c*h>=0){if(c<0){var u=[s,a];a=u[0],s=u[1]}}else c>0?a[1]=a[1]-n[1]:a[0]=a[0]-n[0]}return i.width=n[0],i.height=n[1],[i,a]},draw:function(t){var i;this.preCanvas?this.offCtx.drawImage(this.preCanvas,0,0,this.offCanvas.width,this.offCanvas.height):this.offCtx.drawImage(this.img,0,0,this.offCanvas.width,this.offCanvas.height);for(var e=[],n=0;n<this.drawingPoint.length;n++)e[n]=this.drawingPoint[n]-this.beginDrawPoint[n];this.rectWidthHeight=e,(i=this.offCtx).strokeRect.apply(i,Object(c["a"])(this.beginDrawPoint).concat(e)),this.drawToRealCanvasFromOffCanvas(),t&&this.isMultiSelecter&&(this.preCanvas||(this.preCanvas=document.createElement("canvas"),this.preCanvas.width=this.canvasWidth,this.preCanvas.height=this.canvasHeight,this.preCtx=this.preCanvas.getContext("2d"),this.preCtx.strokeStyle="#ee5051",this.preCtx.strokeWidth=2),this.preCtx.drawImage(this.offCanvas,0,0))},clear:function(){this.offCtx.drawImage(this.img,0,0,this.offCanvas.width,this.offCanvas.height),this.beginDrawPoint=null,this.drawingPoint=null,this.regionResultList=[],this.preCanvas=null,this.preCtx=null,this.drawToRealCanvasFromOffCanvas()},drawToRealCanvasFromOffCanvas:function(){this.ctx.drawImage(this.offCanvas,0,0)}}},m=p,b=e("2877"),y=Object(b["a"])(m,r,l,!1,null,"cdea7078",null),C=y.exports,w=e("3dba"),P=e("8c6e"),x={name:"ViewPicDialog",components:{SelectionPicture:C},props:{list:{type:Array,default:null},index:{type:Number,default:0},visible:{type:Boolean,default:!1},unreal:{type:Boolean,default:!1},isTrack:{type:Boolean,default:!1},nonMotorLayout:{type:String,default:"all"},isShowFooter:{type:Boolean,default:!0}},data:function(){return{util:P["a"],dialogVisible:!1,currentIndex:0,carColor:w,regionPosition:null}},computed:{currentItem:function(){return this.list&&this.list[this.currentIndex]||{}}},watch:{visible:{immediate:!0,handler:function(){this.dialogVisible=this.visible}},index:function(){this.currentIndex=this.index}},mounted:function(){this.init()},methods:{init:function(){this.list&&this.list.length&&(this.currentIndex=this.index)},prev:function(){this.list&&0!==this.currentIndex&&this.currentIndex--},next:function(){this.list&&this.currentIndex!==this.list.length-1&&this.currentIndex++},cancel:function(){this.$emit("update:visible",!1)}}},_=x,I=(e("6d64"),Object(b["a"])(_,s,o,!1,null,"352a7a8e",null)),k=I.exports,D=e("d000"),L=e.n(D),M={name:"ViewPicDialogDemo",components:{ViewPicDialog:k},data:function(){return{bigPicVisible:!1,index:0,tableData:[{src:L.a,license:"粤222222",passTime:"2019-07-7 14:30:46",bayonet:"石星路与路口",carBrand:"品牌",carColor:"黑色",carType:"卡车"},{src:L.a,license:"粤222233",passTime:"2019-07-7 14:30:46",bayonet:"石星路与路口",carBrand:"卡车",carColor:"黑色",carType:"卡车"}]}}},T=M,H=Object(b["a"])(T,n,a,!1,null,"7e90af9f",null);i["default"]=H.exports},d000:function(t,i,e){t.exports=e.p+"img/car.d58a7d1f.jpg"}}]);
//# sourceMappingURL=chunk-7e600bdc.3ced5909.js.map